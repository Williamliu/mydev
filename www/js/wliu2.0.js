
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=getComputedStyle(t)||{},o=e.position;if("fixed"===o)return t;for(var i=t;i=i.parentNode;){var n=void 0;try{n=getComputedStyle(i)}catch(r){}if("undefined"==typeof n||null===n)return i;var s=n,a=s.overflow,f=s.overflowX,h=s.overflowY;if(/(auto|scroll)/.test(a+h+f)&&("absolute"!==o||["relative","absolute","fixed"].indexOf(n.position)>=0))return i}return document.body}function r(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,i={},n=t.getBoundingClientRect();for(var r in n)i[r]=n[r];var s=x(e);return i.top-=s.top,i.left-=s.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-o.clientTop,i.left=i.left-o.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function s(t){return t.offsetParent||document.documentElement}function a(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");f(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;o===i&&(i=e.clientWidth),document.body.removeChild(e);var n=o-i;return{width:n,height:n}}function f(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])}),t}function h(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=u(t).replace(o," ");p(t,i)}}function l(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{h(t,e);var o=u(t)+(" "+e);p(t,o)}}function d(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var o=u(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function u(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className}function p(t,e){t.setAttribute("class",e)}function c(t,e,o){o.forEach(function(o){-1===e.indexOf(o)&&d(t,o)&&h(t,o)}),e.forEach(function(e){d(t,e)||l(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}function m(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function v(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),i=0;e>i;i++)o[i]=arguments[i];return o.forEach(function(e){var o=e.top,i=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=o,t.left+=i}),t}function y(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function b(t,e){return"scrollParent"===e?e=t.scrollParent:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=r(e),o=t,i=getComputedStyle(e);e=[o.left,o.top,t.width+o.left,t.height+o.top],U.forEach(function(t,o){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[o]+=parseFloat(i["border"+t+"Width"]):e[o]-=parseFloat(i["border"+t+"Width"])})}(),e}var w=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),C=void 0;"undefined"==typeof C&&(C={modules:[]});var O=function(){var t=0;return function(){return++t}}(),E={},x=function(t){var e=t._tetherZeroElement;"undefined"==typeof e&&(e=t.createElement("div"),e.setAttribute("data-tether-id",O()),f(e.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(e),t._tetherZeroElement=e);var o=e.getAttribute("data-tether-id");if("undefined"==typeof E[o]){E[o]={};var i=e.getBoundingClientRect();for(var n in i)E[o][n]=i[n];T(function(){delete E[o]})}return E[o]},A=[],T=function(t){A.push(t)},S=function(){for(var t=void 0;t=A.pop();)t()},W=function(){function t(){i(this,t)}return w(t,[{key:"on",value:function(t,e,o){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,i=Array(o>1?o-1:0),n=1;o>n;n++)i[n-1]=arguments[n];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,f=r.once,h=a;"undefined"==typeof h&&(h=this),s.apply(h,i),f?this.bindings[t].splice(e,1):++e}}}}]),t}();C.Utils={getScrollParent:n,getBounds:r,getOffsetParent:s,extend:f,addClass:l,removeClass:h,hasClass:d,updateClasses:c,defer:T,flush:S,uniqueId:O,Evented:W,getScrollBarSize:a};var M=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();if("undefined"==typeof C)throw new Error("You must include the utils.js file before tether.js");var P=C.Utils,n=P.getScrollParent,r=P.getBounds,s=P.getOffsetParent,f=P.extend,l=P.addClass,h=P.removeClass,c=P.updateClasses,T=P.defer,S=P.flush,a=P.getScrollBarSize,k=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var i=e[o];if(void 0!==t.style[i])return i}}(),B=[],_=function(){B.forEach(function(t){t.position(!1)}),S()};!function(){var t=null,e=null,o=null,i=function n(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(o=setTimeout(n,250))):void("undefined"!=typeof t&&m()-t<10||("undefined"!=typeof o&&(clearTimeout(o),o=null),t=m(),_(),e=m()-t))};"undefined"!=typeof window&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var z={center:"center",left:"right",right:"left"},F={middle:"middle",top:"bottom",bottom:"top"},L={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},Y=function(t,e){var o=t.left,i=t.top;return"auto"===o&&(o=z[e.left]),"auto"===i&&(i=F[e.top]),{left:o,top:i}},H=function(t){var e=t.left,o=t.top;return"undefined"!=typeof L[t.left]&&(e=L[t.left]),"undefined"!=typeof L[t.top]&&(o=L[t.top]),{left:e,top:o}},X=function(t){var e=t.split(" "),o=M(e,2),i=o[0],n=o[1];return{top:i,left:n}},j=X,N=function(){function t(e){var o=this;i(this,t),this.position=this.position.bind(this),B.push(this),this.history=[],this.setOptions(e,!1),C.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(o)}),this.position()}return w(t,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=f(i,t);var r=this.options,s=r.element,a=r.target,h=r.targetModifier;if(this.element=s,this.target=a,this.targetModifier=h,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),l(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&l(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=j(this.options.targetAttachment),this.attachment=j(this.options.attachment),this.offset=X(this.options.offset),this.targetOffset=X(this.options.targetOffset),"undefined"!=typeof this.scrollParent&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParent=this.target:this.scrollParent=n(this.target),this.options.enabled!==!1&&this.enable(o)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return r(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=r(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,o=this.target;o===document.body?(o=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=r(o);var i=getComputedStyle(o),n=o.scrollWidth>o.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,s=0;n&&(s=15);var a=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-s,e={width:15,height:.975*a*(a/o.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},f=0;408>a&&this.target===document.body&&(f=-11e-5*Math.pow(a,2)-.00727*a+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var h=this.target.scrollTop/(o.scrollHeight-a);return e.top=h*(a-e.height-f)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.options.addTargetClasses!==!1&&l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t&&this.position()}},{key:"disable",value:function(){h(this.target,this.getClass("enabled")),h(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.position)}},{key:"destroy",value:function(){var t=this;this.disable(),B.forEach(function(e,o){return e===t?void B.splice(o,1):void 0})}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),T(function(){"undefined"!=typeof o._addAttachClasses&&(c(o.element,o._addAttachClasses,r),o.options.addTargetClasses!==!1&&c(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var o=Y(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,o);var i=this.cache("element-bounds",function(){return r(t.element)}),n=i.width,f=i.height;if(0===n&&0===f&&"undefined"!=typeof this.lastSize){var h=this.lastSize;n=h.width,f=h.height}else this.lastSize={width:n,height:f};var l=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=l,u=y(H(this.attachment),{width:n,height:f}),p=y(H(o),d),c=y(this.offset,{width:n,height:f}),g=y(this.targetOffset,d);u=v(u,c),p=v(p,g);for(var m=l.left+p.left-u.left,b=l.top+p.top-u.top,w=0;w<C.modules.length;++w){var O=C.modules[w],E=O.position.call(this,{left:m,top:b,targetAttachment:o,targetPos:l,elementPos:i,offset:u,targetOffset:p,manualOffset:c,manualTargetOffset:g,scrollbarSize:A,attachment:this.attachment});if(E===!1)return!1;"undefined"!=typeof E&&"object"==typeof E&&(b=E.top,m=E.left)}var x={page:{top:b,left:m},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-f+innerHeight,left:m-pageXOffset,right:pageXOffset-m-n+innerWidth}},A=void 0;return document.body.scrollWidth>window.innerWidth&&(A=this.cache("scrollbar-size",a),x.viewport.bottom-=A.height),document.body.scrollHeight>window.innerHeight&&(A=this.cache("scrollbar-size",a),x.viewport.right-=A.width),(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))&&(x.page.bottom=document.body.scrollHeight-b-f,x.page.right=document.body.scrollWidth-m-n),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return s(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return r(e)}),i=getComputedStyle(e),n=o,a={};if(["Top","Left","Bottom","Right"].forEach(function(t){a[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),o.right=document.body.scrollWidth-o.left-n.width+a.right,o.bottom=document.body.scrollHeight-o.top-n.height+a.bottom,x.page.top>=o.top+a.top&&x.page.bottom>=o.bottom&&x.page.left>=o.left+a.left&&x.page.right>=o.right){var f=e.scrollTop,h=e.scrollLeft;x.offset={top:x.page.top-o.top+f-a.top,left:x.page.left-o.left+h-a.left}}}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),e&&S(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var o={};for(var i in t){o[i]={};for(var n in t[i]){for(var r=!1,a=0;a<this.history.length;++a){var h=this.history[a];if("undefined"!=typeof h[i]&&!g(h[i][n],t[i][n])){r=!0;break}}r||(o[i][n]=!0)}}var l={top:"",left:"",right:"",bottom:""},d=function(t,o){var i="undefined"!=typeof e.options.optimizations,n=i?e.options.optimizations.gpu:null;if(n!==!1){var r=void 0,s=void 0;t.top?(l.top=0,r=o.top):(l.bottom=0,r=-o.bottom),t.left?(l.left=0,s=o.left):(l.right=0,s=-o.right),l[k]="translateX("+Math.round(s)+"px) translateY("+Math.round(r)+"px)","msTransform"!==k&&(l[k]+=" translateZ(0)")}else t.top?l.top=o.top+"px":l.bottom=o.bottom+"px",t.left?l.left=o.left+"px":l.right=o.right+"px"},u=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(l.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(l.position="fixed",d(o.viewport,t.viewport)):"undefined"!=typeof o.offset&&o.offset.top&&o.offset.left?!function(){l.position="absolute";var i=e.cache("target-offsetparent",function(){return s(e.target)});s(e.element)!==i&&T(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),d(o.offset,t.offset),u=!0}():(l.position="absolute",d({top:!0,left:!0},t.page)),!u){for(var p=!0,c=this.element.parentNode;c&&"BODY"!==c.tagName;){if("static"!==getComputedStyle(c).position){p=!1;break}c=c.parentNode}p||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var m={},v=!1;for(var n in l){var y=l[n],b=this.element.style[n];""!==b&&""!==y&&["top","left","bottom","right"].indexOf(n)>=0&&(b=parseFloat(b),y=parseFloat(y)),b!==y&&(v=!0,m[n]=y)}v&&T(function(){f(e.element.style,m)})}}}]),t}();N.modules=[],C.position=_;var R=f(N,C),M=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=C.Utils,r=P.getBounds,f=P.extend,c=P.updateClasses,T=P.defer,U=["left","top","right","bottom"];C.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=t.targetAttachment;if(!this.options.constraints)return!0;var s=this.cache("element-bounds",function(){return r(e.element)}),a=s.height,h=s.width;if(0===h&&0===a&&"undefined"!=typeof this.lastSize){var l=this.lastSize;h=l.width,a=l.height}var d=this.cache("target-bounds",function(){return e.getTargetBounds()}),u=d.height,p=d.width,g=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&g.push(e),o&&g.push(o)}),g.forEach(function(t){["left","top","right","bottom"].forEach(function(e){g.push(t+"-"+e)})});var m=[],v=f({},n),y=f({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,s=t.attachment,f=t.pin;"undefined"==typeof s&&(s="");var l=void 0,d=void 0;if(s.indexOf(" ")>=0){var c=s.split(" "),g=M(c,2);d=g[0],l=g[1]}else l=d=s;var w=b(e,r);("target"===d||"both"===d)&&(o<w[1]&&"top"===v.top&&(o+=u,v.top="bottom"),o+a>w[3]&&"bottom"===v.top&&(o-=u,v.top="top")),"together"===d&&(o<w[1]&&"top"===v.top&&("bottom"===y.top?(o+=u,v.top="bottom",o+=a,y.top="top"):"top"===y.top&&(o+=u,v.top="bottom",o-=a,y.top="bottom")),o+a>w[3]&&"bottom"===v.top&&("top"===y.top?(o-=u,v.top="top",o-=a,y.top="bottom"):"bottom"===y.top&&(o-=u,v.top="top",o+=a,y.top="top")),"middle"===v.top&&(o+a>w[3]&&"top"===y.top?(o-=a,y.top="bottom"):o<w[1]&&"bottom"===y.top&&(o+=a,y.top="top"))),("target"===l||"both"===l)&&(i<w[0]&&"left"===v.left&&(i+=p,v.left="right"),i+h>w[2]&&"right"===v.left&&(i-=p,v.left="left")),"together"===l&&(i<w[0]&&"left"===v.left?"right"===y.left?(i+=p,v.left="right",i+=h,y.left="left"):"left"===y.left&&(i+=p,v.left="right",i-=h,y.left="right"):i+h>w[2]&&"right"===v.left?"left"===y.left?(i-=p,v.left="left",i-=h,y.left="right"):"right"===y.left&&(i-=p,v.left="left",i+=h,y.left="left"):"center"===v.left&&(i+h>w[2]&&"left"===y.left?(i-=h,y.left="right"):i<w[0]&&"right"===y.left&&(i+=h,y.left="left"))),("element"===d||"both"===d)&&(o<w[1]&&"bottom"===y.top&&(o+=a,y.top="top"),o+a>w[3]&&"top"===y.top&&(o-=a,y.top="bottom")),("element"===l||"both"===l)&&(i<w[0]&&("right"===y.left?(i+=h,y.left="left"):"center"===y.left&&(i+=h/2,y.left="left")),i+h>w[2]&&("left"===y.left?(i-=h,y.left="right"):"center"===y.left&&(i-=h/2,y.left="right"))),"string"==typeof f?f=f.split(",").map(function(t){return t.trim()}):f===!0&&(f=["top","left","right","bottom"]),f=f||[];var C=[],O=[];o<w[1]&&(f.indexOf("top")>=0?(o=w[1],C.push("top")):O.push("top")),o+a>w[3]&&(f.indexOf("bottom")>=0?(o=w[3]-a,C.push("bottom")):O.push("bottom")),i<w[0]&&(f.indexOf("left")>=0?(i=w[0],C.push("left")):O.push("left")),i+h>w[2]&&(f.indexOf("right")>=0?(i=w[2]-h,C.push("right")):O.push("right")),C.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),m.push(t),C.forEach(function(e){m.push(t+"-"+e)})}(),O.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),m.push(t),O.forEach(function(e){m.push(t+"-"+e)})}(),(C.indexOf("left")>=0||C.indexOf("right")>=0)&&(y.left=v.left=!1),(C.indexOf("top")>=0||C.indexOf("bottom")>=0)&&(y.top=v.top=!1),(v.top!==n.top||v.left!==n.left||y.top!==e.attachment.top||y.left!==e.attachment.left)&&e.updateAttachClasses(y,v)}),T(function(){e.options.addTargetClasses!==!1&&c(e.target,m,g),c(e.element,m,g)}),{top:o,left:i}}});var P=C.Utils,r=P.getBounds,c=P.updateClasses,T=P.defer;C.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=this.cache("element-bounds",function(){return r(e.element)}),s=n.height,a=n.width,f=this.getTargetBounds(),h=o+s,l=i+a,d=[];o<=f.bottom&&h>=f.top&&["left","right"].forEach(function(t){var e=f[t];(e===i||e===l)&&d.push(t)}),i<=f.right&&l>=f.left&&["top","bottom"].forEach(function(t){var e=f[t];(e===o||e===h)&&d.push(t)});var u=[],p=[],g=["left","top","right","bottom"];return u.push(this.getClass("abutted")),g.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),d.length&&p.push(this.getClass("abutted")),d.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),T(function(){e.options.addTargetClasses!==!1&&c(e.target,p,u),c(e.element,p,u)}),!0}});var M=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return C.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:o}));var n=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=i,a=M(s,2);n=a[0],r=a[1],n=parseFloat(n,10),r=parseFloat(r,10)}else n=i.top,r=i.left;return e+=n,o+=r,{top:e,left:o}}}}),R});
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(jQuery),+function(){function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(t){return(t[0]||t).nodeType}function i(){return{bindType:a.end,delegateType:a.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function o(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in h)if(void 0!==t.style[e])return{end:h[e]};return!1}function r(e){var n=this,i=!1;return t(this).one(c.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||c.triggerTransitionEnd(n)},e),this}function s(){a=o(),t.fn.emulateTransitionEnd=r,c.supportsTransitionEnd()&&(t.event.special[c.TRANSITION_END]=i())}var a=!1,l=1e6,h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do t+=~~(Math.random()*l);while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r],a=i[r],l=a&&n(a)?"element":e(a);if(!new RegExp(s).test(l))throw new Error(t.toUpperCase()+": "+('Option "'+r+'" provided type "'+l+'" ')+('but expected type "'+s+'".'))}}};return s(),c}(jQuery),s=(function(t){var e="alert",i="4.0.0-alpha.6",s="bs.alert",a="."+s,l=".data-api",h=t.fn[e],c=150,u={DISMISS:'[data-dismiss="alert"]'},d={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+l},f={ALERT:"alert",FADE:"fade",SHOW:"show"},_=function(){function e(t){n(this,e),this._element=t}return e.prototype.close=function(t){t=t||this._element;var e=this._getRootElement(t),n=this._triggerCloseEvent(e);n.isDefaultPrevented()||this._removeElement(e)},e.prototype.dispose=function(){t.removeData(this._element,s),this._element=null},e.prototype._getRootElement=function(e){var n=r.getSelectorFromElement(e),i=!1;return n&&(i=t(n)[0]),i||(i=t(e).closest("."+f.ALERT)[0]),i},e.prototype._triggerCloseEvent=function(e){var n=t.Event(d.CLOSE);return t(e).trigger(n),n},e.prototype._removeElement=function(e){var n=this;return t(e).removeClass(f.SHOW),r.supportsTransitionEnd()&&t(e).hasClass(f.FADE)?void t(e).one(r.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(c):void this._destroyElement(e)},e.prototype._destroyElement=function(e){t(e).detach().trigger(d.CLOSED).remove()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);o||(o=new e(this),i.data(s,o)),"close"===n&&o[n](this)})},e._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(d.CLICK_DATA_API,u.DISMISS,_._handleDismiss(new _)),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=h,_._jQueryInterface},_}(jQuery),function(t){var e="button",i="4.0.0-alpha.6",r="bs.button",s="."+r,a=".data-api",l=t.fn[e],h={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},c={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},u={CLICK_DATA_API:"click"+s+a,FOCUS_BLUR_DATA_API:"focus"+s+a+" "+("blur"+s+a)},d=function(){function e(t){n(this,e),this._element=t}return e.prototype.toggle=function(){var e=!0,n=t(this._element).closest(c.DATA_TOGGLE)[0];if(n){var i=t(this._element).find(c.INPUT)[0];if(i){if("radio"===i.type)if(i.checked&&t(this._element).hasClass(h.ACTIVE))e=!1;else{var o=t(n).find(c.ACTIVE)[0];o&&t(o).removeClass(h.ACTIVE)}e&&(i.checked=!t(this._element).hasClass(h.ACTIVE),t(i).trigger("change")),i.focus()}}this._element.setAttribute("aria-pressed",!t(this._element).hasClass(h.ACTIVE)),e&&t(this._element).toggleClass(h.ACTIVE)},e.prototype.dispose=function(){t.removeData(this._element,r),this._element=null},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(r);i||(i=new e(this),t(this).data(r,i)),"toggle"===n&&i[n]()})},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(u.CLICK_DATA_API,c.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var n=e.target;t(n).hasClass(h.BUTTON)||(n=t(n).closest(c.BUTTON)),d._jQueryInterface.call(t(n),"toggle")}).on(u.FOCUS_BLUR_DATA_API,c.DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(c.BUTTON)[0];t(n).toggleClass(h.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=d._jQueryInterface,t.fn[e].Constructor=d,t.fn[e].noConflict=function(){return t.fn[e]=l,d._jQueryInterface},d}(jQuery),function(t){var e="carousel",s="4.0.0-alpha.6",a="bs.carousel",l="."+a,h=".data-api",c=t.fn[e],u=600,d=37,f=39,_={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},g={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},p={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},m={SLIDE:"slide"+l,SLID:"slid"+l,KEYDOWN:"keydown"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l,LOAD_DATA_API:"load"+l+h,CLICK_DATA_API:"click"+l+h},E={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},v={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},T=function(){function h(e,i){n(this,h),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(i),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(v.INDICATORS)[0],this._addEventListeners()}return h.prototype.next=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(p.NEXT)},h.prototype.nextWhenVisible=function(){document.hidden||this.next()},h.prototype.prev=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(p.PREVIOUS)},h.prototype.pause=function(e){e||(this._isPaused=!0),t(this._element).find(v.NEXT_PREV)[0]&&r.supportsTransitionEnd()&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},h.prototype.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},h.prototype.to=function(e){var n=this;this._activeElement=t(this._element).find(v.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(this._isSliding)return void t(this._element).one(m.SLID,function(){return n.to(e)});if(i===e)return this.pause(),void this.cycle();var o=e>i?p.NEXT:p.PREVIOUS;this._slide(o,this._items[e])}},h.prototype.dispose=function(){t(this._element).off(l),t.removeData(this._element,a),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},h.prototype._getConfig=function(n){return n=t.extend({},_,n),r.typeCheckConfig(e,n,g),n},h.prototype._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(m.KEYDOWN,function(t){return e._keydown(t)}),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||t(this._element).on(m.MOUSEENTER,function(t){return e.pause(t)}).on(m.MOUSELEAVE,function(t){return e.cycle(t)})},h.prototype._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case d:t.preventDefault(),this.prev();break;case f:t.preventDefault(),this.next();break;default:return}},h.prototype._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(v.ITEM)),this._items.indexOf(e)},h.prototype._getItemByDirection=function(t,e){var n=t===p.NEXT,i=t===p.PREVIOUS,o=this._getItemIndex(e),r=this._items.length-1,s=i&&0===o||n&&o===r;if(s&&!this._config.wrap)return e;var a=t===p.PREVIOUS?-1:1,l=(o+a)%this._items.length;return l===-1?this._items[this._items.length-1]:this._items[l]},h.prototype._triggerSlideEvent=function(e,n){var i=t.Event(m.SLIDE,{relatedTarget:e,direction:n});return t(this._element).trigger(i),i},h.prototype._setActiveIndicatorElement=function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(v.ACTIVE).removeClass(E.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(E.ACTIVE)}},h.prototype._slide=function(e,n){var i=this,o=t(this._element).find(v.ACTIVE_ITEM)[0],s=n||o&&this._getItemByDirection(e,o),a=Boolean(this._interval),l=void 0,h=void 0,c=void 0;if(e===p.NEXT?(l=E.LEFT,h=E.NEXT,c=p.LEFT):(l=E.RIGHT,h=E.PREV,c=p.RIGHT),s&&t(s).hasClass(E.ACTIVE))return void(this._isSliding=!1);var d=this._triggerSlideEvent(s,c);if(!d.isDefaultPrevented()&&o&&s){this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s);var f=t.Event(m.SLID,{relatedTarget:s,direction:c});r.supportsTransitionEnd()&&t(this._element).hasClass(E.SLIDE)?(t(s).addClass(h),r.reflow(s),t(o).addClass(l),t(s).addClass(l),t(o).one(r.TRANSITION_END,function(){t(s).removeClass(l+" "+h).addClass(E.ACTIVE),t(o).removeClass(E.ACTIVE+" "+h+" "+l),i._isSliding=!1,setTimeout(function(){return t(i._element).trigger(f)},0)}).emulateTransitionEnd(u)):(t(o).removeClass(E.ACTIVE),t(s).addClass(E.ACTIVE),this._isSliding=!1,t(this._element).trigger(f)),a&&this.cycle()}},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o=t.extend({},_,t(this).data());"object"===("undefined"==typeof e?"undefined":i(e))&&t.extend(o,e);var r="string"==typeof e?e:o.slide;if(n||(n=new h(this,o),t(this).data(a,n)),"number"==typeof e)n.to(e);else if("string"==typeof r){if(void 0===n[r])throw new Error('No method named "'+r+'"');n[r]()}else o.interval&&(n.pause(),n.cycle())})},h._dataApiClickHandler=function(e){var n=r.getSelectorFromElement(this);if(n){var i=t(n)[0];if(i&&t(i).hasClass(E.CAROUSEL)){var o=t.extend({},t(i).data(),t(this).data()),s=this.getAttribute("data-slide-to");s&&(o.interval=!1),h._jQueryInterface.call(t(i),o),s&&t(i).data(a).to(s),e.preventDefault()}}},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return _}}]),h}();return t(document).on(m.CLICK_DATA_API,v.DATA_SLIDE,T._dataApiClickHandler),t(window).on(m.LOAD_DATA_API,function(){t(v.DATA_RIDE).each(function(){var e=t(this);T._jQueryInterface.call(e,e.data())})}),t.fn[e]=T._jQueryInterface,t.fn[e].Constructor=T,t.fn[e].noConflict=function(){return t.fn[e]=c,T._jQueryInterface},T}(jQuery),function(t){var e="collapse",s="4.0.0-alpha.6",a="bs.collapse",l="."+a,h=".data-api",c=t.fn[e],u=600,d={toggle:!0,parent:""},f={toggle:"boolean",parent:"string"},_={SHOW:"show"+l,SHOWN:"shown"+l,HIDE:"hide"+l,HIDDEN:"hidden"+l,CLICK_DATA_API:"click"+l+h},g={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},p={WIDTH:"width",HEIGHT:"height"},m={ACTIVES:".card > .show, .card > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},E=function(){function l(e,i){n(this,l),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(i),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],'+('[data-toggle="collapse"][data-target="#'+e.id+'"]'))),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return l.prototype.toggle=function(){t(this._element).hasClass(g.SHOW)?this.hide():this.show()},l.prototype.show=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(!t(this._element).hasClass(g.SHOW)){var n=void 0,i=void 0;if(this._parent&&(n=t.makeArray(t(this._parent).find(m.ACTIVES)),n.length||(n=null)),!(n&&(i=t(n).data(a),i&&i._isTransitioning))){var o=t.Event(_.SHOW);if(t(this._element).trigger(o),!o.isDefaultPrevented()){n&&(l._jQueryInterface.call(t(n),"hide"),i||t(n).data(a,null));var s=this._getDimension();t(this._element).removeClass(g.COLLAPSE).addClass(g.COLLAPSING),this._element.style[s]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(g.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){t(e._element).removeClass(g.COLLAPSING).addClass(g.COLLAPSE).addClass(g.SHOW),e._element.style[s]="",e.setTransitioning(!1),t(e._element).trigger(_.SHOWN)};if(!r.supportsTransitionEnd())return void h();var c=s[0].toUpperCase()+s.slice(1),d="scroll"+c;t(this._element).one(r.TRANSITION_END,h).emulateTransitionEnd(u),this._element.style[s]=this._element[d]+"px"}}}},l.prototype.hide=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(t(this._element).hasClass(g.SHOW)){var n=t.Event(_.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension(),o=i===p.WIDTH?"offsetWidth":"offsetHeight";this._element.style[i]=this._element[o]+"px",r.reflow(this._element),t(this._element).addClass(g.COLLAPSING).removeClass(g.COLLAPSE).removeClass(g.SHOW),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(g.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var s=function(){e.setTransitioning(!1),t(e._element).removeClass(g.COLLAPSING).addClass(g.COLLAPSE).trigger(_.HIDDEN)};return this._element.style[i]="",r.supportsTransitionEnd()?void t(this._element).one(r.TRANSITION_END,s).emulateTransitionEnd(u):void s()}}},l.prototype.setTransitioning=function(t){this._isTransitioning=t},l.prototype.dispose=function(){t.removeData(this._element,a),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},l.prototype._getConfig=function(n){return n=t.extend({},d,n),n.toggle=Boolean(n.toggle),r.typeCheckConfig(e,n,f),n},l.prototype._getDimension=function(){var e=t(this._element).hasClass(p.WIDTH);return e?p.WIDTH:p.HEIGHT},l.prototype._getParent=function(){var e=this,n=t(this._config.parent)[0],i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(i).each(function(t,n){e._addAriaAndCollapsedClass(l._getTargetFromElement(n),[n])}),n},l.prototype._addAriaAndCollapsedClass=function(e,n){if(e){var i=t(e).hasClass(g.SHOW);e.setAttribute("aria-expanded",i),n.length&&t(n).toggleClass(g.COLLAPSED,!i).attr("aria-expanded",i)}},l._getTargetFromElement=function(e){var n=r.getSelectorFromElement(e);return n?t(n)[0]:null},l._jQueryInterface=function(e){return this.each(function(){var n=t(this),o=n.data(a),r=t.extend({},d,n.data(),"object"===("undefined"==typeof e?"undefined":i(e))&&e);if(!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||(o=new l(this,r),n.data(a,o)),"string"==typeof e){if(void 0===o[e])throw new Error('No method named "'+e+'"');o[e]()}})},o(l,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return d}}]),l}();return t(document).on(_.CLICK_DATA_API,m.DATA_TOGGLE,function(e){e.preventDefault();var n=E._getTargetFromElement(this),i=t(n).data(a),o=i?"toggle":t(this).data();E._jQueryInterface.call(t(n),o)}),t.fn[e]=E._jQueryInterface,t.fn[e].Constructor=E,t.fn[e].noConflict=function(){return t.fn[e]=c,E._jQueryInterface},E}(jQuery),function(t){var e="dropdown",i="4.0.0-alpha.6",s="bs.dropdown",a="."+s,l=".data-api",h=t.fn[e],c=27,u=38,d=40,f=3,_={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+l,FOCUSIN_DATA_API:"focusin"+a+l,KEYDOWN_DATA_API:"keydown"+a+l},g={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",SHOW:"show"},p={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},m=function(){function e(t){n(this,e),this._element=t,this._addEventListeners()}return e.prototype.toggle=function(){if(this.disabled||t(this).hasClass(g.DISABLED))return!1;var n=e._getParentFromElement(this),i=t(n).hasClass(g.SHOW);if(e._clearMenus(),i)return!1;if("ontouchstart"in document.documentElement&&!t(n).closest(p.NAVBAR_NAV).length){var o=document.createElement("div");o.className=g.BACKDROP,t(o).insertBefore(this),t(o).on("click",e._clearMenus)}var r={relatedTarget:this},s=t.Event(_.SHOW,r);return t(n).trigger(s),!s.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded",!0),t(n).toggleClass(g.SHOW),t(n).trigger(t.Event(_.SHOWN,r)),!1)},e.prototype.dispose=function(){t.removeData(this._element,s),t(this._element).off(a),this._element=null},e.prototype._addEventListeners=function(){t(this._element).on(_.CLICK,this.toggle)},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(s);if(i||(i=new e(this),t(this).data(s,i)),"string"==typeof n){if(void 0===i[n])throw new Error('No method named "'+n+'"');i[n].call(this)}})},e._clearMenus=function(n){if(!n||n.which!==f){var i=t(p.BACKDROP)[0];i&&i.parentNode.removeChild(i);for(var o=t.makeArray(t(p.DATA_TOGGLE)),r=0;r<o.length;r++){var s=e._getParentFromElement(o[r]),a={relatedTarget:o[r]};if(t(s).hasClass(g.SHOW)&&!(n&&("click"===n.type&&/input|textarea/i.test(n.target.tagName)||"focusin"===n.type)&&t.contains(s,n.target))){var l=t.Event(_.HIDE,a);t(s).trigger(l),l.isDefaultPrevented()||(o[r].setAttribute("aria-expanded","false"),t(s).removeClass(g.SHOW).trigger(t.Event(_.HIDDEN,a)))}}}},e._getParentFromElement=function(e){var n=void 0,i=r.getSelectorFromElement(e);return i&&(n=t(i)[0]),n||e.parentNode},e._dataApiKeydownHandler=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!t(this).hasClass(g.DISABLED))){var i=e._getParentFromElement(this),o=t(i).hasClass(g.SHOW);if(!o&&n.which!==c||o&&n.which===c){if(n.which===c){var r=t(i).find(p.DATA_TOGGLE)[0];t(r).trigger("focus")}return void t(this).trigger("click")}var s=t(i).find(p.VISIBLE_ITEMS).get();if(s.length){var a=s.indexOf(n.target);n.which===u&&a>0&&a--,n.which===d&&a<s.length-1&&a++,a<0&&(a=0),s[a].focus()}}},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(_.KEYDOWN_DATA_API,p.DATA_TOGGLE,m._dataApiKeydownHandler).on(_.KEYDOWN_DATA_API,p.ROLE_MENU,m._dataApiKeydownHandler).on(_.KEYDOWN_DATA_API,p.ROLE_LISTBOX,m._dataApiKeydownHandler).on(_.CLICK_DATA_API+" "+_.FOCUSIN_DATA_API,m._clearMenus).on(_.CLICK_DATA_API,p.DATA_TOGGLE,m.prototype.toggle).on(_.CLICK_DATA_API,p.FORM_CHILD,function(t){t.stopPropagation()}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=h,m._jQueryInterface},m}(jQuery),function(t){var e="modal",s="4.0.0-alpha.6",a="bs.modal",l="."+a,h=".data-api",c=t.fn[e],u=300,d=150,f=27,_={backdrop:!0,keyboard:!0,focus:!0,show:!0},g={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},p={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,FOCUSIN:"focusin"+l,RESIZE:"resize"+l,CLICK_DISMISS:"click.dismiss"+l,KEYDOWN_DISMISS:"keydown.dismiss"+l,MOUSEUP_DISMISS:"mouseup.dismiss"+l,MOUSEDOWN_DISMISS:"mousedown.dismiss"+l,CLICK_DATA_API:"click"+l+h},m={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},E={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top"},v=function(){function h(e,i){n(this,h),this._config=this._getConfig(i),this._element=e,this._dialog=t(e).find(E.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return h.prototype.toggle=function(t){return this._isShown?this.hide():this.show(t)},h.prototype.show=function(e){var n=this;if(this._isTransitioning)throw new Error("Modal is transitioning");r.supportsTransitionEnd()&&t(this._element).hasClass(m.FADE)&&(this._isTransitioning=!0);var i=t.Event(p.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),t(document.body).addClass(m.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(p.CLICK_DISMISS,E.DATA_DISMISS,function(t){return n.hide(t)}),t(this._dialog).on(p.MOUSEDOWN_DISMISS,function(){t(n._element).one(p.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))},h.prototype.hide=function(e){var n=this;if(e&&e.preventDefault(),this._isTransitioning)throw new Error("Modal is transitioning");var i=r.supportsTransitionEnd()&&t(this._element).hasClass(m.FADE);i&&(this._isTransitioning=!0);var o=t.Event(p.HIDE);t(this._element).trigger(o),this._isShown&&!o.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),t(document).off(p.FOCUSIN),t(this._element).removeClass(m.SHOW),t(this._element).off(p.CLICK_DISMISS),t(this._dialog).off(p.MOUSEDOWN_DISMISS),i?t(this._element).one(r.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(u):this._hideModal())},h.prototype.dispose=function(){t.removeData(this._element,a),t(window,document,this._element,this._backdrop).off(l),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null},h.prototype._getConfig=function(n){return n=t.extend({},_,n),r.typeCheckConfig(e,n,g),n},h.prototype._showElement=function(e){var n=this,i=r.supportsTransitionEnd()&&t(this._element).hasClass(m.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&r.reflow(this._element),t(this._element).addClass(m.SHOW),this._config.focus&&this._enforceFocus();var o=t.Event(p.SHOWN,{relatedTarget:e}),s=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,t(n._element).trigger(o)};i?t(this._dialog).one(r.TRANSITION_END,s).emulateTransitionEnd(u):s()},h.prototype._enforceFocus=function(){var e=this;t(document).off(p.FOCUSIN).on(p.FOCUSIN,function(n){document===n.target||e._element===n.target||t(e._element).has(n.target).length||e._element.focus()})},h.prototype._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(p.KEYDOWN_DISMISS,function(t){t.which===f&&e.hide()}):this._isShown||t(this._element).off(p.KEYDOWN_DISMISS)},h.prototype._setResizeEvent=function(){var e=this;this._isShown?t(window).on(p.RESIZE,function(t){return e._handleUpdate(t)}):t(window).off(p.RESIZE)},h.prototype._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(m.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(p.HIDDEN)})},h.prototype._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},h.prototype._showBackdrop=function(e){var n=this,i=t(this._element).hasClass(m.FADE)?m.FADE:"";if(this._isShown&&this._config.backdrop){var o=r.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=m.BACKDROP,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(p.CLICK_DISMISS,function(t){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),o&&r.reflow(this._backdrop),t(this._backdrop).addClass(m.SHOW),!e)return;if(!o)return void e();t(this._backdrop).one(r.TRANSITION_END,e).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(m.SHOW);var s=function(){n._removeBackdrop(),e&&e()};r.supportsTransitionEnd()&&t(this._element).hasClass(m.FADE)?t(this._backdrop).one(r.TRANSITION_END,s).emulateTransitionEnd(d):s()}else e&&e()},h.prototype._handleUpdate=function(){this._adjustDialog()},h.prototype._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},h.prototype._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},h.prototype._checkScrollbar=function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},h.prototype._setScrollbar=function(){var e=parseInt(t(E.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=e+this._scrollbarWidth+"px")},h.prototype._resetScrollbar=function(){document.body.style.paddingRight=this._originalBodyPadding},h.prototype._getScrollbarWidth=function(){var t=document.createElement("div");t.className=m.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},h._jQueryInterface=function(e,n){return this.each(function(){var o=t(this).data(a),r=t.extend({},h.Default,t(this).data(),"object"===("undefined"==typeof e?"undefined":i(e))&&e);if(o||(o=new h(this,r),t(this).data(a,o)),"string"==typeof e){if(void 0===o[e])throw new Error('No method named "'+e+'"');o[e](n)}else r.show&&o.show(n)})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return _}}]),h}();return t(document).on(p.CLICK_DATA_API,E.DATA_TOGGLE,function(e){var n=this,i=void 0,o=r.getSelectorFromElement(this);o&&(i=t(o)[0]);var s=t(i).data(a)?"toggle":t.extend({},t(i).data(),t(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var l=t(i).one(p.SHOW,function(e){e.isDefaultPrevented()||l.one(p.HIDDEN,function(){t(n).is(":visible")&&n.focus()})});v._jQueryInterface.call(t(i),s,this)}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=c,v._jQueryInterface},v}(jQuery),function(t){var e="scrollspy",s="4.0.0-alpha.6",a="bs.scrollspy",l="."+a,h=".data-api",c=t.fn[e],u={offset:10,method:"auto",target:""},d={offset:"number",method:"string",target:"(string|element)"},f={ACTIVATE:"activate"+l,SCROLL:"scroll"+l,LOAD_DATA_API:"load"+l+h},_={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},g={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},p={OFFSET:"offset",POSITION:"position"},m=function(){function h(e,i){var o=this;n(this,h),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+g.NAV_LINKS+","+(this._config.target+" "+g.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(f.SCROLL,function(t){return o._process(t)}),this.refresh(),this._process()}return h.prototype.refresh=function(){var e=this,n=this._scrollElement!==this._scrollElement.window?p.POSITION:p.OFFSET,i="auto"===this._config.method?n:this._config.method,o=i===p.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var s=t.makeArray(t(this._selector));s.map(function(e){var n=void 0,s=r.getSelectorFromElement(e);return s&&(n=t(s)[0]),n&&(n.offsetWidth||n.offsetHeight)?[t(n)[i]().top+o,s]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},h.prototype.dispose=function(){t.removeData(this._element,a),t(this._scrollElement).off(l),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},h.prototype._getConfig=function(n){if(n=t.extend({},u,n),"string"!=typeof n.target){var i=t(n.target).attr("id");i||(i=r.getUID(e),t(n.target).attr("id",i)),n.target="#"+i}return r.typeCheckConfig(e,n,d),n},h.prototype._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},h.prototype._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h.prototype._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.offsetHeight},h.prototype._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];return void(this._activeTarget!==i&&this._activate(i))}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){var r=this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1]);r&&this._activate(this._targets[o])}},h.prototype._activate=function(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+(t+'[href="'+e+'"]')});var i=t(n.join(","));i.hasClass(_.DROPDOWN_ITEM)?(i.closest(g.DROPDOWN).find(g.DROPDOWN_TOGGLE).addClass(_.ACTIVE),i.addClass(_.ACTIVE)):i.parents(g.LI).find("> "+g.NAV_LINKS).addClass(_.ACTIVE),t(this._scrollElement).trigger(f.ACTIVATE,{relatedTarget:e})},h.prototype._clear=function(){t(this._selector).filter(g.ACTIVE).removeClass(_.ACTIVE)},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===("undefined"==typeof e?"undefined":i(e))&&e;if(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return u}}]),h}();return t(window).on(f.LOAD_DATA_API,function(){for(var e=t.makeArray(t(g.DATA_SPY)),n=e.length;n--;){var i=t(e[n]);m._jQueryInterface.call(i,i.data())}}),t.fn[e]=m._jQueryInterface,t.fn[e].Constructor=m,t.fn[e].noConflict=function(){return t.fn[e]=c,m._jQueryInterface},m}(jQuery),function(t){var e="tab",i="4.0.0-alpha.6",s="bs.tab",a="."+s,l=".data-api",h=t.fn[e],c=150,u={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK_DATA_API:"click"+a+l},d={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},f={A:"a",LI:"li",DROPDOWN:".dropdown",LIST:"ul:not(.dropdown-menu), ol:not(.dropdown-menu), nav:not(.dropdown-menu)",FADE_CHILD:"> .nav-item .fade, > .fade",ACTIVE:".active",ACTIVE_CHILD:"> .nav-item > .active, > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},_=function(){function e(t){n(this,e),this._element=t}return e.prototype.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(d.ACTIVE)||t(this._element).hasClass(d.DISABLED))){var n=void 0,i=void 0,o=t(this._element).closest(f.LIST)[0],s=r.getSelectorFromElement(this._element);o&&(i=t.makeArray(t(o).find(f.ACTIVE)),i=i[i.length-1]);var a=t.Event(u.HIDE,{relatedTarget:this._element}),l=t.Event(u.SHOW,{relatedTarget:i});if(i&&t(i).trigger(a),t(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){s&&(n=t(s)[0]),this._activate(this._element,o);var h=function(){var n=t.Event(u.HIDDEN,{relatedTarget:e._element}),o=t.Event(u.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(o)};n?this._activate(n,n.parentNode,h):h()}}},e.prototype.dispose=function(){t.removeClass(this._element,s),this._element=null},e.prototype._activate=function(e,n,i){var o=this,s=t(n).find(f.ACTIVE_CHILD)[0],a=i&&r.supportsTransitionEnd()&&(s&&t(s).hasClass(d.FADE)||Boolean(t(n).find(f.FADE_CHILD)[0])),l=function(){return o._transitionComplete(e,s,a,i)};s&&a?t(s).one(r.TRANSITION_END,l).emulateTransitionEnd(c):l(),s&&t(s).removeClass(d.SHOW)},e.prototype._transitionComplete=function(e,n,i,o){if(n){t(n).removeClass(d.ACTIVE);var s=t(n.parentNode).find(f.DROPDOWN_ACTIVE_CHILD)[0];s&&t(s).removeClass(d.ACTIVE),n.setAttribute("aria-expanded",!1)}if(t(e).addClass(d.ACTIVE),e.setAttribute("aria-expanded",!0),i?(r.reflow(e),t(e).addClass(d.SHOW)):t(e).removeClass(d.FADE),e.parentNode&&t(e.parentNode).hasClass(d.DROPDOWN_MENU)){var a=t(e).closest(f.DROPDOWN)[0];a&&t(a).find(f.DROPDOWN_TOGGLE).addClass(d.ACTIVE),e.setAttribute("aria-expanded",!0)}o&&o()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);if(o||(o=new e(this),i.data(s,o)),"string"==typeof n){if(void 0===o[n])throw new Error('No method named "'+n+'"');o[n]()}})},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();return t(document).on(u.CLICK_DATA_API,f.DATA_TOGGLE,function(e){e.preventDefault(),_._jQueryInterface.call(t(this),"show")}),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=h,_._jQueryInterface},_}(jQuery),function(t){if("undefined"==typeof Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var e="tooltip",s="4.0.0-alpha.6",a="bs.tooltip",l="."+a,h=t.fn[e],c=150,u="bs-tether",d={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[],container:!1},f={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array",container:"(string|element|boolean)"},_={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},g={SHOW:"show",OUT:"out"},p={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,INSERTED:"inserted"+l,CLICK:"click"+l,FOCUSIN:"focusin"+l,FOCUSOUT:"focusout"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l},m={FADE:"fade",SHOW:"show"},E={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},v={element:!1,enabled:!1},T={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},I=function(){function h(t,e){n(this,h),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._isTransitioning=!1,this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return h.prototype.enable=function(){this._isEnabled=!0},h.prototype.disable=function(){this._isEnabled=!1},h.prototype.toggleEnabled=function(){this._isEnabled=!this._isEnabled},h.prototype.toggle=function(e){if(e){var n=this.constructor.DATA_KEY,i=t(e.currentTarget).data(n);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(t(this.getTipElement()).hasClass(m.SHOW))return void this._leave(null,this);this._enter(null,this)}},h.prototype.dispose=function(){clearTimeout(this._timeout),this.cleanupTether(),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null},h.prototype.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var n=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){if(this._isTransitioning)throw new Error("Tooltip is transitioning");t(this.element).trigger(n);var i=t.contains(this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!i)return;var o=this.getTipElement(),s=r.getUID(this.constructor.NAME);o.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&t(o).addClass(m.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,l=this._getAttachment(a),c=this.config.container===!1?document.body:t(this.config.container);t(o).data(this.constructor.DATA_KEY,this).appendTo(c),t(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:l,element:o,target:this.element,classes:v,classPrefix:u,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),r.reflow(o),this._tether.position(),t(o).addClass(m.SHOW);var d=function(){var n=e._hoverState;e._hoverState=null,e._isTransitioning=!1,t(e.element).trigger(e.constructor.Event.SHOWN),n===g.OUT&&e._leave(null,e)};if(r.supportsTransitionEnd()&&t(this.tip).hasClass(m.FADE))return this._isTransitioning=!0,void t(this.tip).one(r.TRANSITION_END,d).emulateTransitionEnd(h._TRANSITION_DURATION);d()}},h.prototype.hide=function(e){var n=this,i=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE);if(this._isTransitioning)throw new Error("Tooltip is transitioning");var s=function(){n._hoverState!==g.SHOW&&i.parentNode&&i.parentNode.removeChild(i),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),n._isTransitioning=!1,n.cleanupTether(),e&&e()};t(this.element).trigger(o),o.isDefaultPrevented()||(t(i).removeClass(m.SHOW),this._activeTrigger[T.CLICK]=!1,this._activeTrigger[T.FOCUS]=!1,this._activeTrigger[T.HOVER]=!1,r.supportsTransitionEnd()&&t(this.tip).hasClass(m.FADE)?(this._isTransitioning=!0,t(i).one(r.TRANSITION_END,s).emulateTransitionEnd(c)):s(),this._hoverState="")},h.prototype.isWithContent=function(){return Boolean(this.getTitle())},h.prototype.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0]},h.prototype.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(E.TOOLTIP_INNER),this.getTitle()),e.removeClass(m.FADE+" "+m.SHOW),this.cleanupTether()},h.prototype.setElementContent=function(e,n){var o=this.config.html;"object"===("undefined"==typeof n?"undefined":i(n))&&(n.nodeType||n.jquery)?o?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[o?"html":"text"](n)},h.prototype.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},h.prototype.cleanupTether=function(){this._tether&&this._tether.destroy()},h.prototype._getAttachment=function(t){return _[t.toUpperCase()]},h.prototype._setListeners=function(){var e=this,n=this.config.trigger.split(" ");n.forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(n!==T.MANUAL){var i=n===T.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,o=n===T.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(i,e.config.selector,function(t){return e._enter(t)}).on(o,e.config.selector,function(t){return e._leave(t)})}t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},h.prototype._fixTitle=function(){var t=i(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},h.prototype._enter=function(e,n){var i=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?T.FOCUS:T.HOVER]=!0),t(n.getTipElement()).hasClass(m.SHOW)||n._hoverState===g.SHOW?void(n._hoverState=g.SHOW):(clearTimeout(n._timeout),n._hoverState=g.SHOW,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===g.SHOW&&n.show()},n.config.delay.show)):void n.show())},h.prototype._leave=function(e,n){var i=this.constructor.DATA_KEY;if(n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?T.FOCUS:T.HOVER]=!1),!n._isWithActiveTrigger())return clearTimeout(n._timeout),n._hoverState=g.OUT,n.config.delay&&n.config.delay.hide?void(n._timeout=setTimeout(function(){n._hoverState===g.OUT&&n.hide()},n.config.delay.hide)):void n.hide()},h.prototype._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},h.prototype._getConfig=function(n){return n=t.extend({},this.constructor.Default,t(this.element).data(),n),n.delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),r.typeCheckConfig(e,n,this.constructor.DefaultType),n},h.prototype._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===("undefined"==typeof e?"undefined":i(e))&&e;if((n||!/dispose|hide/.test(e))&&(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e)){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return a}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return l}},{key:"DefaultType",get:function(){return f}}]),h}();return t.fn[e]=I._jQueryInterface,t.fn[e].Constructor=I,t.fn[e].noConflict=function(){return t.fn[e]=h,I._jQueryInterface},I}(jQuery));(function(r){var a="popover",l="4.0.0-alpha.6",h="bs.popover",c="."+h,u=r.fn[a],d=r.extend({},s.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),f=r.extend({},s.DefaultType,{content:"(string|element|function)"}),_={FADE:"fade",SHOW:"show"},g={TITLE:".popover-title",CONTENT:".popover-content"},p={HIDE:"hide"+c,HIDDEN:"hidden"+c,SHOW:"show"+c,SHOWN:"shown"+c,INSERTED:"inserted"+c,CLICK:"click"+c,FOCUSIN:"focusin"+c,FOCUSOUT:"focusout"+c,MOUSEENTER:"mouseenter"+c,MOUSELEAVE:"mouseleave"+c},m=function(s){function u(){return n(this,u),t(this,s.apply(this,arguments))}return e(u,s),u.prototype.isWithContent=function(){return this.getTitle()||this._getContent()},u.prototype.getTipElement=function(){return this.tip=this.tip||r(this.config.template)[0]},u.prototype.setContent=function(){var t=r(this.getTipElement());this.setElementContent(t.find(g.TITLE),this.getTitle()),this.setElementContent(t.find(g.CONTENT),this._getContent()),t.removeClass(_.FADE+" "+_.SHOW),this.cleanupTether()},u.prototype._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},u._jQueryInterface=function(t){return this.each(function(){var e=r(this).data(h),n="object"===("undefined"==typeof t?"undefined":i(t))?t:null;if((e||!/destroy|hide/.test(t))&&(e||(e=new u(this,n),r(this).data(h,e)),"string"==typeof t)){if(void 0===e[t])throw new Error('No method named "'+t+'"');e[t]()}})},o(u,null,[{key:"VERSION",get:function(){return l}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return a}},{key:"DATA_KEY",get:function(){return h}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return c}},{key:"DefaultType",get:function(){return f}}]),u}(s);return r.fn[a]=m._jQueryInterface,r.fn[a].Constructor=m,r.fn[a].noConflict=function(){return r.fn[a]=u,m._jQueryInterface},m})(jQuery)}();
(function(window,document,undefined){'use strict';function minErr(module,ErrorConstructor){ErrorConstructor=ErrorConstructor||Error;return function(){var code=arguments[0],prefix='['+(module?module+':':'')+code+'] ',template=arguments[1],templateArgs=arguments,message,i;message=prefix+template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1),arg;if(index+2<templateArgs.length){return toDebugString(templateArgs[index+2]);}
return match;});message=message+'\nhttp://errors.angularjs.org/1.3.15/'+
(module?module+'/':'')+code;for(i=2;i<arguments.length;i++){message=message+(i==2?'?':'&')+'p'+(i-2)+'='+
encodeURIComponent(toDebugString(arguments[i]));}
return new ErrorConstructor(message);};}
var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/;var VALIDITY_STATE_PROPERTY='validity';var lowercase=function(string){return isString(string)?string.toLowerCase():string;};var hasOwnProperty=Object.prototype.hasOwnProperty;var uppercase=function(string){return isString(string)?string.toUpperCase():string;};var manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)|32);}):s;};var manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)&~32);}):s;};if('i'!=='I'.toLowerCase()){lowercase=manualLowercase;uppercase=manualUppercase;}
var
msie,jqLite,jQuery,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr('ng'),angular=window.angular||(window.angular={}),angularModule,uid=0;msie=document.documentMode;function isArrayLike(obj){if(obj==null||isWindow(obj)){return false;}
var length=obj.length;if(obj.nodeType===NODE_TYPE_ELEMENT&&length){return true;}
return isString(obj)||isArray(obj)||length===0||typeof length==='number'&&length>0&&(length-1)in obj;}
function forEach(obj,iterator,context){var key,length;if(obj){if(isFunction(obj)){for(key in obj){if(key!='prototype'&&key!='length'&&key!='name'&&(!obj.hasOwnProperty||obj.hasOwnProperty(key))){iterator.call(context,obj[key],key,obj);}}}else if(isArray(obj)||isArrayLike(obj)){var isPrimitive=typeof obj!=='object';for(key=0,length=obj.length;key<length;key++){if(isPrimitive||key in obj){iterator.call(context,obj[key],key,obj);}}}else if(obj.forEach&&obj.forEach!==forEach){obj.forEach(iterator,context,obj);}else{for(key in obj){if(obj.hasOwnProperty(key)){iterator.call(context,obj[key],key,obj);}}}}
return obj;}
function sortedKeys(obj){return Object.keys(obj).sort();}
function forEachSorted(obj,iterator,context){var keys=sortedKeys(obj);for(var i=0;i<keys.length;i++){iterator.call(context,obj[keys[i]],keys[i]);}
return keys;}
function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value);};}
function nextUid(){return++uid;}
function setHashKey(obj,h){if(h){obj.$$hashKey=h;}else{delete obj.$$hashKey;}}
function extend(dst){var h=dst.$$hashKey;for(var i=1,ii=arguments.length;i<ii;i++){var obj=arguments[i];if(obj){var keys=Object.keys(obj);for(var j=0,jj=keys.length;j<jj;j++){var key=keys[j];dst[key]=obj[key];}}}
setHashKey(dst,h);return dst;}
function int(str){return parseInt(str,10);}
function inherit(parent,extra){return extend(Object.create(parent),extra);}
function noop(){}
noop.$inject=[];function identity($){return $;}
identity.$inject=[];function valueFn(value){return function(){return value;};}
function isUndefined(value){return typeof value==='undefined';}
function isDefined(value){return typeof value!=='undefined';}
function isObject(value){return value!==null&&typeof value==='object';}
function isString(value){return typeof value==='string';}
function isNumber(value){return typeof value==='number';}
function isDate(value){return toString.call(value)==='[object Date]';}
var isArray=Array.isArray;function isFunction(value){return typeof value==='function';}
function isRegExp(value){return toString.call(value)==='[object RegExp]';}
function isWindow(obj){return obj&&obj.window===obj;}
function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch;}
function isFile(obj){return toString.call(obj)==='[object File]';}
function isFormData(obj){return toString.call(obj)==='[object FormData]';}
function isBlob(obj){return toString.call(obj)==='[object Blob]';}
function isBoolean(value){return typeof value==='boolean';}
function isPromiseLike(obj){return obj&&isFunction(obj.then);}
var trim=function(value){return isString(value)?value.trim():value;};var escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,'\\$1').replace(/\x08/g,'\\x08');};function isElement(node){return!!(node&&(node.nodeName||(node.prop&&node.attr&&node.find)));}
function makeMap(str){var obj={},items=str.split(","),i;for(i=0;i<items.length;i++)
obj[items[i]]=true;return obj;}
function nodeName_(element){return lowercase(element.nodeName||(element[0]&&element[0].nodeName));}
function includes(array,obj){return Array.prototype.indexOf.call(array,obj)!=-1;}
function arrayRemove(array,value){var index=array.indexOf(value);if(index>=0)
array.splice(index,1);return value;}
function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source)){throw ngMinErr('cpws',"Can't copy! Making copies of Window or Scope instances is not supported.");}
if(!destination){destination=source;if(source){if(isArray(source)){destination=copy(source,[],stackSource,stackDest);}else if(isDate(source)){destination=new Date(source.getTime());}else if(isRegExp(source)){destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]);destination.lastIndex=source.lastIndex;}else if(isObject(source)){var emptyObject=Object.create(Object.getPrototypeOf(source));destination=copy(source,emptyObject,stackSource,stackDest);}}}else{if(source===destination)throw ngMinErr('cpi',"Can't copy! Source and destination are identical.");stackSource=stackSource||[];stackDest=stackDest||[];if(isObject(source)){var index=stackSource.indexOf(source);if(index!==-1)return stackDest[index];stackSource.push(source);stackDest.push(destination);}
var result;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++){result=copy(source[i],null,stackSource,stackDest);if(isObject(source[i])){stackSource.push(source[i]);stackDest.push(result);}
destination.push(result);}}else{var h=destination.$$hashKey;if(isArray(destination)){destination.length=0;}else{forEach(destination,function(value,key){delete destination[key];});}
for(var key in source){if(source.hasOwnProperty(key)){result=copy(source[key],null,stackSource,stackDest);if(isObject(source[key])){stackSource.push(source[key]);stackDest.push(result);}
destination[key]=result;}}
setHashKey(destination,h);}}
return destination;}
function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++){dst[i]=src[i];}}else if(isObject(src)){dst=dst||{};for(var key in src){if(!(key.charAt(0)==='$'&&key.charAt(1)==='$')){dst[key]=src[key];}}}
return dst||src;}
function equals(o1,o2){if(o1===o2)return true;if(o1===null||o2===null)return false;if(o1!==o1&&o2!==o2)return true;var t1=typeof o1,t2=typeof o2,length,key,keySet;if(t1==t2){if(t1=='object'){if(isArray(o1)){if(!isArray(o2))return false;if((length=o1.length)==o2.length){for(key=0;key<length;key++){if(!equals(o1[key],o2[key]))return false;}
return true;}}else if(isDate(o1)){if(!isDate(o2))return false;return equals(o1.getTime(),o2.getTime());}else if(isRegExp(o1)){return isRegExp(o2)?o1.toString()==o2.toString():false;}else{if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return false;keySet={};for(key in o1){if(key.charAt(0)==='$'||isFunction(o1[key]))continue;if(!equals(o1[key],o2[key]))return false;keySet[key]=true;}
for(key in o2){if(!keySet.hasOwnProperty(key)&&key.charAt(0)!=='$'&&o2[key]!==undefined&&!isFunction(o2[key]))return false;}
return true;}}}
return false;}
var csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!!(document.querySelector('[ng-csp]')||document.querySelector('[data-ng-csp]'));if(!active){try{new Function('');}catch(e){active=true;}}
return(csp.isActive_=active);};function concat(array1,array2,index){return array1.concat(slice.call(array2,index));}
function sliceArgs(args,startIndex){return slice.call(args,startIndex||0);}
function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];if(isFunction(fn)&&!(fn instanceof RegExp)){return curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs);}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self);};}else{return fn;}}
function toJsonReplacer(key,value){var val=value;if(typeof key==='string'&&key.charAt(0)==='$'&&key.charAt(1)==='$'){val=undefined;}else if(isWindow(value)){val='$WINDOW';}else if(value&&document===value){val='$DOCUMENT';}else if(isScope(value)){val='$SCOPE';}
return val;}
function toJson(obj,pretty){if(typeof obj==='undefined')return undefined;if(!isNumber(pretty)){pretty=pretty?2:null;}
return JSON.stringify(obj,toJsonReplacer,pretty);}
function fromJson(json){return isString(json)?JSON.parse(json):json;}
function startingTag(element){element=jqLite(element).clone();try{element.empty();}catch(e){}
var elemHtml=jqLite('<div>').append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return'<'+lowercase(nodeName);});}catch(e){return lowercase(elemHtml);}}
function tryDecodeURIComponent(value){try{return decodeURIComponent(value);}catch(e){}}
function parseKeyValue(keyValue){var obj={},key_value,key;forEach((keyValue||"").split('&'),function(keyValue){if(keyValue){key_value=keyValue.replace(/\+/g,'%20').split('=');key=tryDecodeURIComponent(key_value[0]);if(isDefined(key)){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):true;if(!hasOwnProperty.call(obj,key)){obj[key]=val;}else if(isArray(obj[key])){obj[key].push(val);}else{obj[key]=[obj[key],val];}}}});return obj;}
function toKeyValue(obj){var parts=[];forEach(obj,function(value,key){if(isArray(value)){forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,true)+
(arrayValue===true?'':'='+encodeUriQuery(arrayValue,true)));});}else{parts.push(encodeUriQuery(key,true)+
(value===true?'':'='+encodeUriQuery(value,true)));}});return parts.length?parts.join('&'):'';}
function encodeUriSegment(val){return encodeUriQuery(val,true).replace(/%26/gi,'&').replace(/%3D/gi,'=').replace(/%2B/gi,'+');}
function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%3B/gi,';').replace(/%20/g,(pctEncodeSpaces?'%20':'+'));}
var ngAttrPrefixes=['ng-','data-ng-','ng:','x-ng-'];function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;element=jqLite(element);for(i=0;i<ii;++i){attr=ngAttrPrefixes[i]+ngAttr;if(isString(attr=element.attr(attr))){return attr;}}
return null;}
function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+'app';if(!appElement&&element.hasAttribute&&element.hasAttribute(name)){appElement=element;module=element.getAttribute(name);}});forEach(ngAttrPrefixes,function(prefix){var name=prefix+'app';var candidate;if(!appElement&&(candidate=element.querySelector('['+name.replace(':','\\:')+']'))){appElement=candidate;module=candidate.getAttribute(name);}});if(appElement){config.strictDi=getNgAttribute(appElement,"strict-di")!==null;bootstrap(appElement,module?[module]:[],config);}}
function bootstrap(element,modules,config){if(!isObject(config))config={};var defaultConfig={strictDi:false};config=extend(defaultConfig,config);var doBootstrap=function(){element=jqLite(element);if(element.injector()){var tag=(element[0]===document)?'document':startingTag(element);throw ngMinErr('btstrpd',"App Already Bootstrapped with this Element '{0}'",tag.replace(/</,'&lt;').replace(/>/,'&gt;'));}
modules=modules||[];modules.unshift(['$provide',function($provide){$provide.value('$rootElement',element);}]);if(config.debugInfoEnabled){modules.push(['$compileProvider',function($compileProvider){$compileProvider.debugInfoEnabled(true);}]);}
modules.unshift('ng');var injector=createInjector(modules,config.strictDi);injector.invoke(['$rootScope','$rootElement','$compile','$injector',function bootstrapApply(scope,element,compile,injector){scope.$apply(function(){element.data('$injector',injector);compile(element)(scope);});}]);return injector;};var NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/;var NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)){config.debugInfoEnabled=true;window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,'');}
if(window&&!NG_DEFER_BOOTSTRAP.test(window.name)){return doBootstrap();}
window.name=window.name.replace(NG_DEFER_BOOTSTRAP,'');angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module);});return doBootstrap();};if(isFunction(angular.resumeDeferredBootstrap)){angular.resumeDeferredBootstrap();}}
function reloadWithDebugInfo(){window.name='NG_ENABLE_DEBUG_INFO!'+window.name;window.location.reload();}
function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector){throw ngMinErr('test','no injector found for element argument to getTestability');}
return injector.get('$$testability');}
var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){separator=separator||'_';return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:'')+letter.toLowerCase();});}
var bindJQueryFired=false;var skipDestroyOnNextJQueryCleanData;function bindJQuery(){var originalCleanData;if(bindJQueryFired){return;}
jQuery=window.jQuery;if(jQuery&&jQuery.fn.on){jqLite=jQuery;extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData});originalCleanData=jQuery.cleanData;jQuery.cleanData=function(elems){var events;if(!skipDestroyOnNextJQueryCleanData){for(var i=0,elem;(elem=elems[i])!=null;i++){events=jQuery._data(elem,"events");if(events&&events.$destroy){jQuery(elem).triggerHandler('$destroy');}}}else{skipDestroyOnNextJQueryCleanData=false;}
originalCleanData(elems);};}else{jqLite=JQLite;}
angular.element=jqLite;bindJQueryFired=true;}
function assertArg(arg,name,reason){if(!arg){throw ngMinErr('areq',"Argument '{0}' is {1}",(name||'?'),(reason||"required"));}
return arg;}
function assertArgFn(arg,name,acceptArrayAnnotation){if(acceptArrayAnnotation&&isArray(arg)){arg=arg[arg.length-1];}
assertArg(isFunction(arg),name,'not a function, got '+
(arg&&typeof arg==='object'?arg.constructor.name||'Object':typeof arg));return arg;}
function assertNotHasOwnProperty(name,context){if(name==='hasOwnProperty'){throw ngMinErr('badname',"hasOwnProperty is not a valid {0} name",context);}}
function getter(obj,path,bindFnToScope){if(!path)return obj;var keys=path.split('.');var key;var lastInstance=obj;var len=keys.length;for(var i=0;i<len;i++){key=keys[i];if(obj){obj=(lastInstance=obj)[key];}}
if(!bindFnToScope&&isFunction(obj)){return bind(lastInstance,obj);}
return obj;}
function getBlockNodes(nodes){var node=nodes[0];var endNode=nodes[nodes.length-1];var blockNodes=[node];do{node=node.nextSibling;if(!node)break;blockNodes.push(node);}while(node!==endNode);return jqLite(blockNodes);}
function createMap(){return Object.create(null);}
var NODE_TYPE_ELEMENT=1;var NODE_TYPE_TEXT=3;var NODE_TYPE_COMMENT=8;var NODE_TYPE_DOCUMENT=9;var NODE_TYPE_DOCUMENT_FRAGMENT=11;function setupModuleLoader(window){var $injectorMinErr=minErr('$injector');var ngMinErr=minErr('ng');function ensure(obj,name,factory){return obj[name]||(obj[name]=factory());}
var angular=ensure(window,'angular',Object);angular.$$minErr=angular.$$minErr||minErr;return ensure(angular,'module',function(){var modules={};return function module(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if(name==='hasOwnProperty'){throw ngMinErr('badname','hasOwnProperty is not a valid {0} name',context);}};assertNotHasOwnProperty(name,'module');if(requires&&modules.hasOwnProperty(name)){modules[name]=null;}
return ensure(modules,name,function(){if(!requires){throw $injectorMinErr('nomod',"Module '{0}' is not available! You either misspelled "+"the module name or forgot to load it. If registering a module ensure that you "+"specify the dependencies as the second argument.",name);}
var invokeQueue=[];var configBlocks=[];var runBlocks=[];var config=invokeLater('$injector','invoke','push',configBlocks);var moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater('$provide','provider'),factory:invokeLater('$provide','factory'),service:invokeLater('$provide','service'),value:invokeLater('$provide','value'),constant:invokeLater('$provide','constant','unshift'),animation:invokeLater('$animateProvider','register'),filter:invokeLater('$filterProvider','register'),controller:invokeLater('$controllerProvider','register'),directive:invokeLater('$compileProvider','directive'),config:config,run:function(block){runBlocks.push(block);return this;}};if(configFn){config(configFn);}
return moduleInstance;function invokeLater(provider,method,insertMethod,queue){if(!queue)queue=invokeQueue;return function(){queue[insertMethod||'push']([provider,method,arguments]);return moduleInstance;};}});};});}
function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){val=toJsonReplacer(key,val);if(isObject(val)){if(seen.indexOf(val)>=0)return'<<already seen>>';seen.push(val);}
return val;});}
function toDebugString(obj){if(typeof obj==='function'){return obj.toString().replace(/ \{[\s\S]*$/,'');}else if(typeof obj==='undefined'){return'undefined';}else if(typeof obj!=='string'){return serializeObject(obj);}
return obj;}
var version={full:'1.3.15',major:1,minor:3,dot:15,codeName:'locality-filtration'};function publishExternalAPI(angular){extend(angular,{'bootstrap':bootstrap,'copy':copy,'extend':extend,'equals':equals,'element':jqLite,'forEach':forEach,'injector':createInjector,'noop':noop,'bind':bind,'toJson':toJson,'fromJson':fromJson,'identity':identity,'isUndefined':isUndefined,'isDefined':isDefined,'isString':isString,'isFunction':isFunction,'isObject':isObject,'isNumber':isNumber,'isElement':isElement,'isArray':isArray,'version':version,'isDate':isDate,'lowercase':lowercase,'uppercase':uppercase,'callbacks':{counter:0},'getTestability':getTestability,'$$minErr':minErr,'$$csp':csp,'reloadWithDebugInfo':reloadWithDebugInfo});angularModule=setupModuleLoader(window);try{angularModule('ngLocale');}catch(e){angularModule('ngLocale',[]).provider('$locale',$LocaleProvider);}
angularModule('ng',['ngLocale'],['$provide',function ngModule($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider});$provide.provider('$compile',$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives);$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider,$$jqLite:$$jqLiteProvider});}]);}
JQLite.expando='ng339';var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,false);},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,false);};JQLite._data=function(node){return this.cache[node[this.expando]]||{};};function jqNextId(){return++jqId;}
var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g;var MOZ_HACK_REGEXP=/^moz([A-Z])/;var MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"};var jqLiteMinErr=minErr('jqLite');function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter;}).replace(MOZ_HACK_REGEXP,'Moz$1');}
var SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var HTML_REGEXP=/<|&#?\w+;/;var TAG_NAME_REGEXP=/<([\w:]+)/;var XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;var wrapMap={'option':[1,'<select multiple="multiple">','</select>'],'thead':[1,'<table>','</table>'],'col':[2,'<table><colgroup>','</colgroup></table>'],'tr':[2,'<table><tbody>','</tbody></table>'],'td':[3,'<table><tbody><tr>','</tr></tbody></table>'],'_default':[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html);}
function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT;}
function jqLiteBuildFragment(html,context){var tmp,tag,wrap,fragment=context.createDocumentFragment(),nodes=[],i;if(jqLiteIsTextNode(html)){nodes.push(context.createTextNode(html));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2];i=wrap[0];while(i--){tmp=tmp.lastChild;}
nodes=concat(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}
fragment.textContent="";fragment.innerHTML="";forEach(nodes,function(node){fragment.appendChild(node);});return fragment;}
function jqLiteParseHTML(html,context){context=context||document;var parsed;if((parsed=SINGLE_TAG_REGEXP.exec(html))){return[context.createElement(parsed[1])];}
if((parsed=jqLiteBuildFragment(html,context))){return parsed.childNodes;}
return[];}
function JQLite(element){if(element instanceof JQLite){return element;}
var argIsString;if(isString(element)){element=trim(element);argIsString=true;}
if(!(this instanceof JQLite)){if(argIsString&&element.charAt(0)!='<'){throw jqLiteMinErr('nosel','Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element');}
return new JQLite(element);}
if(argIsString){jqLiteAddNodes(this,jqLiteParseHTML(element));}else{jqLiteAddNodes(this,element);}}
function jqLiteClone(element){return element.cloneNode(true);}
function jqLiteDealoc(element,onlyDescendants){if(!onlyDescendants)jqLiteRemoveData(element);if(element.querySelectorAll){var descendants=element.querySelectorAll('*');for(var i=0,l=descendants.length;i<l;i++){jqLiteRemoveData(descendants[i]);}}}
function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr('offargs','jqLite#off() does not support the `selector` argument');var expandoStore=jqLiteExpandoStore(element);var events=expandoStore&&expandoStore.events;var handle=expandoStore&&expandoStore.handle;if(!handle)return;if(!type){for(type in events){if(type!=='$destroy'){removeEventListenerFn(element,type,handle);}
delete events[type];}}else{forEach(type.split(' '),function(type){if(isDefined(fn)){var listenerFns=events[type];arrayRemove(listenerFns||[],fn);if(listenerFns&&listenerFns.length>0){return;}}
removeEventListenerFn(element,type,handle);delete events[type];});}}
function jqLiteRemoveData(element,name){var expandoId=element.ng339;var expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name){delete expandoStore.data[name];return;}
if(expandoStore.handle){if(expandoStore.events.$destroy){expandoStore.handle({},'$destroy');}
jqLiteOff(element);}
delete jqCache[expandoId];element.ng339=undefined;}}
function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(createIfNecessary&&!expandoStore){element.ng339=expandoId=jqNextId();expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined};}
return expandoStore;}
function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value);var isSimpleGetter=!isSimpleSetter&&key&&!isObject(key);var massGetter=!key;var expandoStore=jqLiteExpandoStore(element,!isSimpleGetter);var data=expandoStore&&expandoStore.data;if(isSimpleSetter){data[key]=value;}else{if(massGetter){return data;}else{if(isSimpleGetter){return data&&data[key];}else{extend(data,key);}}}}}
function jqLiteHasClass(element,selector){if(!element.getAttribute)return false;return((" "+(element.getAttribute('class')||'')+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1);}
function jqLiteRemoveClass(element,cssClasses){if(cssClasses&&element.setAttribute){forEach(cssClasses.split(' '),function(cssClass){element.setAttribute('class',trim((" "+(element.getAttribute('class')||'')+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")));});}}
function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(' '+(element.getAttribute('class')||'')+' ').replace(/[\n\t]/g," ");forEach(cssClasses.split(' '),function(cssClass){cssClass=trim(cssClass);if(existingClasses.indexOf(' '+cssClass+' ')===-1){existingClasses+=cssClass+' ';}});element.setAttribute('class',trim(existingClasses));}}
function jqLiteAddNodes(root,elements){if(elements){if(elements.nodeType){root[root.length++]=elements;}else{var length=elements.length;if(typeof length==='number'&&elements.window!==elements){if(length){for(var i=0;i<length;i++){root[root.length++]=elements[i];}}}else{root[root.length++]=elements;}}}}
function jqLiteController(element,name){return jqLiteInheritedData(element,'$'+(name||'ngController')+'Controller');}
function jqLiteInheritedData(element,name,value){if(element.nodeType==NODE_TYPE_DOCUMENT){element=element.documentElement;}
var names=isArray(name)?name:[name];while(element){for(var i=0,ii=names.length;i<ii;i++){if((value=jqLite.data(element,names[i]))!==undefined)return value;}
element=element.parentNode||(element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host);}}
function jqLiteEmpty(element){jqLiteDealoc(element,true);while(element.firstChild){element.removeChild(element.firstChild);}}
function jqLiteRemove(element,keepData){if(!keepData)jqLiteDealoc(element);var parent=element.parentNode;if(parent)parent.removeChild(element);}
function jqLiteDocumentLoaded(action,win){win=win||window;if(win.document.readyState==='complete'){win.setTimeout(action);}else{jqLite(win).on('load',action);}}
var JQLitePrototype=JQLite.prototype={ready:function(fn){var fired=false;function trigger(){if(fired)return;fired=true;fn();}
if(document.readyState==='complete'){setTimeout(trigger);}else{this.on('DOMContentLoaded',trigger);JQLite(window).on('load',trigger);}},toString:function(){var value=[];forEach(this,function(e){value.push(''+e);});return'['+value.join(', ')+']';},eq:function(index){return(index>=0)?jqLite(this[index]):jqLite(this[this.length+index]);},length:0,push:push,sort:[].sort,splice:[].splice};var BOOLEAN_ATTR={};forEach('multiple,selected,checked,disabled,readOnly,required,open'.split(','),function(value){BOOLEAN_ATTR[lowercase(value)]=value;});var BOOLEAN_ELEMENTS={};forEach('input,select,option,textarea,button,form,details'.split(','),function(value){BOOLEAN_ELEMENTS[value]=true;});var ALIASED_ATTR={'ngMinlength':'minlength','ngMaxlength':'maxlength','ngMin':'min','ngMax':'max','ngPattern':'pattern'};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr;}
function getAliasedAttrName(element,name){var nodeName=element.nodeName;return(nodeName==='INPUT'||nodeName==='TEXTAREA')&&ALIASED_ATTR[name];}
forEach({data:jqLiteData,removeData:jqLiteRemoveData},function(fn,name){JQLite[name]=fn;});forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,'$scope')||jqLiteInheritedData(element.parentNode||element,['$isolateScope','$scope']);},isolateScope:function(element){return jqLite.data(element,'$isolateScope')||jqLite.data(element,'$isolateScopeNoTemplate');},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,'$injector');},removeAttr:function(element,name){element.removeAttribute(name);},hasClass:jqLiteHasClass,css:function(element,name,value){name=camelCase(name);if(isDefined(value)){element.style[name]=value;}else{return element.style[name];}},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(isDefined(value)){if(!!value){element[name]=true;element.setAttribute(name,lowercasedName);}else{element[name]=false;element.removeAttribute(lowercasedName);}}else{return(element[name]||(element.attributes.getNamedItem(name)||noop).specified)?lowercasedName:undefined;}}else if(isDefined(value)){element.setAttribute(name,value);}else if(element.getAttribute){var ret=element.getAttribute(name,2);return ret===null?undefined:ret;}},prop:function(element,name,value){if(isDefined(value)){element[name]=value;}else{return element[name];}},text:(function(){getText.$dv='';return getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT)?element.textContent:'';}
element.textContent=value;}})(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&nodeName_(element)==='select'){var result=[];forEach(element.options,function(option){if(option.selected){result.push(option.value||option.text);}});return result.length===0?null:result;}
return element.value;}
element.value=value;},html:function(element,value){if(isUndefined(value)){return element.innerHTML;}
jqLiteDealoc(element,true);element.innerHTML=value;},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;var nodeCount=this.length;if(fn!==jqLiteEmpty&&(((fn.length==2&&(fn!==jqLiteHasClass&&fn!==jqLiteController))?arg1:arg2)===undefined)){if(isObject(arg1)){for(i=0;i<nodeCount;i++){if(fn===jqLiteData){fn(this[i],arg1);}else{for(key in arg1){fn(this[i],key,arg1[key]);}}}
return this;}else{var value=fn.$dv;var jj=(value===undefined)?Math.min(nodeCount,1):nodeCount;for(var j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue;}
return value;}}else{for(i=0;i<nodeCount;i++){fn(this[i],arg1,arg2);}
return this;}};});function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented;};var eventFns=events[type||event.type];var eventFnsLength=eventFns?eventFns.length:0;if(!eventFnsLength)return;if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=true;if(event.stopPropagation){event.stopPropagation();}
if(originalStopImmediatePropagation){originalStopImmediatePropagation.call(event);}};}
event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===true;};if((eventFnsLength>1)){eventFns=shallowCopy(eventFns);}
for(var i=0;i<eventFnsLength;i++){if(!event.isImmediatePropagationStopped()){eventFns[i].call(element,event);}}};eventHandler.elem=element;return eventHandler;}
forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr('onargs','jqLite#on() does not support the `selector` or `eventData` parameters');if(!jqLiteAcceptsData(element)){return;}
var expandoStore=jqLiteExpandoStore(element,true);var events=expandoStore.events;var handle=expandoStore.handle;if(!handle){handle=expandoStore.handle=createEventHandler(element,events);}
var types=type.indexOf(' ')>=0?type.split(' '):[type];var i=types.length;while(i--){type=types[i];var eventFns=events[type];if(!eventFns){events[type]=[];if(type==='mouseenter'||type==='mouseleave'){jqLiteOn(element,MOUSE_EVENT_MAP[type],function(event){var target=this,related=event.relatedTarget;if(!related||(related!==target&&!target.contains(related))){handle(event,type);}});}else{if(type!=='$destroy'){addEventListenerFn(element,type,handle);}}
eventFns=events[type];}
eventFns.push(fn);}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element);element.on(type,function onFn(){element.off(type,fn);element.off(type,onFn);});element.on(type,fn);},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element);forEach(new JQLite(replaceNode),function(node){if(index){parent.insertBefore(node,index.nextSibling);}else{parent.replaceChild(node,element);}
index=node;});},children:function(element){var children=[];forEach(element.childNodes,function(element){if(element.nodeType===NODE_TYPE_ELEMENT)
children.push(element);});return children;},contents:function(element){return element.contentDocument||element.childNodes||[];},append:function(element,node){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_ELEMENT&&nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT)return;node=new JQLite(node);for(var i=0,ii=node.length;i<ii;i++){var child=node[i];element.appendChild(child);}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index);});}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;if(parent){parent.replaceChild(wrapNode,element);}
wrapNode.appendChild(element);},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,true);},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling);index=node;}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){if(selector){forEach(selector.split(' '),function(className){var classCondition=condition;if(isUndefined(classCondition)){classCondition=!jqLiteHasClass(element,className);}
(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className);});}},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null;},next:function(element){return element.nextElementSibling;},find:function(element,selector){if(element.getElementsByTagName){return element.getElementsByTagName(selector);}else{return[];}},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs;var eventName=event.type||event;var expandoStore=jqLiteExpandoStore(element);var events=expandoStore&&expandoStore.events;var eventFns=events&&events[eventName];if(eventFns){dummyEvent={preventDefault:function(){this.defaultPrevented=true;},isDefaultPrevented:function(){return this.defaultPrevented===true;},stopImmediatePropagation:function(){this.immediatePropagationStopped=true;},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===true;},stopPropagation:noop,type:eventName,target:element};if(event.type){dummyEvent=extend(dummyEvent,event);}
eventFnsCopy=shallowCopy(eventFns);handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent];forEach(eventFnsCopy,function(fn){if(!dummyEvent.isImmediatePropagationStopped()){fn.apply(element,handlerArgs);}});}}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){var value;for(var i=0,ii=this.length;i<ii;i++){if(isUndefined(value)){value=fn(this[i],arg1,arg2,arg3);if(isDefined(value)){value=jqLite(value);}}else{jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));}}
return isDefined(value)?value:this;};JQLite.prototype.bind=JQLite.prototype.on;JQLite.prototype.unbind=JQLite.prototype.off;});function $$jqLiteProvider(){this.$get=function $$jqLite(){return extend(JQLite,{hasClass:function(node,classes){if(node.attr)node=node[0];return jqLiteHasClass(node,classes);},addClass:function(node,classes){if(node.attr)node=node[0];return jqLiteAddClass(node,classes);},removeClass:function(node,classes){if(node.attr)node=node[0];return jqLiteRemoveClass(node,classes);}});};}
function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key){if(typeof key==='function'){key=obj.$$hashKey();}
return key;}
var objType=typeof obj;if(objType=='function'||(objType=='object'&&obj!==null)){key=obj.$$hashKey=objType+':'+(nextUidFn||nextUid)();}else{key=objType+':'+obj;}
return key;}
function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid;};}
forEach(array,this.put,this);}
HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value;},get:function(key){return this[hashKey(key,this.nextUid)];},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];delete this[key];return value;}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m;var FN_ARG_SPLIT=/,/;var FN_ARG=/^\s*(_?)(\S+?)\1\s*$/;var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;var $injectorMinErr=minErr('$injector');function anonFn(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,''),args=fnText.match(FN_ARGS);if(args){return'function('+(args[1]||'').replace(/[\s\r\n]+/,' ')+')';}
return'fn';}
function annotate(fn,strictDi,name){var $inject,fnText,argDecl,last;if(typeof fn==='function'){if(!($inject=fn.$inject)){$inject=[];if(fn.length){if(strictDi){if(!isString(name)||!name){name=fn.name||anonFn(fn);}
throw $injectorMinErr('strictdi','{0} is not using explicit annotation and cannot be invoked in strict mode',name);}
fnText=fn.toString().replace(STRIP_COMMENTS,'');argDecl=fnText.match(FN_ARGS);forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name);});});}
fn.$inject=$inject;}}else if(isArray(fn)){last=fn.length-1;assertArgFn(fn[last],'fn');$inject=fn.slice(0,last);}else{assertArgFn(fn,'fn',true);}
return $inject;}
function createInjector(modulesToLoad,strictDi){strictDi=(strictDi===true);var INSTANTIATING={},providerSuffix='Provider',path=[],loadedModules=new HashMap([],true),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=(providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){if(angular.isString(caller)){path.push(caller);}
throw $injectorMinErr('unpr',"Unknown provider: {0}",path.join(' <- '));})),instanceCache={},instanceInjector=(instanceCache.$injector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName);}));forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop);});return instanceInjector;function supportObject(delegate){return function(key,value){if(isObject(key)){forEach(key,reverseParams(delegate));}else{return delegate(key,value);}};}
function provider(name,provider_){assertNotHasOwnProperty(name,'service');if(isFunction(provider_)||isArray(provider_)){provider_=providerInjector.instantiate(provider_);}
if(!provider_.$get){throw $injectorMinErr('pget',"Provider '{0}' must define $get factory method.",name);}
return providerCache[name+providerSuffix]=provider_;}
function enforceReturnValue(name,factory){return function enforcedReturnValue(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result)){throw $injectorMinErr('undef',"Provider '{0}' must return a value from $get factory method.",name);}
return result;};}
function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==false?enforceReturnValue(name,factoryFn):factoryFn});}
function service(name,constructor){return factory(name,['$injector',function($injector){return $injector.instantiate(constructor);}]);}
function value(name,val){return factory(name,valueFn(val),false);}
function constant(name,value){assertNotHasOwnProperty(name,'constant');providerCache[name]=value;instanceCache[name]=value;}
function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance});};}
function loadModules(modulesToLoad){var runBlocks=[],moduleFn;forEach(modulesToLoad,function(module){if(loadedModules.get(module))return;loadedModules.put(module,true);function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2]);}}
try{if(isString(module)){moduleFn=angularModule(module);runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks);runInvokeQueue(moduleFn._invokeQueue);runInvokeQueue(moduleFn._configBlocks);}else if(isFunction(module)){runBlocks.push(providerInjector.invoke(module));}else if(isArray(module)){runBlocks.push(providerInjector.invoke(module));}else{assertArgFn(module,'module');}}catch(e){if(isArray(module)){module=module[module.length-1];}
if(e.message&&e.stack&&e.stack.indexOf(e.message)==-1){e=e.message+'\n'+e.stack;}
throw $injectorMinErr('modulerr',"Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e);}});return runBlocks;}
function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING){throw $injectorMinErr('cdep','Circular dependency found: {0}',serviceName+' <- '+path.join(' <- '));}
return cache[serviceName];}else{try{path.unshift(serviceName);cache[serviceName]=INSTANTIATING;return cache[serviceName]=factory(serviceName,caller);}catch(err){if(cache[serviceName]===INSTANTIATING){delete cache[serviceName];}
throw err;}finally{path.shift();}}}
function invoke(fn,self,locals,serviceName){if(typeof locals==='string'){serviceName=locals;locals=null;}
var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),length,i,key;for(i=0,length=$inject.length;i<length;i++){key=$inject[i];if(typeof key!=='string'){throw $injectorMinErr('itkn','Incorrect injection token! Expected service name as string, got {0}',key);}
args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName));}
if(isArray(fn)){fn=fn[length];}
return fn.apply(self,args);}
function instantiate(Type,locals,serviceName){var instance=Object.create((isArray(Type)?Type[Type.length-1]:Type).prototype||null);var returnedValue=invoke(Type,instance,locals,serviceName);return isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance;}
return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name);}};}}
createInjector.$$annotate=annotate;function $AnchorScrollProvider(){var autoScrollingEnabled=true;this.disableAutoScrolling=function(){autoScrollingEnabled=false;};this.$get=['$window','$location','$rootScope',function($window,$location,$rootScope){var document=$window.document;function getFirstAnchor(list){var result=null;Array.prototype.some.call(list,function(element){if(nodeName_(element)==='a'){result=element;return true;}});return result;}
function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset)){offset=offset();}else if(isElement(offset)){var elem=offset[0];var style=$window.getComputedStyle(elem);if(style.position!=='fixed'){offset=0;}else{offset=elem.getBoundingClientRect().bottom;}}else if(!isNumber(offset)){offset=0;}
return offset;}
function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset);}}else{$window.scrollTo(0,0);}}
function scroll(){var hash=$location.hash(),elm;if(!hash)scrollTo(null);else if((elm=document.getElementById(hash)))scrollTo(elm);else if((elm=getFirstAnchor(document.getElementsByName(hash))))scrollTo(elm);else if(hash==='top')scrollTo(null);}
if(autoScrollingEnabled){$rootScope.$watch(function autoScrollWatch(){return $location.hash();},function autoScrollWatchAction(newVal,oldVal){if(newVal===oldVal&&newVal==='')return;jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll);});});}
return scroll;}];}
var $animateMinErr=minErr('$animate');var $AnimateProvider=['$provide',function($provide){this.$$selectors={};this.register=function(name,factory){var key=name+'-animation';if(name&&name.charAt(0)!='.')throw $animateMinErr('notcsel',"Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key;$provide.factory(key,factory);};this.classNameFilter=function(expression){if(arguments.length===1){this.$$classNameFilter=(expression instanceof RegExp)?expression:null;}
return this.$$classNameFilter;};this.$get=['$$q','$$asyncCallback','$rootScope',function($$q,$$asyncCallback,$rootScope){var currentDefer;function runAnimationPostDigest(fn){var cancelFn,defer=$$q.defer();defer.promise.$$cancelFn=function ngAnimateMaybeCancel(){cancelFn&&cancelFn();};$rootScope.$$postDigest(function ngAnimatePostDigest(){cancelFn=fn(function ngAnimateNotifyComplete(){defer.resolve();});});return defer.promise;}
function resolveElementClasses(element,classes){var toAdd=[],toRemove=[];var hasClasses=createMap();forEach((element.attr('class')||'').split(/\s+/),function(className){hasClasses[className]=true;});forEach(classes,function(status,className){var hasClass=hasClasses[className];if(status===false&&hasClass){toRemove.push(className);}else if(status===true&&!hasClass){toAdd.push(className);}});return(toAdd.length+toRemove.length)>0&&[toAdd.length?toAdd:null,toRemove.length?toRemove:null];}
function cachedClassManipulation(cache,classes,op){for(var i=0,ii=classes.length;i<ii;++i){var className=classes[i];cache[className]=op;}}
function asyncPromise(){if(!currentDefer){currentDefer=$$q.defer();$$asyncCallback(function(){currentDefer.resolve();currentDefer=null;});}
return currentDefer.promise;}
function applyStyles(element,options){if(angular.isObject(options)){var styles=extend(options.from||{},options.to||{});element.css(styles);}}
return{animate:function(element,from,to){applyStyles(element,{from:from,to:to});return asyncPromise();},enter:function(element,parent,after,options){applyStyles(element,options);after?after.after(element):parent.prepend(element);return asyncPromise();},leave:function(element,options){applyStyles(element,options);element.remove();return asyncPromise();},move:function(element,parent,after,options){return this.enter(element,parent,after,options);},addClass:function(element,className,options){return this.setClass(element,className,[],options);},$$addClassImmediately:function(element,className,options){element=jqLite(element);className=!isString(className)?(isArray(className)?className.join(' '):''):className;forEach(element,function(element){jqLiteAddClass(element,className);});applyStyles(element,options);return asyncPromise();},removeClass:function(element,className,options){return this.setClass(element,[],className,options);},$$removeClassImmediately:function(element,className,options){element=jqLite(element);className=!isString(className)?(isArray(className)?className.join(' '):''):className;forEach(element,function(element){jqLiteRemoveClass(element,className);});applyStyles(element,options);return asyncPromise();},setClass:function(element,add,remove,options){var self=this;var STORAGE_KEY='$$animateClasses';var createdCache=false;element=jqLite(element);var cache=element.data(STORAGE_KEY);if(!cache){cache={classes:{},options:options};createdCache=true;}else if(options&&cache.options){cache.options=angular.extend(cache.options||{},options);}
var classes=cache.classes;add=isArray(add)?add:add.split(' ');remove=isArray(remove)?remove:remove.split(' ');cachedClassManipulation(classes,add,true);cachedClassManipulation(classes,remove,false);if(createdCache){cache.promise=runAnimationPostDigest(function(done){var cache=element.data(STORAGE_KEY);element.removeData(STORAGE_KEY);if(cache){var classes=resolveElementClasses(element,cache.classes);if(classes){self.$$setClassImmediately(element,classes[0],classes[1],cache.options);}}
done();});element.data(STORAGE_KEY,cache);}
return cache.promise;},$$setClassImmediately:function(element,add,remove,options){add&&this.$$addClassImmediately(element,add);remove&&this.$$removeClassImmediately(element,remove);applyStyles(element,options);return asyncPromise();},enabled:noop,cancel:noop};}];}];function $$AsyncCallbackProvider(){this.$get=['$$rAF','$timeout',function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn);}:function(fn){return $timeout(fn,0,false);};}];}
function Browser(window,document,$log,$sniffer){var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=false;var outstandingRequestCount=0;var outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest;self.$$incOutstandingRequestCount=function(){outstandingRequestCount++;};function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1));}finally{outstandingRequestCount--;if(outstandingRequestCount===0){while(outstandingRequestCallbacks.length){try{outstandingRequestCallbacks.pop()();}catch(e){$log.error(e);}}}}}
function getHash(url){var index=url.indexOf('#');return index===-1?'':url.substr(index+1);}
self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn();});if(outstandingRequestCount===0){callback();}else{outstandingRequestCallbacks.push(callback);}};var pollFns=[],pollTimeout;self.addPollFn=function(fn){if(isUndefined(pollTimeout))startPoller(100,setTimeout);pollFns.push(fn);return fn;};function startPoller(interval,setTimeout){(function check(){forEach(pollFns,function(pollFn){pollFn();});pollTimeout=setTimeout(check,interval);})();}
var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find('base'),reloadLocation=null;cacheState();lastHistoryState=cachedState;self.url=function(url,replace,state){if(isUndefined(state)){state=null;}
if(location!==window.location)location=window.location;if(history!==window.history)history=window.history;if(url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState)){return self;}
var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);lastBrowserUrl=url;lastHistoryState=state;if($sniffer.history&&(!sameBase||!sameState)){history[replace?'replaceState':'pushState'](state,'',url);cacheState();lastHistoryState=cachedState;}else{if(!sameBase){reloadLocation=url;}
if(replace){location.replace(url);}else if(!sameBase){location.href=url;}else{location.hash=getHash(url);}}
return self;}else{return reloadLocation||location.href.replace(/%27/g,"'");}};self.state=function(){return cachedState;};var urlChangeListeners=[],urlChangeInit=false;function cacheStateAndFireUrlChange(){cacheState();fireUrlChange();}
function getCurrentState(){try{return history.state;}catch(e){}}
var lastCachedState=null;function cacheState(){cachedState=getCurrentState();cachedState=isUndefined(cachedState)?null:cachedState;if(equals(cachedState,lastCachedState)){cachedState=lastCachedState;}
lastCachedState=cachedState;}
function fireUrlChange(){if(lastBrowserUrl===self.url()&&lastHistoryState===cachedState){return;}
lastBrowserUrl=self.url();lastHistoryState=cachedState;forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState);});}
self.onUrlChange=function(callback){if(!urlChangeInit){if($sniffer.history)jqLite(window).on('popstate',cacheStateAndFireUrlChange);jqLite(window).on('hashchange',cacheStateAndFireUrlChange);urlChangeInit=true;}
urlChangeListeners.push(callback);return callback;};self.$$checkUrlChange=fireUrlChange;self.baseHref=function(){var href=baseElement.attr('href');return href?href.replace(/^(https?\:)?\/\/[^\/]*/,''):'';};var lastCookies={};var lastCookieString='';var cookiePath=self.baseHref();function safeDecodeURIComponent(str){try{return decodeURIComponent(str);}catch(e){return str;}}
self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(name){if(value===undefined){rawDocument.cookie=encodeURIComponent(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT";}else{if(isString(value)){cookieLength=(rawDocument.cookie=encodeURIComponent(name)+'='+encodeURIComponent(value)+';path='+cookiePath).length+1;if(cookieLength>4096){$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+
cookieLength+" > 4096 bytes)!");}}}}else{if(rawDocument.cookie!==lastCookieString){lastCookieString=rawDocument.cookie;cookieArray=lastCookieString.split("; ");lastCookies={};for(i=0;i<cookieArray.length;i++){cookie=cookieArray[i];index=cookie.indexOf('=');if(index>0){name=safeDecodeURIComponent(cookie.substring(0,index));if(lastCookies[name]===undefined){lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1));}}}}
return lastCookies;}};self.defer=function(fn,delay){var timeoutId;outstandingRequestCount++;timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId];completeOutstandingRequest(fn);},delay||0);pendingDeferIds[timeoutId]=true;return timeoutId;};self.defer.cancel=function(deferId){if(pendingDeferIds[deferId]){delete pendingDeferIds[deferId];clearTimeout(deferId);completeOutstandingRequest(noop);return true;}
return false;};}
function $BrowserProvider(){this.$get=['$window','$log','$sniffer','$document',function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer);}];}
function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches){throw minErr('$cacheFactory')('iid',"CacheId '{0}' is already taken!",cacheId);}
var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=(options&&options.capacity)||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry);}
if(isUndefined(value))return;if(!(key in data))size++;data[key]=value;if(size>capacity){this.remove(staleEnd.key);}
return value;},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry);}
return data[key];},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;if(lruEntry==freshEnd)freshEnd=lruEntry.p;if(lruEntry==staleEnd)staleEnd=lruEntry.n;link(lruEntry.n,lruEntry.p);delete lruHash[key];}
delete data[key];size--;},removeAll:function(){data={};size=0;lruHash={};freshEnd=staleEnd=null;},destroy:function(){data=null;stats=null;lruHash=null;delete caches[cacheId];},info:function(){return extend({},stats,{size:size});}};function refresh(entry){if(entry!=freshEnd){if(!staleEnd){staleEnd=entry;}else if(staleEnd==entry){staleEnd=entry.n;}
link(entry.n,entry.p);link(entry,freshEnd);freshEnd=entry;freshEnd.n=null;}}
function link(nextEntry,prevEntry){if(nextEntry!=prevEntry){if(nextEntry)nextEntry.p=prevEntry;if(prevEntry)prevEntry.n=nextEntry;}}}
cacheFactory.info=function(){var info={};forEach(caches,function(cache,cacheId){info[cacheId]=cache.info();});return info;};cacheFactory.get=function(cacheId){return caches[cacheId];};return cacheFactory;};}
function $TemplateCacheProvider(){this.$get=['$cacheFactory',function($cacheFactory){return $cacheFactory('templates');}];}
var $compileMinErr=minErr('$compile');$CompileProvider.$inject=['$provide','$$sanitizeUriProvider'];function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix='Directive',COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap('ngSrc,ngSrcset,src,srcset'),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;function parseIsolateBindings(scope,directiveName){var LOCAL_REGEXP=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/;var bindings={};forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match){throw $compileMinErr('iscp',"Invalid isolate scope definition for directive '{0}'."+" Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition);}
bindings[scopeName]={mode:match[1][0],collection:match[2]==='*',optional:match[3]==='?',attrName:match[4]||scopeName};});return bindings;}
this.directive=function registerDirective(name,directiveFactory){assertNotHasOwnProperty(name,'directive');if(isString(name)){assertArg(directiveFactory,'directiveFactory');if(!hasDirectives.hasOwnProperty(name)){hasDirectives[name]=[];$provide.factory(name+Suffix,['$injector','$exceptionHandler',function($injector,$exceptionHandler){var directives=[];forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);if(isFunction(directive)){directive={compile:valueFn(directive)};}else if(!directive.compile&&directive.link){directive.compile=valueFn(directive.link);}
directive.priority=directive.priority||0;directive.index=index;directive.name=directive.name||name;directive.require=directive.require||(directive.controller&&directive.name);directive.restrict=directive.restrict||'EA';if(isObject(directive.scope)){directive.$$isolateBindings=parseIsolateBindings(directive.scope,directive.name);}
directives.push(directive);}catch(e){$exceptionHandler(e);}});return directives;}]);}
hasDirectives[name].push(directiveFactory);}else{forEach(name,reverseParams(registerDirective));}
return this;};this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){$$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp);return this;}else{return $$sanitizeUriProvider.aHrefSanitizationWhitelist();}};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){$$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp);return this;}else{return $$sanitizeUriProvider.imgSrcSanitizationWhitelist();}};var debugInfoEnabled=true;this.debugInfoEnabled=function(enabled){if(isDefined(enabled)){debugInfoEnabled=enabled;return this;}
return debugInfoEnabled;};this.$get=['$injector','$interpolate','$exceptionHandler','$templateRequest','$parse','$controller','$rootScope','$document','$sce','$animate','$$sanitizeUri',function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){var Attributes=function(element,attributesToCopy){if(attributesToCopy){var keys=Object.keys(attributesToCopy);var i,l,key;for(i=0,l=keys.length;i<l;i++){key=keys[i];this[key]=attributesToCopy[key];}}else{this.$attr={};}
this.$$element=element;};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){if(classVal&&classVal.length>0){$animate.addClass(this.$$element,classVal);}},$removeClass:function(classVal){if(classVal&&classVal.length>0){$animate.removeClass(this.$$element,classVal);}},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);if(toAdd&&toAdd.length){$animate.addClass(this.$$element,toAdd);}
var toRemove=tokenDifference(oldClasses,newClasses);if(toRemove&&toRemove.length){$animate.removeClass(this.$$element,toRemove);}},$set:function(key,value,writeAttr,attrName){var node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(node,key),observer=key,nodeName;if(booleanKey){this.$$element.prop(key,value);attrName=booleanKey;}else if(aliasedKey){this[aliasedKey]=value;observer=aliasedKey;}
this[key]=value;if(attrName){this.$attr[key]=attrName;}else{attrName=this.$attr[key];if(!attrName){this.$attr[key]=attrName=snake_case(key,'-');}}
nodeName=nodeName_(this.$$element);if((nodeName==='a'&&key==='href')||(nodeName==='img'&&key==='src')){this[key]=value=$$sanitizeUri(value,key==='src');}else if(nodeName==='img'&&key==='srcset'){var result="";var trimmedSrcset=trim(value);var srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/;var rawUris=trimmedSrcset.split(pattern);var nbrUrisWith2parts=Math.floor(rawUris.length/2);for(var i=0;i<nbrUrisWith2parts;i++){var innerIdx=i*2;result+=$$sanitizeUri(trim(rawUris[innerIdx]),true);result+=(" "+trim(rawUris[innerIdx+1]));}
var lastTuple=trim(rawUris[i*2]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),true);if(lastTuple.length===2){result+=(" "+trim(lastTuple[1]));}
this[key]=value=result;}
if(writeAttr!==false){if(value===null||value===undefined){this.$$element.removeAttr(attrName);}else{this.$$element.attr(attrName,value);}}
var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value);}catch(e){$exceptionHandler(e);}});},$observe:function(key,fn){var attrs=this,$$observers=(attrs.$$observers||(attrs.$$observers=createMap())),listeners=($$observers[key]||($$observers[key]=[]));listeners.push(fn);$rootScope.$evalAsync(function(){if(!listeners.$$inter&&attrs.hasOwnProperty(key)){fn(attrs[key]);}});return function(){arrayRemove(listeners,fn);};}};function safeAddClass($element,className){try{$element.addClass(className);}catch(e){}}
var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate=(startSymbol=='{{'||endSymbol=='}}')?identity:function denormalizeTemplate(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol);},NG_ATTR_BINDING=/^ngAttr[A-Z]/;compile.$$addBindingInfo=debugInfoEnabled?function $$addBindingInfo($element,binding){var bindings=$element.data('$binding')||[];if(isArray(binding)){bindings=bindings.concat(binding);}else{bindings.push(binding);}
$element.data('$binding',bindings);}:noop;compile.$$addBindingClass=debugInfoEnabled?function $$addBindingClass($element){safeAddClass($element,'ng-binding');}:noop;compile.$$addScopeInfo=debugInfoEnabled?function $$addScopeInfo($element,scope,isolated,noTemplate){var dataName=isolated?(noTemplate?'$isolateScopeNoTemplate':'$isolateScope'):'$scope';$element.data(dataName,scope);}:noop;compile.$$addScopeClass=debugInfoEnabled?function $$addScopeClass($element,isolated){safeAddClass($element,isolated?'ng-isolate-scope':'ng-scope');}:noop;return compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){if(!($compileNodes instanceof jqLite)){$compileNodes=jqLite($compileNodes);}
forEach($compileNodes,function(node,index){if(node.nodeType==NODE_TYPE_TEXT&&node.nodeValue.match(/\S+/)){$compileNodes[index]=jqLite(node).wrap('<span></span>').parent()[0];}});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function publicLinkFn(scope,cloneConnectFn,options){assertArg(scope,'scope');options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude){parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude;}
if(!namespace){namespace=detectNamespaceForChildElements(futureParentElement);}
var $linkNode;if(namespace!=='html'){$linkNode=jqLite(wrapTemplate(namespace,jqLite('<div>').append($compileNodes).html()));}else if(cloneConnectFn){$linkNode=JQLitePrototype.clone.call($compileNodes);}else{$linkNode=$compileNodes;}
if(transcludeControllers){for(var controllerName in transcludeControllers){$linkNode.data('$'+controllerName+'Controller',transcludeControllers[controllerName].instance);}}
compile.$$addScopeInfo($linkNode,scope);if(cloneConnectFn)cloneConnectFn($linkNode,scope);if(compositeLinkFn)compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn);return $linkNode;};}
function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];if(!node){return'html';}else{return nodeName_(node)!=='foreignobject'&&node.toString().match(/SVG/)?'svg':'html';}}
function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){var linkFns=[],attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound;for(var i=0;i<nodeList.length;i++){attrs=new Attributes();directives=collectDirectives(nodeList[i],[],attrs,i===0?maxPriority:undefined,ignoreDirective);nodeLinkFn=(directives.length)?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null;if(nodeLinkFn&&nodeLinkFn.scope){compile.$$addScopeClass(attrs.$$element);}
childLinkFn=(nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length)?null:compileNodes(childNodes,nodeLinkFn?((nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude):transcludeFn);if(nodeLinkFn||childLinkFn){linkFns.push(i,nodeLinkFn,childLinkFn);linkFnFound=true;nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn;}
previousCompileContext=null;}
return linkFnFound?compositeLinkFn:null;function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn;var stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;stableNodeList=new Array(nodeListLength);for(i=0;i<linkFns.length;i+=3){idx=linkFns[i];stableNodeList[idx]=nodeList[idx];}}else{stableNodeList=nodeList;}
for(i=0,ii=linkFns.length;i<ii;){node=stableNodeList[linkFns[i++]];nodeLinkFn=linkFns[i++];childLinkFn=linkFns[i++];if(nodeLinkFn){if(nodeLinkFn.scope){childScope=scope.$new();compile.$$addScopeInfo(jqLite(node),childScope);}else{childScope=scope;}
if(nodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn,nodeLinkFn.elementTranscludeOnThisElement);}else if(!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn){childBoundTranscludeFn=parentBoundTranscludeFn;}else if(!parentBoundTranscludeFn&&transcludeFn){childBoundTranscludeFn=createBoundTranscludeFn(scope,transcludeFn);}else{childBoundTranscludeFn=null;}
nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn);}else if(childLinkFn){childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn);}}}}
function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn,elementTransclusion){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){if(!transcludedScope){transcludedScope=scope.$new(false,containingScope);transcludedScope.$$transcluded=true;}
return transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement});};return boundTranscludeFn;}
function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var nodeType=node.nodeType,attrsMap=attrs.$attr,match,className;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),'E',maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=false;var attrEndName=false;attr=nAttrs[j];name=attr.name;value=trim(attr.value);ngAttrName=directiveNormalize(name);if(isNgAttr=NG_ATTR_BINDING.test(ngAttrName)){name=name.replace(PREFIX_REGEXP,'').substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase();});}
var directiveNName=ngAttrName.replace(/(Start|End)$/,'');if(directiveIsMultiElement(directiveNName)){if(ngAttrName===directiveNName+'Start'){attrStartName=name;attrEndName=name.substr(0,name.length-5)+'end';name=name.substr(0,name.length-6);}}
nName=directiveNormalize(name.toLowerCase());attrsMap[nName]=name;if(isNgAttr||!attrs.hasOwnProperty(nName)){attrs[nName]=value;if(getBooleanAttrName(node,nName)){attrs[nName]=true;}}
addAttrInterpolateDirective(node,directives,value,nName,isNgAttr);addDirective(directives,nName,'A',maxPriority,ignoreDirective,attrStartName,attrEndName);}
className=node.className;if(isObject(className)){className=className.animVal;}
if(isString(className)&&className!==''){while(match=CLASS_DIRECTIVE_REGEXP.exec(className)){nName=directiveNormalize(match[2]);if(addDirective(directives,nName,'C',maxPriority,ignoreDirective)){attrs[nName]=trim(match[3]);}
className=className.substr(match.index+match[0].length);}}
break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){nName=directiveNormalize(match[1]);if(addDirective(directives,nName,'M',maxPriority,ignoreDirective)){attrs[nName]=trim(match[2]);}}}catch(e){}
break;}
directives.sort(byPriority);return directives;}
function groupScan(node,attrStart,attrEnd){var nodes=[];var depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node){throw $compileMinErr('uterdir',"Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);}
if(node.nodeType==NODE_TYPE_ELEMENT){if(node.hasAttribute(attrStart))depth++;if(node.hasAttribute(attrEnd))depth--;}
nodes.push(node);node=node.nextSibling;}while(depth>0);}else{nodes.push(node);}
return jqLite(nodes);}
function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){element=groupScan(element[0],attrStart,attrEnd);return linkFn(scope,element,attrs,controllers,transcludeFn);};}
function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};var terminalPriority=-Number.MAX_VALUE,newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,controllers,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=false,hasTemplate=false,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),directive,directiveName,$template,replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,linkFn,directiveValue;for(var i=0,ii=directives.length;i<ii;i++){directive=directives[i];var attrStart=directive.$$start;var attrEnd=directive.$$end;if(attrStart){$compileNode=groupScan(compileNode,attrStart,attrEnd);}
$template=undefined;if(terminalPriority>directive.priority){break;}
if(directiveValue=directive.scope){if(!directive.templateUrl){if(isObject(directiveValue)){assertNoDuplicate('new/isolated scope',newIsolateScopeDirective||newScopeDirective,directive,$compileNode);newIsolateScopeDirective=directive;}else{assertNoDuplicate('new/isolated scope',newIsolateScopeDirective,directive,$compileNode);}}
newScopeDirective=newScopeDirective||directive;}
directiveName=directive.name;if(!directive.templateUrl&&directive.controller){directiveValue=directive.controller;controllerDirectives=controllerDirectives||{};assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode);controllerDirectives[directiveName]=directive;}
if(directiveValue=directive.transclude){hasTranscludeDirective=true;if(!directive.$$tlb){assertNoDuplicate('transclusion',nonTlbTranscludeDirective,directive,$compileNode);nonTlbTranscludeDirective=directive;}
if(directiveValue=='element'){hasElementTranscludeDirective=true;terminalPriority=directive.priority;$template=$compileNode;$compileNode=templateAttrs.$$element=jqLite(document.createComment(' '+directiveName+': '+
templateAttrs[directiveName]+' '));compileNode=$compileNode[0];replaceWith(jqCollection,sliceArgs($template),compileNode);childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});}else{$template=jqLite(jqLiteClone(compileNode)).contents();$compileNode.empty();childTranscludeFn=compile($template,transcludeFn);}}
if(directive.template){hasTemplate=true;assertNoDuplicate('template',templateDirective,directive,$compileNode);templateDirective=directive;directiveValue=(isFunction(directive.template))?directive.template($compileNode,templateAttrs):directive.template;directiveValue=denormalizeTemplate(directiveValue);if(directive.replace){replaceDirective=directive;if(jqLiteIsTextNode(directiveValue)){$template=[];}else{$template=removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue)));}
compileNode=$template[0];if($template.length!=1||compileNode.nodeType!==NODE_TYPE_ELEMENT){throw $compileMinErr('tplrt',"Template for directive '{0}' must have exactly one root element. {1}",directiveName,'');}
replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}};var templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs);var unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));if(newIsolateScopeDirective){markDirectivesAsIsolate(templateDirectives);}
directives=directives.concat(templateDirectives).concat(unprocessedDirectives);mergeTemplateAttributes(templateAttrs,newTemplateAttrs);ii=directives.length;}else{$compileNode.html(directiveValue);}}
if(directive.templateUrl){hasTemplate=true;assertNoDuplicate('template',templateDirective,directive,$compileNode);templateDirective=directive;if(directive.replace){replaceDirective=directive;}
nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective});ii=directives.length;}else if(directive.compile){try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);if(isFunction(linkFn)){addLinkFns(null,linkFn,attrStart,attrEnd);}else if(linkFn){addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd);}}catch(e){$exceptionHandler(e,startingTag($compileNode));}}
if(directive.terminal){nodeLinkFn.terminal=true;terminalPriority=Math.max(terminalPriority,directive.priority);}}
nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===true;nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective;nodeLinkFn.elementTranscludeOnThisElement=hasElementTranscludeDirective;nodeLinkFn.templateOnThisElement=hasTemplate;nodeLinkFn.transclude=childTranscludeFn;previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective;return nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){if(pre){if(attrStart)pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd);pre.require=directive.require;pre.directiveName=directiveName;if(newIsolateScopeDirective===directive||directive.$$isolateScope){pre=cloneAndAnnotateFn(pre,{isolateScope:true});}
preLinkFns.push(pre);}
if(post){if(attrStart)post=groupElementsLinkFnWrapper(post,attrStart,attrEnd);post.require=directive.require;post.directiveName=directiveName;if(newIsolateScopeDirective===directive||directive.$$isolateScope){post=cloneAndAnnotateFn(post,{isolateScope:true});}
postLinkFns.push(post);}}
function getControllers(directiveName,require,$element,elementControllers){var value,retrievalMethod='data',optional=false;var $searchElement=$element;var match;if(isString(require)){match=require.match(REQUIRE_PREFIX_REGEXP);require=require.substring(match[0].length);if(match[3]){if(match[1])match[3]=null;else match[1]=match[3];}
if(match[1]==='^'){retrievalMethod='inheritedData';}else if(match[1]==='^^'){retrievalMethod='inheritedData';$searchElement=$element.parent();}
if(match[2]==='?'){optional=true;}
value=null;if(elementControllers&&retrievalMethod==='data'){if(value=elementControllers[require]){value=value.instance;}}
value=value||$searchElement[retrievalMethod]('$'+require+'Controller');if(!value&&!optional){throw $compileMinErr('ctreq',"Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);}
return value||null;}else if(isArray(require)){value=[];forEach(require,function(require){value.push(getControllers(directiveName,require,$element,elementControllers));});}
return value;}
function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,controller,isolateScope,elementControllers,transcludeFn,$element,attrs;if(compileNode===linkNode){attrs=templateAttrs;$element=templateAttrs.$$element;}else{$element=jqLite(linkNode);attrs=new Attributes($element,templateAttrs);}
if(newIsolateScopeDirective){isolateScope=scope.$new(true);}
if(boundTranscludeFn){transcludeFn=controllersBoundTransclude;transcludeFn.$$boundTransclude=boundTranscludeFn;}
if(controllerDirectives){controllers={};elementControllers={};forEach(controllerDirectives,function(directive){var locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controllerInstance;controller=directive.controller;if(controller=='@'){controller=attrs[directive.name];}
controllerInstance=$controller(controller,locals,true,directive.controllerAs);elementControllers[directive.name]=controllerInstance;if(!hasElementTranscludeDirective){$element.data('$'+directive.name+'Controller',controllerInstance.instance);}
controllers[directive.name]=controllerInstance;});}
if(newIsolateScopeDirective){compile.$$addScopeInfo($element,isolateScope,true,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective)));compile.$$addScopeClass($element,true);var isolateScopeController=controllers&&controllers[newIsolateScopeDirective.name];var isolateBindingContext=isolateScope;if(isolateScopeController&&isolateScopeController.identifier&&newIsolateScopeDirective.bindToController===true){isolateBindingContext=isolateScopeController.instance;}
forEach(isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,function(definition,scopeName){var attrName=definition.attrName,optional=definition.optional,mode=definition.mode,lastValue,parentGet,parentSet,compare;switch(mode){case'@':attrs.$observe(attrName,function(value){isolateBindingContext[scopeName]=value;});attrs.$$observers[attrName].$$scope=scope;if(attrs[attrName]){isolateBindingContext[scopeName]=$interpolate(attrs[attrName])(scope);}
break;case'=':if(optional&&!attrs[attrName]){return;}
parentGet=$parse(attrs[attrName]);if(parentGet.literal){compare=equals;}else{compare=function(a,b){return a===b||(a!==a&&b!==b);};}
parentSet=parentGet.assign||function(){lastValue=isolateBindingContext[scopeName]=parentGet(scope);throw $compileMinErr('nonassign',"Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name);};lastValue=isolateBindingContext[scopeName]=parentGet(scope);var parentValueWatch=function parentValueWatch(parentValue){if(!compare(parentValue,isolateBindingContext[scopeName])){if(!compare(parentValue,lastValue)){isolateBindingContext[scopeName]=parentValue;}else{parentSet(scope,parentValue=isolateBindingContext[scopeName]);}}
return lastValue=parentValue;};parentValueWatch.$stateful=true;var unwatch;if(definition.collection){unwatch=scope.$watchCollection(attrs[attrName],parentValueWatch);}else{unwatch=scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal);}
isolateScope.$on('$destroy',unwatch);break;case'&':parentGet=$parse(attrs[attrName]);isolateBindingContext[scopeName]=function(locals){return parentGet(scope,locals);};break;}});}
if(controllers){forEach(controllers,function(controller){controller();});controllers=null;}
for(i=0,ii=preLinkFns.length;i<ii;i++){linkFn=preLinkFns[i];invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);}
var scopeToChild=scope;if(newIsolateScopeDirective&&(newIsolateScopeDirective.template||newIsolateScopeDirective.templateUrl===null)){scopeToChild=isolateScope;}
childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn);for(i=postLinkFns.length-1;i>=0;i--){linkFn=postLinkFns[i];invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);}
function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement){var transcludeControllers;if(!isScope(scope)){futureParentElement=cloneAttachFn;cloneAttachFn=scope;scope=undefined;}
if(hasElementTranscludeDirective){transcludeControllers=elementControllers;}
if(!futureParentElement){futureParentElement=hasElementTranscludeDirective?$element.parent():$element;}
return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);}}}
function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;j<jj;j++){directives[j]=inherit(directives[j],{$$isolateScope:true});}}
function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name)){for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++){try{directive=directives[i];if((maxPriority===undefined||maxPriority>directive.priority)&&directive.restrict.indexOf(location)!=-1){if(startAttrName){directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName});}
tDirectives.push(directive);match=directive;}}catch(e){$exceptionHandler(e);}}}
return match;}
function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name)){for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++){directive=directives[i];if(directive.multiElement){return true;}}}
return false;}
function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){if(key.charAt(0)!='$'){if(src[key]&&src[key]!==value){value+=(key==='style'?';':' ')+src[key];}
dst.$set(key,value,true,srcAttr[key]);}});forEach(src,function(value,key){if(key=='class'){safeAddClass($element,value);dst['class']=(dst['class']?dst['class']+' ':'')+value;}else if(key=='style'){$element.attr('style',$element.attr('style')+';'+value);dst['style']=(dst['style']?dst['style']+';':'')+value;}else if(key.charAt(0)!='$'&&!dst.hasOwnProperty(key)){dst[key]=value;dstAttr[key]=srcAttr[key];}});}
function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var linkQueue=[],afterTemplateNodeLinkFn,afterTemplateChildLinkFn,beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=(isFunction(origAsyncDirective.templateUrl))?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;$compileNode.empty();$templateRequest($sce.getTrustedResourceUrl(templateUrl)).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;content=denormalizeTemplate(content);if(origAsyncDirective.replace){if(jqLiteIsTextNode(content)){$template=[];}else{$template=removeComments(wrapTemplate(templateNamespace,trim(content)));}
compileNode=$template[0];if($template.length!=1||compileNode.nodeType!==NODE_TYPE_ELEMENT){throw $compileMinErr('tplrt',"Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);}
tempTemplateAttrs={$attr:{}};replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);if(isObject(origAsyncDirective.scope)){markDirectivesAsIsolate(templateDirectives);}
directives=templateDirectives.concat(directives);mergeTemplateAttributes(tAttrs,tempTemplateAttrs);}else{compileNode=beforeTemplateCompileNode;$compileNode.html(content);}
directives.unshift(derivedSyncDirective);afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext);forEach($rootElement,function(node,i){if(node==compileNode){$rootElement[i]=$compileNode[0];}});afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);while(linkQueue.length){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(scope.$$destroyed)continue;if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;if(!(previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace)){linkNode=jqLiteClone(compileNode);}
replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode);safeAddClass(jqLite(linkNode),oldClasses);}
if(afterTemplateNodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn);}else{childBoundTranscludeFn=boundTranscludeFn;}
afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn);}
linkQueue=null;});return function delayedNodeLinkFn(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;if(scope.$$destroyed)return;if(linkQueue){linkQueue.push(scope,node,rootElement,childBoundTranscludeFn);}else{if(afterTemplateNodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn);}
afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn);}};}
function byPriority(a,b){var diff=b.priority-a.priority;if(diff!==0)return diff;if(a.name!==b.name)return(a.name<b.name)?-1:1;return a.index-b.index;}
function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective){throw $compileMinErr('multidir','Multiple directives [{0}, {1}] asking for {2} on: {3}',previousDirective.name,directive.name,what,startingTag(element));}}
function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,true);if(interpolateFn){directives.push({priority:0,compile:function textInterpolateCompileFn(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;if(hasCompileParent)compile.$$addBindingClass(templateNodeParent);return function textInterpolateLinkFn(scope,node){var parent=node.parent();if(!hasCompileParent)compile.$$addBindingClass(parent);compile.$$addBindingInfo(parent,interpolateFn.expressions);scope.$watch(interpolateFn,function interpolateFnWatchAction(value){node[0].nodeValue=value;});};}});}}
function wrapTemplate(type,template){type=lowercase(type||'html');switch(type){case'svg':case'math':var wrapper=document.createElement('div');wrapper.innerHTML='<'+type+'>'+template+'</'+type+'>';return wrapper.childNodes[0].childNodes;default:return template;}}
function getTrustedContext(node,attrNormalizedName){if(attrNormalizedName=="srcdoc"){return $sce.HTML;}
var tag=nodeName_(node);if(attrNormalizedName=="xlinkHref"||(tag=="form"&&attrNormalizedName=="action")||(tag!="img"&&(attrNormalizedName=="src"||attrNormalizedName=="ngSrc"))){return $sce.RESOURCE_URL;}}
function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,true,trustedContext,allOrNothing);if(!interpolateFn)return;if(name==="multiple"&&nodeName_(node)==="select"){throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));}
directives.push({priority:100,compile:function(){return{pre:function attrInterpolatePreLinkFn(scope,element,attr){var $$observers=(attr.$$observers||(attr.$$observers={}));if(EVENT_HANDLER_ATTR_REGEXP.test(name)){throw $compileMinErr('nodomevents',"Interpolations for HTML DOM event attributes are disallowed.  Please use the "+"ng- versions (such as ng-click instead of onclick) instead.");}
var newValue=attr[name];if(newValue!==value){interpolateFn=newValue&&$interpolate(newValue,true,trustedContext,allOrNothing);value=newValue;}
if(!interpolateFn)return;attr[name]=interpolateFn(scope);($$observers[name]||($$observers[name]=[])).$$inter=true;(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function interpolateFnWatchAction(newValue,oldValue){if(name==='class'&&newValue!=oldValue){attr.$updateClass(newValue,oldValue);}else{attr.$set(name,newValue);}});}};}});}
function replaceWith($rootElement,elementsToRemove,newNode){var firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode,i,ii;if($rootElement){for(i=0,ii=$rootElement.length;i<ii;i++){if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++){if(j2<jj){$rootElement[j]=$rootElement[j2];}else{delete $rootElement[j];}}
$rootElement.length-=removeCount-1;if($rootElement.context===firstElementToRemove){$rootElement.context=newNode;}
break;}}}
if(parent){parent.replaceChild(newNode,firstElementToRemove);}
var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove);jqLite(newNode).data(jqLite(firstElementToRemove).data());if(!jQuery){delete jqLite.cache[firstElementToRemove[jqLite.expando]];}else{skipDestroyOnNextJQueryCleanData=true;jQuery.cleanData([firstElementToRemove]);}
for(var k=1,kk=elementsToRemove.length;k<kk;k++){var element=elementsToRemove[k];jqLite(element).remove();fragment.appendChild(element);delete elementsToRemove[k];}
elementsToRemove[0]=newNode;elementsToRemove.length=1;}
function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments);},fn,annotation);}
function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn);}catch(e){$exceptionHandler(e,startingTag($element));}}}];}
var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i;function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,''));}
function nodesetLinkingFn(scope,nodeList,rootElement,boundTranscludeFn){}
function directiveLinkingFn(nodesetLinkingFn,scope,node,rootElement,boundTranscludeFn){}
function tokenDifference(str1,str2){var values='',tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){var token=tokens1[i];for(var j=0;j<tokens2.length;j++){if(token==tokens2[j])continue outer;}
values+=(values.length>0?' ':'')+token;}
return values;}
function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(i<=1){return jqNodes;}
while(i--){var node=jqNodes[i];if(node.nodeType===NODE_TYPE_COMMENT){splice.call(jqNodes,i,1);}}
return jqNodes;}
var $controllerMinErr=minErr('$controller');function $ControllerProvider(){var controllers={},globals=false,CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,'controller');if(isObject(name)){extend(controllers,name);}else{controllers[name]=constructor;}};this.allowGlobals=function(){globals=true;};this.$get=['$injector','$window',function($injector,$window){return function(expression,locals,later,ident){var instance,match,constructor,identifier;later=later===true;if(ident&&isString(ident)){identifier=ident;}
if(isString(expression)){match=expression.match(CNTRL_REG);if(!match){throw $controllerMinErr('ctrlfmt',"Badly formed controller string '{0}'. "+"Must match `__name__ as __id__` or `__name__`.",expression);}
constructor=match[1],identifier=identifier||match[3];expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,true)||(globals?getter($window,constructor,true):undefined);assertArgFn(expression,constructor,true);}
if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null);if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name);}
return extend(function(){$injector.invoke(expression,instance,locals,constructor);return instance;},{instance:instance,identifier:identifier});}
instance=$injector.instantiate(expression,locals,constructor);if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name);}
return instance;};function addIdentifier(locals,identifier,instance,name){if(!(locals&&isObject(locals.$scope))){throw minErr('$controller')('noscp',"Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);}
locals.$scope[identifier]=instance;}}];}
function $DocumentProvider(){this.$get=['$window',function(window){return jqLite(window.document);}];}
function $ExceptionHandlerProvider(){this.$get=['$log',function($log){return function(exception,cause){$log.error.apply($log,arguments);};}];}
var APPLICATION_JSON='application/json';var CONTENT_TYPE_APPLICATION_JSON={'Content-Type':APPLICATION_JSON+';charset=utf-8'};var JSON_START=/^\[|^\{(?!\{)/;var JSON_ENDS={'[':/]$/,'{':/}$/};var JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/;function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,'').trim();if(tempData){var contentType=headers('Content-Type');if((contentType&&(contentType.indexOf(APPLICATION_JSON)===0))||isJsonLike(tempData)){data=fromJson(tempData);}}}
return data;}
function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str);}
function parseHeaders(headers){var parsed=createMap(),key,val,i;if(!headers)return parsed;forEach(headers.split('\n'),function(line){i=line.indexOf(':');key=lowercase(trim(line.substr(0,i)));val=trim(line.substr(i+1));if(key){parsed[key]=parsed[key]?parsed[key]+', '+val:val;}});return parsed;}
function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){if(!headersObj)headersObj=parseHeaders(headers);if(name){var value=headersObj[lowercase(name)];if(value===void 0){value=null;}
return value;}
return headersObj;};}
function transformData(data,headers,status,fns){if(isFunction(fns))
return fns(data,headers,status);forEach(fns,function(fn){data=fn(data,headers,status);});return data;}
function isSuccess(status){return 200<=status&&status<300;}
function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return isObject(d)&&!isFile(d)&&!isBlob(d)&&!isFormData(d)?toJson(d):d;}],headers:{common:{'Accept':'application/json, text/plain, */*'},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN'};var useApplyAsync=false;this.useApplyAsync=function(value){if(isDefined(value)){useApplyAsync=!!value;return this;}
return useApplyAsync;};var interceptorFactories=this.interceptors=[];this.$get=['$httpBackend','$browser','$cacheFactory','$rootScope','$q','$injector',function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){var defaultCache=$cacheFactory('$http');var reversedInterceptors=[];forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory));});function $http(requestConfig){if(!angular.isObject(requestConfig)){throw minErr('$http')('badreq','Http request configuration must be an object.  Received: {0}',requestConfig);}
var config=extend({method:'get',transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},requestConfig);config.headers=mergeHeaders(requestConfig);config.method=uppercase(config.method);var serverRequest=function(config){var headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);if(isUndefined(reqData)){forEach(headers,function(value,header){if(lowercase(header)==='content-type'){delete headers[header];}});}
if(isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)){config.withCredentials=defaults.withCredentials;}
return sendReq(config,reqData).then(transformResponse,transformResponse);};var chain=[serverRequest,undefined];var promise=$q.when(config);forEach(reversedInterceptors,function(interceptor){if(interceptor.request||interceptor.requestError){chain.unshift(interceptor.request,interceptor.requestError);}
if(interceptor.response||interceptor.responseError){chain.push(interceptor.response,interceptor.responseError);}});while(chain.length){var thenFn=chain.shift();var rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn);}
promise.success=function(fn){promise.then(function(response){fn(response.data,response.status,response.headers,config);});return promise;};promise.error=function(fn){promise.then(null,function(response){fn(response.data,response.status,response.headers,config);});return promise;};return promise;function transformResponse(response){var resp=extend({},response);if(!response.data){resp.data=response.data;}else{resp.data=transformData(response.data,response.headers,response.status,config.transformResponse);}
return(isSuccess(response.status))?resp:$q.reject(resp);}
function executeHeaderFns(headers){var headerContent,processedHeaders={};forEach(headers,function(headerFn,header){if(isFunction(headerFn)){headerContent=headerFn();if(headerContent!=null){processedHeaders[header]=headerContent;}}else{processedHeaders[header]=headerFn;}});return processedHeaders;}
function mergeHeaders(config){var defHeaders=defaults.headers,reqHeaders=extend({},config.headers),defHeaderName,lowercaseDefHeaderName,reqHeaderName;defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders){if(lowercase(reqHeaderName)===lowercaseDefHeaderName){continue defaultHeadersIteration;}}
reqHeaders[defHeaderName]=defHeaders[defHeaderName];}
return executeHeaderFns(reqHeaders);}}
$http.pendingRequests=[];createShortMethods('get','delete','head','jsonp');createShortMethodsWithData('post','put','patch');$http.defaults=defaults;return $http;function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}));};});}
function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}));};});}
function sendReq(config,reqData){var deferred=$q.defer(),promise=deferred.promise,cache,cachedResp,reqHeaders=config.headers,url=buildUrl(config.url,config.params);$http.pendingRequests.push(config);promise.then(removePendingReq,removePendingReq);if((config.cache||defaults.cache)&&config.cache!==false&&(config.method==='GET'||config.method==='JSONP')){cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache;}
if(cache){cachedResp=cache.get(url);if(isDefined(cachedResp)){if(isPromiseLike(cachedResp)){cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult);}else{if(isArray(cachedResp)){resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]);}else{resolvePromise(cachedResp,200,{},'OK');}}}else{cache.put(url,promise);}}
if(isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;if(xsrfValue){reqHeaders[(config.xsrfHeaderName||defaults.xsrfHeaderName)]=xsrfValue;}
$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType);}
return promise;function done(status,response,headersString,statusText){if(cache){if(isSuccess(status)){cache.put(url,[status,response,parseHeaders(headersString),statusText]);}else{cache.remove(url);}}
function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText);}
if(useApplyAsync){$rootScope.$applyAsync(resolveHttpPromise);}else{resolveHttpPromise();if(!$rootScope.$$phase)$rootScope.$apply();}}
function resolvePromise(response,status,headers,statusText){status=Math.max(status,0);(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText});}
function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText);}
function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);if(idx!==-1)$http.pendingRequests.splice(idx,1);}}
function buildUrl(url,params){if(!params)return url;var parts=[];forEachSorted(params,function(value,key){if(value===null||isUndefined(value))return;if(!isArray(value))value=[value];forEach(value,function(v){if(isObject(v)){if(isDate(v)){v=v.toISOString();}else{v=toJson(v);}}
parts.push(encodeUriQuery(key)+'='+
encodeUriQuery(v));});});if(parts.length>0){url+=((url.indexOf('?')==-1)?'?':'&')+parts.join('&');}
return url;}}];}
function createXhr(){return new window.XMLHttpRequest();}
function $HttpBackendProvider(){this.$get=['$browser','$window','$document',function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0]);}];}
function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType){$browser.$$incOutstandingRequestCount();url=url||$browser.url();if(lowercase(method)=='jsonp'){var callbackId='_'+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data;callbacks[callbackId].called=true;};var jsonpDone=jsonpReq(url.replace('JSON_CALLBACK','angular.callbacks.'+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text);callbacks[callbackId]=noop;});}else{var xhr=createXhr();xhr.open(method,url,true);forEach(headers,function(value,key){if(isDefined(value)){xhr.setRequestHeader(key,value);}});xhr.onload=function requestLoaded(){var statusText=xhr.statusText||'';var response=('response'in xhr)?xhr.response:xhr.responseText;var status=xhr.status===1223?204:xhr.status;if(status===0){status=response?200:urlResolve(url).protocol=='file'?404:0;}
completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText);};var requestError=function(){completeRequest(callback,-1,null,null,'');};xhr.onerror=requestError;xhr.onabort=requestError;if(withCredentials){xhr.withCredentials=true;}
if(responseType){try{xhr.responseType=responseType;}catch(e){if(responseType!=='json'){throw e;}}}
xhr.send(post||null);}
if(timeout>0){var timeoutId=$browserDefer(timeoutRequest,timeout);}else if(isPromiseLike(timeout)){timeout.then(timeoutRequest);}
function timeoutRequest(){jsonpDone&&jsonpDone();xhr&&xhr.abort();}
function completeRequest(callback,status,response,headersString,statusText){if(timeoutId!==undefined){$browserDefer.cancel(timeoutId);}
jsonpDone=xhr=null;callback(status,response,headersString,statusText);$browser.$$completeOutstandingRequest(noop);}};function jsonpReq(url,callbackId,done){var script=rawDocument.createElement('script'),callback=null;script.type="text/javascript";script.src=url;script.async=true;callback=function(event){removeEventListenerFn(script,"load",callback);removeEventListenerFn(script,"error",callback);rawDocument.body.removeChild(script);script=null;var status=-1;var text="unknown";if(event){if(event.type==="load"&&!callbacks[callbackId].called){event={type:"error"};}
text=event.type;status=event.type==="error"?404:200;}
if(done){done(status,text);}};addEventListenerFn(script,"load",callback);addEventListenerFn(script,"error",callback);rawDocument.body.appendChild(script);return callback;}}
var $interpolateMinErr=minErr('$interpolate');function $InterpolateProvider(){var startSymbol='{{';var endSymbol='}}';this.startSymbol=function(value){if(value){startSymbol=value;return this;}else{return startSymbol;}};this.endSymbol=function(value){if(value){endSymbol=value;return this;}else{return endSymbol;}};this.$get=['$parse','$exceptionHandler','$sce',function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),'g'),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),'g');function escape(ch){return'\\\\\\'+ch;}
function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){allOrNothing=!!allOrNothing;var startIndex,endIndex,index=0,expressions=[],parseFns=[],textLength=text.length,exp,concat=[],expressionPositions=[];while(index<textLength){if(((startIndex=text.indexOf(startSymbol,index))!=-1)&&((endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))!=-1)){if(index!==startIndex){concat.push(unescapeText(text.substring(index,startIndex)));}
exp=text.substring(startIndex+startSymbolLength,endIndex);expressions.push(exp);parseFns.push($parse(exp,parseStringifyInterceptor));index=endIndex+endSymbolLength;expressionPositions.push(concat.length);concat.push('');}else{if(index!==textLength){concat.push(unescapeText(text.substring(index)));}
break;}}
if(trustedContext&&concat.length>1){throw $interpolateMinErr('noconcat',"Error while interpolating: {0}\nStrict Contextual Escaping disallows "+"interpolations that concatenate multiple expressions when a trusted value is "+"required.  See http://docs.angularjs.org/api/ng.$sce",text);}
if(!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i];}
return concat.join('');};var getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value);};var stringify=function(value){if(value==null){return'';}
switch(typeof value){case'string':break;case'number':value=''+value;break;default:value=toJson(value);}
return value;};return extend(function interpolationFn(context){var i=0;var ii=expressions.length;var values=new Array(ii);try{for(;i<ii;i++){values[i]=parseFns[i](context);}
return compute(values);}catch(err){var newErr=$interpolateMinErr('interr',"Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr);}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener,objectEquality){var lastValue;return scope.$watchGroup(parseFns,function interpolateFnWatcher(values,oldValues){var currValue=compute(values);if(isFunction(listener)){listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope);}
lastValue=currValue;},objectEquality);}});}
function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol);}
function parseStringifyInterceptor(value){try{value=getValue(value);return allOrNothing&&!isDefined(value)?value:stringify(value);}catch(err){var newErr=$interpolateMinErr('interr',"Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr);}}}
$interpolate.startSymbol=function(){return startSymbol;};$interpolate.endSymbol=function(){return endSymbol;};return $interpolate;}];}
function $IntervalProvider(){this.$get=['$rootScope','$window','$q','$$q',function($rootScope,$window,$q,$$q){var intervals={};function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=(isDefined(invokeApply)&&!invokeApply),deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;count=isDefined(count)?count:0;promise.then(null,null,fn);promise.$$intervalId=setInterval(function tick(){deferred.notify(iteration++);if(count>0&&iteration>=count){deferred.resolve(iteration);clearInterval(promise.$$intervalId);delete intervals[promise.$$intervalId];}
if(!skipApply)$rootScope.$apply();},delay);intervals[promise.$$intervalId]=deferred;return promise;}
interval.cancel=function(promise){if(promise&&promise.$$intervalId in intervals){intervals[promise.$$intervalId].reject('canceled');$window.clearInterval(promise.$$intervalId);delete intervals[promise.$$intervalId];return true;}
return false;};return interval;}];}
function $LocaleProvider(){this.$get=function(){return{id:'en-us',NUMBER_FORMATS:{DECIMAL_SEP:'.',GROUP_SEP:',',PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:'',posSuf:'',negPre:'-',negSuf:'',gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:'\u00A4',posSuf:'',negPre:'(\u00A4',negSuf:')',gSize:3,lgSize:3}],CURRENCY_SYM:'$'},DATETIME_FORMATS:{MONTH:'January,February,March,April,May,June,July,August,September,October,November,December'.split(','),SHORTMONTH:'Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec'.split(','),DAY:'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(','),SHORTDAY:'Sun,Mon,Tue,Wed,Thu,Fri,Sat'.split(','),AMPMS:['AM','PM'],medium:'MMM d, y h:mm:ss a','short':'M/d/yy h:mm a',fullDate:'EEEE, MMMM d, y',longDate:'MMMM d, y',mediumDate:'MMM d, y',shortDate:'M/d/yy',mediumTime:'h:mm:ss a',shortTime:'h:mm a',ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(num){if(num===1){return'one';}
return'other';}};};}
var PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={'http':80,'https':443,'ftp':21};var $locationMinErr=minErr('$location');function encodePath(path){var segments=path.split('/'),i=segments.length;while(i--){segments[i]=encodeUriSegment(segments[i]);}
return segments.join('/');}
function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol;locationObj.$$host=parsedUrl.hostname;locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null;}
function parseAppUrl(relativeUrl,locationObj){var prefixed=(relativeUrl.charAt(0)!=='/');if(prefixed){relativeUrl='/'+relativeUrl;}
var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&match.pathname.charAt(0)==='/'?match.pathname.substring(1):match.pathname);locationObj.$$search=parseKeyValue(match.search);locationObj.$$hash=decodeURIComponent(match.hash);if(locationObj.$$path&&locationObj.$$path.charAt(0)!='/'){locationObj.$$path='/'+locationObj.$$path;}}
function beginsWith(begin,whole){if(whole.indexOf(begin)===0){return whole.substr(begin.length);}}
function stripHash(url){var index=url.indexOf('#');return index==-1?url:url.substr(0,index);}
function trimEmptyHash(url){return url.replace(/(#.+)|#$/,'$1');}
function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf('/')+1);}
function serverBase(url){return url.substring(0,url.indexOf('/',url.indexOf('//')+2));}
function LocationHtml5Url(appBase,basePrefix){this.$$html5=true;basePrefix=basePrefix||'';var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this);this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl)){throw $locationMinErr('ipthprfx','Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);}
parseAppUrl(pathUrl,this);if(!this.$$path){this.$$path='/';}
this.$$compose();};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?'#'+encodeUriSegment(this.$$hash):'';this.$$url=encodePath(this.$$path)+(search?'?'+search:'')+hash;this.$$absUrl=appBaseNoFile+this.$$url.substr(1);};this.$$parseLinkUrl=function(url,relHref){if(relHref&&relHref[0]==='#'){this.hash(relHref.slice(1));return true;}
var appUrl,prevAppUrl;var rewrittenUrl;if((appUrl=beginsWith(appBase,url))!==undefined){prevAppUrl=appUrl;if((appUrl=beginsWith(basePrefix,appUrl))!==undefined){rewrittenUrl=appBaseNoFile+(beginsWith('/',appUrl)||appUrl);}else{rewrittenUrl=appBase+prevAppUrl;}}else if((appUrl=beginsWith(appBaseNoFile,url))!==undefined){rewrittenUrl=appBaseNoFile+appUrl;}else if(appBaseNoFile==url+'/'){rewrittenUrl=appBaseNoFile;}
if(rewrittenUrl){this.$$parse(rewrittenUrl);}
return!!rewrittenUrl;};}
function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this);this.$$parse=function(url){var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);var withoutHashUrl;if(withoutBaseUrl.charAt(0)==='#'){withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl);if(isUndefined(withoutHashUrl)){withoutHashUrl=withoutBaseUrl;}}else{withoutHashUrl=this.$$html5?withoutBaseUrl:'';}
parseAppUrl(withoutHashUrl,this);this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase);this.$$compose();function removeWindowsDriveName(path,url,base){var windowsFilePathExp=/^\/[A-Z]:(\/.*)/;var firstPathSegmentMatch;if(url.indexOf(base)===0){url=url.replace(base,'');}
if(windowsFilePathExp.exec(url)){return path;}
firstPathSegmentMatch=windowsFilePathExp.exec(path);return firstPathSegmentMatch?firstPathSegmentMatch[1]:path;}};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?'#'+encodeUriSegment(this.$$hash):'';this.$$url=encodePath(this.$$path)+(search?'?'+search:'')+hash;this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:'');};this.$$parseLinkUrl=function(url,relHref){if(stripHash(appBase)==stripHash(url)){this.$$parse(url);return true;}
return false;};}
function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=true;LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){if(relHref&&relHref[0]==='#'){this.hash(relHref.slice(1));return true;}
var rewrittenUrl;var appUrl;if(appBase==stripHash(url)){rewrittenUrl=url;}else if((appUrl=beginsWith(appBaseNoFile,url))){rewrittenUrl=appBase+hashPrefix+appUrl;}else if(appBaseNoFile===url+'/'){rewrittenUrl=appBaseNoFile;}
if(rewrittenUrl){this.$$parse(rewrittenUrl);}
return!!rewrittenUrl;};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?'#'+encodeUriSegment(this.$$hash):'';this.$$url=encodePath(this.$$path)+(search?'?'+search:'')+hash;this.$$absUrl=appBase+hashPrefix+this.$$url;};}
var locationPrototype={$$html5:false,$$replace:false,absUrl:locationGetter('$$absUrl'),url:function(url){if(isUndefined(url))
return this.$$url;var match=PATH_MATCH.exec(url);if(match[1]||url==='')this.path(decodeURIComponent(match[1]));if(match[2]||match[1]||url==='')this.search(match[3]||'');this.hash(match[5]||'');return this;},protocol:locationGetter('$$protocol'),host:locationGetter('$$host'),port:locationGetter('$$port'),path:locationGetterSetter('$$path',function(path){path=path!==null?path.toString():'';return path.charAt(0)=='/'?path:'/'+path;}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search)){search=search.toString();this.$$search=parseKeyValue(search);}else if(isObject(search)){search=copy(search,{});forEach(search,function(value,key){if(value==null)delete search[key];});this.$$search=search;}else{throw $locationMinErr('isrcharg','The first argument of the `$location#search()` call must be a string or an object.');}
break;default:if(isUndefined(paramValue)||paramValue===null){delete this.$$search[search];}else{this.$$search[search]=paramValue;}}
this.$$compose();return this;},hash:locationGetterSetter('$$hash',function(hash){return hash!==null?hash.toString():'';}),replace:function(){this.$$replace=true;return this;}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype);Location.prototype.state=function(state){if(!arguments.length)
return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5){throw $locationMinErr('nostate','History API state support is available only '+'in HTML5 mode and only in browsers supporting HTML5 History API');}
this.$$state=isUndefined(state)?null:state;return this;};});function locationGetter(property){return function(){return this[property];};}
function locationGetterSetter(property,preprocess){return function(value){if(isUndefined(value))
return this[property];this[property]=preprocess(value);this.$$compose();return this;};}
function $LocationProvider(){var hashPrefix='',html5Mode={enabled:false,requireBase:true,rewriteLinks:true};this.hashPrefix=function(prefix){if(isDefined(prefix)){hashPrefix=prefix;return this;}else{return hashPrefix;}};this.html5Mode=function(mode){if(isBoolean(mode)){html5Mode.enabled=mode;return this;}else if(isObject(mode)){if(isBoolean(mode.enabled)){html5Mode.enabled=mode.enabled;}
if(isBoolean(mode.requireBase)){html5Mode.requireBase=mode.requireBase;}
if(isBoolean(mode.rewriteLinks)){html5Mode.rewriteLinks=mode.rewriteLinks;}
return this;}else{return html5Mode;}};this.$get=['$rootScope','$browser','$sniffer','$rootElement','$window',function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,baseHref=$browser.baseHref(),initialUrl=$browser.url(),appBase;if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase){throw $locationMinErr('nobase',"$location in HTML5 mode requires a <base> tag to be present!");}
appBase=serverBase(initialUrl)+(baseHref||'/');LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url;}else{appBase=stripHash(initialUrl);LocationMode=LocationHashbangUrl;}
$location=new LocationMode(appBase,'#'+hashPrefix);$location.$$parseLinkUrl(initialUrl,initialUrl);$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url();var oldState=$location.$$state;try{$browser.url(url,replace,state);$location.$$state=$browser.state();}catch(e){$location.url(oldUrl);$location.$$state=oldState;throw e;}}
$rootElement.on('click',function(event){if(!html5Mode.rewriteLinks||event.ctrlKey||event.metaKey||event.shiftKey||event.which==2||event.button==2)return;var elm=jqLite(event.target);while(nodeName_(elm[0])!=='a'){if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;}
var absHref=elm.prop('href');var relHref=elm.attr('href')||elm.attr('xlink:href');if(isObject(absHref)&&absHref.toString()==='[object SVGAnimatedString]'){absHref=urlResolve(absHref.animVal).href;}
if(IGNORE_URI_REGEXP.test(absHref))return;if(absHref&&!elm.attr('target')&&!event.isDefaultPrevented()){if($location.$$parseLinkUrl(absHref,relHref)){event.preventDefault();if($location.absUrl()!=$browser.url()){$rootScope.$apply();$window.angular['ff-684208-preventDefault']=true;}}}});if(trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)){$browser.url($location.absUrl(),true);}
var initializing=true;$browser.onUrlChange(function(newUrl,newState){$rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();var oldState=$location.$$state;var defaultPrevented;$location.$$parse(newUrl);$location.$$state=newState;defaultPrevented=$rootScope.$broadcast('$locationChangeStart',newUrl,oldUrl,newState,oldState).defaultPrevented;if($location.absUrl()!==newUrl)return;if(defaultPrevented){$location.$$parse(oldUrl);$location.$$state=oldState;setBrowserUrlWithFallback(oldUrl,false,oldState);}else{initializing=false;afterLocationChange(oldUrl,oldState);}});if(!$rootScope.$$phase)$rootScope.$digest();});$rootScope.$watch(function $locationWatch(){var oldUrl=trimEmptyHash($browser.url());var newUrl=trimEmptyHash($location.absUrl());var oldState=$browser.state();var currentReplace=$location.$$replace;var urlOrStateChanged=oldUrl!==newUrl||($location.$$html5&&$sniffer.history&&oldState!==$location.$$state);if(initializing||urlOrStateChanged){initializing=false;$rootScope.$evalAsync(function(){var newUrl=$location.absUrl();var defaultPrevented=$rootScope.$broadcast('$locationChangeStart',newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;if($location.absUrl()!==newUrl)return;if(defaultPrevented){$location.$$parse(oldUrl);$location.$$state=oldState;}else{if(urlOrStateChanged){setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state);}
afterLocationChange(oldUrl,oldState);}});}
$location.$$replace=false;});return $location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast('$locationChangeSuccess',$location.absUrl(),oldUrl,$location.$$state,oldState);}}];}
function $LogProvider(){var debug=true,self=this;this.debugEnabled=function(flag){if(isDefined(flag)){debug=flag;return this;}else{return debug;}};this.$get=['$window',function($window){return{log:consoleLog('log'),info:consoleLog('info'),warn:consoleLog('warn'),error:consoleLog('error'),debug:(function(){var fn=consoleLog('debug');return function(){if(debug){fn.apply(self,arguments);}};}())};function formatError(arg){if(arg instanceof Error){if(arg.stack){arg=(arg.message&&arg.stack.indexOf(arg.message)===-1)?'Error: '+arg.message+'\n'+arg.stack:arg.stack;}else if(arg.sourceURL){arg=arg.message+'\n'+arg.sourceURL+':'+arg.line;}}
return arg;}
function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=false;try{hasApply=!!logFn.apply;}catch(e){}
if(hasApply){return function(){var args=[];forEach(arguments,function(arg){args.push(formatError(arg));});return logFn.apply(console,args);};}
return function(arg1,arg2){logFn(arg1,arg2==null?'':arg2);};}}];}
var $parseMinErr=minErr('$parse');function ensureSafeMemberName(name,fullExpression){if(name==="__defineGetter__"||name==="__defineSetter__"||name==="__lookupGetter__"||name==="__lookupSetter__"||name==="__proto__"){throw $parseMinErr('isecfld','Attempting to access a disallowed field in Angular expressions! '
+'Expression: {0}',fullExpression);}
return name;}
function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj){throw $parseMinErr('isecfn','Referencing Function in Angular expressions is disallowed! Expression: {0}',fullExpression);}else if(obj.window===obj){throw $parseMinErr('isecwindow','Referencing the Window in Angular expressions is disallowed! Expression: {0}',fullExpression);}else if(obj.children&&(obj.nodeName||(obj.prop&&obj.attr&&obj.find))){throw $parseMinErr('isecdom','Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}',fullExpression);}else if(obj===Object){throw $parseMinErr('isecobj','Referencing Object in Angular expressions is disallowed! Expression: {0}',fullExpression);}}
return obj;}
var CALL=Function.prototype.call;var APPLY=Function.prototype.apply;var BIND=Function.prototype.bind;function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj){throw $parseMinErr('isecfn','Referencing Function in Angular expressions is disallowed! Expression: {0}',fullExpression);}else if(obj===CALL||obj===APPLY||obj===BIND){throw $parseMinErr('isecff','Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}',fullExpression);}}}
var CONSTANTS=createMap();forEach({'null':function(){return null;},'true':function(){return true;},'false':function(){return false;},'undefined':function(){}},function(constantGetter,name){constantGetter.constant=constantGetter.literal=constantGetter.sharedGetter=true;CONSTANTS[name]=constantGetter;});CONSTANTS['this']=function(self){return self;};CONSTANTS['this'].sharedGetter=true;var OPERATORS=extend(createMap(),{'+':function(self,locals,a,b){a=a(self,locals);b=b(self,locals);if(isDefined(a)){if(isDefined(b)){return a+b;}
return a;}
return isDefined(b)?b:undefined;},'-':function(self,locals,a,b){a=a(self,locals);b=b(self,locals);return(isDefined(a)?a:0)-(isDefined(b)?b:0);},'*':function(self,locals,a,b){return a(self,locals)*b(self,locals);},'/':function(self,locals,a,b){return a(self,locals)/b(self,locals);},'%':function(self,locals,a,b){return a(self,locals)%b(self,locals);},'===':function(self,locals,a,b){return a(self,locals)===b(self,locals);},'!==':function(self,locals,a,b){return a(self,locals)!==b(self,locals);},'==':function(self,locals,a,b){return a(self,locals)==b(self,locals);},'!=':function(self,locals,a,b){return a(self,locals)!=b(self,locals);},'<':function(self,locals,a,b){return a(self,locals)<b(self,locals);},'>':function(self,locals,a,b){return a(self,locals)>b(self,locals);},'<=':function(self,locals,a,b){return a(self,locals)<=b(self,locals);},'>=':function(self,locals,a,b){return a(self,locals)>=b(self,locals);},'&&':function(self,locals,a,b){return a(self,locals)&&b(self,locals);},'||':function(self,locals,a,b){return a(self,locals)||b(self,locals);},'!':function(self,locals,a){return!a(self,locals);},'=':true,'|':true});var ESCAPE={"n":"\n","f":"\f","r":"\r","t":"\t","v":"\v","'":"'",'"':'"'};var Lexer=function(options){this.options=options;};Lexer.prototype={constructor:Lexer,lex:function(text){this.text=text;this.index=0;this.tokens=[];while(this.index<this.text.length){var ch=this.text.charAt(this.index);if(ch==='"'||ch==="'"){this.readString(ch);}else if(this.isNumber(ch)||ch==='.'&&this.isNumber(this.peek())){this.readNumber();}else if(this.isIdent(ch)){this.readIdent();}else if(this.is(ch,'(){}[].,;:?')){this.tokens.push({index:this.index,text:ch});this.index++;}else if(this.isWhitespace(ch)){this.index++;}else{var ch2=ch+this.peek();var ch3=ch2+this.peek(2);var op1=OPERATORS[ch];var op2=OPERATORS[ch2];var op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:(op2?ch2:ch);this.tokens.push({index:this.index,text:token,operator:true});this.index+=token.length;}else{this.throwError('Unexpected next character ',this.index,this.index+1);}}}
return this.tokens;},is:function(ch,chars){return chars.indexOf(ch)!==-1;},peek:function(i){var num=i||1;return(this.index+num<this.text.length)?this.text.charAt(this.index+num):false;},isNumber:function(ch){return('0'<=ch&&ch<='9')&&typeof ch==="string";},isWhitespace:function(ch){return(ch===' '||ch==='\r'||ch==='\t'||ch==='\n'||ch==='\v'||ch==='\u00A0');},isIdent:function(ch){return('a'<=ch&&ch<='z'||'A'<=ch&&ch<='Z'||'_'===ch||ch==='$');},isExpOperator:function(ch){return(ch==='-'||ch==='+'||this.isNumber(ch));},throwError:function(error,start,end){end=end||this.index;var colStr=(isDefined(start)?'s '+start+'-'+this.index+' ['+this.text.substring(start,end)+']':' '+end);throw $parseMinErr('lexerr','Lexer Error: {0} at column{1} in expression [{2}].',error,colStr,this.text);},readNumber:function(){var number='';var start=this.index;while(this.index<this.text.length){var ch=lowercase(this.text.charAt(this.index));if(ch=='.'||this.isNumber(ch)){number+=ch;}else{var peekCh=this.peek();if(ch=='e'&&this.isExpOperator(peekCh)){number+=ch;}else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&number.charAt(number.length-1)=='e'){number+=ch;}else if(this.isExpOperator(ch)&&(!peekCh||!this.isNumber(peekCh))&&number.charAt(number.length-1)=='e'){this.throwError('Invalid exponent');}else{break;}}
this.index++;}
this.tokens.push({index:start,text:number,constant:true,value:Number(number)});},readIdent:function(){var start=this.index;while(this.index<this.text.length){var ch=this.text.charAt(this.index);if(!(this.isIdent(ch)||this.isNumber(ch))){break;}
this.index++;}
this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:true});},readString:function(quote){var start=this.index;this.index++;var string='';var rawString=quote;var escape=false;while(this.index<this.text.length){var ch=this.text.charAt(this.index);rawString+=ch;if(escape){if(ch==='u'){var hex=this.text.substring(this.index+1,this.index+5);if(!hex.match(/[\da-f]{4}/i))
this.throwError('Invalid unicode escape [\\u'+hex+']');this.index+=4;string+=String.fromCharCode(parseInt(hex,16));}else{var rep=ESCAPE[ch];string=string+(rep||ch);}
escape=false;}else if(ch==='\\'){escape=true;}else if(ch===quote){this.index++;this.tokens.push({index:start,text:rawString,constant:true,value:string});return;}else{string+=ch;}
this.index++;}
this.throwError('Unterminated quote',start);}};function isConstant(exp){return exp.constant;}
var Parser=function(lexer,$filter,options){this.lexer=lexer;this.$filter=$filter;this.options=options;};Parser.ZERO=extend(function(){return 0;},{sharedGetter:true,constant:true});Parser.prototype={constructor:Parser,parse:function(text){this.text=text;this.tokens=this.lexer.lex(text);var value=this.statements();if(this.tokens.length!==0){this.throwError('is an unexpected token',this.tokens[0]);}
value.literal=!!value.literal;value.constant=!!value.constant;return value;},primary:function(){var primary;if(this.expect('(')){primary=this.filterChain();this.consume(')');}else if(this.expect('[')){primary=this.arrayDeclaration();}else if(this.expect('{')){primary=this.object();}else if(this.peek().identifier&&this.peek().text in CONSTANTS){primary=CONSTANTS[this.consume().text];}else if(this.peek().identifier){primary=this.identifier();}else if(this.peek().constant){primary=this.constant();}else{this.throwError('not a primary expression',this.peek());}
var next,context;while((next=this.expect('(','[','.'))){if(next.text==='('){primary=this.functionCall(primary,context);context=null;}else if(next.text==='['){context=primary;primary=this.objectIndex(primary);}else if(next.text==='.'){context=primary;primary=this.fieldAccess(primary);}else{this.throwError('IMPOSSIBLE');}}
return primary;},throwError:function(msg,token){throw $parseMinErr('syntax','Syntax Error: Token \'{0}\' {1} at column {2} of the expression [{3}] starting at [{4}].',token.text,msg,(token.index+1),this.text,this.text.substring(token.index));},peekToken:function(){if(this.tokens.length===0)
throw $parseMinErr('ueoe','Unexpected end of expression: {0}',this.text);return this.tokens[0];},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4);},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i];var t=token.text;if(t===e1||t===e2||t===e3||t===e4||(!e1&&!e2&&!e3&&!e4)){return token;}}
return false;},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);if(token){this.tokens.shift();return token;}
return false;},consume:function(e1){if(this.tokens.length===0){throw $parseMinErr('ueoe','Unexpected end of expression: {0}',this.text);}
var token=this.expect(e1);if(!token){this.throwError('is unexpected, expecting ['+e1+']',this.peek());}
return token;},unaryFn:function(op,right){var fn=OPERATORS[op];return extend(function $parseUnaryFn(self,locals){return fn(self,locals,right);},{constant:right.constant,inputs:[right]});},binaryFn:function(left,op,right,isBranching){var fn=OPERATORS[op];return extend(function $parseBinaryFn(self,locals){return fn(self,locals,left,right);},{constant:left.constant&&right.constant,inputs:!isBranching&&[left,right]});},identifier:function(){var id=this.consume().text;while(this.peek('.')&&this.peekAhead(1).identifier&&!this.peekAhead(2,'(')){id+=this.consume().text+this.consume().text;}
return getterFn(id,this.options,this.text);},constant:function(){var value=this.consume().value;return extend(function $parseConstant(){return value;},{constant:true,literal:true});},statements:function(){var statements=[];while(true){if(this.tokens.length>0&&!this.peek('}',')',';',']'))
statements.push(this.filterChain());if(!this.expect(';')){return(statements.length===1)?statements[0]:function $parseStatements(self,locals){var value;for(var i=0,ii=statements.length;i<ii;i++){value=statements[i](self,locals);}
return value;};}}},filterChain:function(){var left=this.expression();var token;while((token=this.expect('|'))){left=this.filter(left);}
return left;},filter:function(inputFn){var fn=this.$filter(this.consume().text);var argsFn;var args;if(this.peek(':')){argsFn=[];args=[];while(this.expect(':')){argsFn.push(this.expression());}}
var inputs=[inputFn].concat(argsFn||[]);return extend(function $parseFilter(self,locals){var input=inputFn(self,locals);if(args){args[0]=input;var i=argsFn.length;while(i--){args[i+1]=argsFn[i](self,locals);}
return fn.apply(undefined,args);}
return fn(input);},{constant:!fn.$stateful&&inputs.every(isConstant),inputs:!fn.$stateful&&inputs});},expression:function(){return this.assignment();},assignment:function(){var left=this.ternary();var right;var token;if((token=this.expect('='))){if(!left.assign){this.throwError('implies assignment but ['+
this.text.substring(0,token.index)+'] can not be assigned to',token);}
right=this.ternary();return extend(function $parseAssignment(scope,locals){return left.assign(scope,right(scope,locals),locals);},{inputs:[left,right]});}
return left;},ternary:function(){var left=this.logicalOR();var middle;var token;if((token=this.expect('?'))){middle=this.assignment();if(this.consume(':')){var right=this.assignment();return extend(function $parseTernary(self,locals){return left(self,locals)?middle(self,locals):right(self,locals);},{constant:left.constant&&middle.constant&&right.constant});}}
return left;},logicalOR:function(){var left=this.logicalAND();var token;while((token=this.expect('||'))){left=this.binaryFn(left,token.text,this.logicalAND(),true);}
return left;},logicalAND:function(){var left=this.equality();var token;while((token=this.expect('&&'))){left=this.binaryFn(left,token.text,this.equality(),true);}
return left;},equality:function(){var left=this.relational();var token;while((token=this.expect('==','!=','===','!=='))){left=this.binaryFn(left,token.text,this.relational());}
return left;},relational:function(){var left=this.additive();var token;while((token=this.expect('<','>','<=','>='))){left=this.binaryFn(left,token.text,this.additive());}
return left;},additive:function(){var left=this.multiplicative();var token;while((token=this.expect('+','-'))){left=this.binaryFn(left,token.text,this.multiplicative());}
return left;},multiplicative:function(){var left=this.unary();var token;while((token=this.expect('*','/','%'))){left=this.binaryFn(left,token.text,this.unary());}
return left;},unary:function(){var token;if(this.expect('+')){return this.primary();}else if((token=this.expect('-'))){return this.binaryFn(Parser.ZERO,token.text,this.unary());}else if((token=this.expect('!'))){return this.unaryFn(token.text,this.unary());}else{return this.primary();}},fieldAccess:function(object){var getter=this.identifier();return extend(function $parseFieldAccess(scope,locals,self){var o=self||object(scope,locals);return(o==null)?undefined:getter(o);},{assign:function(scope,value,locals){var o=object(scope,locals);if(!o)object.assign(scope,o={},locals);return getter.assign(o,value);}});},objectIndex:function(obj){var expression=this.text;var indexFn=this.expression();this.consume(']');return extend(function $parseObjectIndex(self,locals){var o=obj(self,locals),i=indexFn(self,locals),v;ensureSafeMemberName(i,expression);if(!o)return undefined;v=ensureSafeObject(o[i],expression);return v;},{assign:function(self,value,locals){var key=ensureSafeMemberName(indexFn(self,locals),expression);var o=ensureSafeObject(obj(self,locals),expression);if(!o)obj.assign(self,o={},locals);return o[key]=value;}});},functionCall:function(fnGetter,contextGetter){var argsFn=[];if(this.peekToken().text!==')'){do{argsFn.push(this.expression());}while(this.expect(','));}
this.consume(')');var expressionText=this.text;var args=argsFn.length?[]:null;return function $parseFunctionCall(scope,locals){var context=contextGetter?contextGetter(scope,locals):isDefined(contextGetter)?undefined:scope;var fn=fnGetter(scope,locals,context)||noop;if(args){var i=argsFn.length;while(i--){args[i]=ensureSafeObject(argsFn[i](scope,locals),expressionText);}}
ensureSafeObject(context,expressionText);ensureSafeFunction(fn,expressionText);var v=fn.apply?fn.apply(context,args):fn(args[0],args[1],args[2],args[3],args[4]);if(args){args.length=0;}
return ensureSafeObject(v,expressionText);};},arrayDeclaration:function(){var elementFns=[];if(this.peekToken().text!==']'){do{if(this.peek(']')){break;}
elementFns.push(this.expression());}while(this.expect(','));}
this.consume(']');return extend(function $parseArrayLiteral(self,locals){var array=[];for(var i=0,ii=elementFns.length;i<ii;i++){array.push(elementFns[i](self,locals));}
return array;},{literal:true,constant:elementFns.every(isConstant),inputs:elementFns});},object:function(){var keys=[],valueFns=[];if(this.peekToken().text!=='}'){do{if(this.peek('}')){break;}
var token=this.consume();if(token.constant){keys.push(token.value);}else if(token.identifier){keys.push(token.text);}else{this.throwError("invalid key",token);}
this.consume(':');valueFns.push(this.expression());}while(this.expect(','));}
this.consume('}');return extend(function $parseObjectLiteral(self,locals){var object={};for(var i=0,ii=valueFns.length;i<ii;i++){object[keys[i]]=valueFns[i](self,locals);}
return object;},{literal:true,constant:valueFns.every(isConstant),inputs:valueFns});}};function setter(obj,locals,path,setValue,fullExp){ensureSafeObject(obj,fullExp);ensureSafeObject(locals,fullExp);var element=path.split('.'),key;for(var i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=(i===0&&locals&&locals[key])||obj[key];if(!propertyObj){propertyObj={};obj[key]=propertyObj;}
obj=ensureSafeObject(propertyObj,fullExp);}
key=ensureSafeMemberName(element.shift(),fullExp);ensureSafeObject(obj[key],fullExp);obj[key]=setValue;return setValue;}
var getterFnCacheDefault=createMap();var getterFnCacheExpensive=createMap();function isPossiblyDangerousMemberName(name){return name=='constructor';}
function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,expensiveChecks){ensureSafeMemberName(key0,fullExp);ensureSafeMemberName(key1,fullExp);ensureSafeMemberName(key2,fullExp);ensureSafeMemberName(key3,fullExp);ensureSafeMemberName(key4,fullExp);var eso=function(o){return ensureSafeObject(o,fullExp);};var eso0=(expensiveChecks||isPossiblyDangerousMemberName(key0))?eso:identity;var eso1=(expensiveChecks||isPossiblyDangerousMemberName(key1))?eso:identity;var eso2=(expensiveChecks||isPossiblyDangerousMemberName(key2))?eso:identity;var eso3=(expensiveChecks||isPossiblyDangerousMemberName(key3))?eso:identity;var eso4=(expensiveChecks||isPossiblyDangerousMemberName(key4))?eso:identity;return function cspSafeGetter(scope,locals){var pathVal=(locals&&locals.hasOwnProperty(key0))?locals:scope;if(pathVal==null)return pathVal;pathVal=eso0(pathVal[key0]);if(!key1)return pathVal;if(pathVal==null)return undefined;pathVal=eso1(pathVal[key1]);if(!key2)return pathVal;if(pathVal==null)return undefined;pathVal=eso2(pathVal[key2]);if(!key3)return pathVal;if(pathVal==null)return undefined;pathVal=eso3(pathVal[key3]);if(!key4)return pathVal;if(pathVal==null)return undefined;pathVal=eso4(pathVal[key4]);return pathVal;};}
function getterFnWithEnsureSafeObject(fn,fullExpression){return function(s,l){return fn(s,l,ensureSafeObject,fullExpression);};}
function getterFn(path,options,fullExp){var expensiveChecks=options.expensiveChecks;var getterFnCache=(expensiveChecks?getterFnCacheExpensive:getterFnCacheDefault);var fn=getterFnCache[path];if(fn)return fn;var pathKeys=path.split('.'),pathKeysLength=pathKeys.length;if(options.csp){if(pathKeysLength<6){fn=cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,expensiveChecks);}else{fn=function cspSafeGetter(scope,locals){var i=0,val;do{val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,expensiveChecks)(scope,locals);locals=undefined;scope=val;}while(i<pathKeysLength);return val;};}}else{var code='';if(expensiveChecks){code+='s = eso(s, fe);\nl = eso(l, fe);\n';}
var needsEnsureSafeObject=expensiveChecks;forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp);var lookupJs=(index?'s':'((l&&l.hasOwnProperty("'+key+'"))?l:s)')+'.'+key;if(expensiveChecks||isPossiblyDangerousMemberName(key)){lookupJs='eso('+lookupJs+', fe)';needsEnsureSafeObject=true;}
code+='if(s == null) return undefined;\n'+'s='+lookupJs+';\n';});code+='return s;';var evaledFnGetter=new Function('s','l','eso','fe',code);evaledFnGetter.toString=valueFn(code);if(needsEnsureSafeObject){evaledFnGetter=getterFnWithEnsureSafeObject(evaledFnGetter,fullExp);}
fn=evaledFnGetter;}
fn.sharedGetter=true;fn.assign=function(self,value,locals){return setter(self,locals,path,value,path);};getterFnCache[path]=fn;return fn;}
var objectValueOf=Object.prototype.valueOf;function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value);}
function $ParseProvider(){var cacheDefault=createMap();var cacheExpensive=createMap();this.$get=['$filter','$sniffer',function($filter,$sniffer){var $parseOptions={csp:$sniffer.csp,expensiveChecks:false},$parseOptionsExpensive={csp:$sniffer.csp,expensiveChecks:true};function wrapSharedExpression(exp){var wrapped=exp;if(exp.sharedGetter){wrapped=function $parseWrapper(self,locals){return exp(self,locals);};wrapped.literal=exp.literal;wrapped.constant=exp.constant;wrapped.assign=exp.assign;}
return wrapped;}
return function $parse(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case'string':cacheKey=exp=exp.trim();var cache=(expensiveChecks?cacheExpensive:cacheDefault);parsedExpression=cache[cacheKey];if(!parsedExpression){if(exp.charAt(0)===':'&&exp.charAt(1)===':'){oneTime=true;exp=exp.substring(2);}
var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions;var lexer=new Lexer(parseOptions);var parser=new Parser(lexer,$filter,parseOptions);parsedExpression=parser.parse(exp);if(parsedExpression.constant){parsedExpression.$$watchDelegate=constantWatchDelegate;}else if(oneTime){parsedExpression=wrapSharedExpression(parsedExpression);parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate;}else if(parsedExpression.inputs){parsedExpression.$$watchDelegate=inputsWatchDelegate;}
cache[cacheKey]=parsedExpression;}
return addInterceptor(parsedExpression,interceptorFn);case'function':return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn);}};function collectExpressionInputs(inputs,list){for(var i=0,ii=inputs.length;i<ii;i++){var input=inputs[i];if(!input.constant){if(input.inputs){collectExpressionInputs(input.inputs,list);}else if(list.indexOf(input)===-1){list.push(input);}}}
return list;}
function expressionInputDirtyCheck(newValue,oldValueOfValue){if(newValue==null||oldValueOfValue==null){return newValue===oldValueOfValue;}
if(typeof newValue==='object'){newValue=getValueOf(newValue);if(typeof newValue==='object'){return false;}}
return newValue===oldValueOfValue||(newValue!==newValue&&oldValueOfValue!==oldValueOfValue);}
function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression){var inputExpressions=parsedExpression.$$inputs||(parsedExpression.$$inputs=collectExpressionInputs(parsedExpression.inputs,[]));var lastResult;if(inputExpressions.length===1){var oldInputValue=expressionInputDirtyCheck;inputExpressions=inputExpressions[0];return scope.$watch(function expressionInputWatch(scope){var newInputValue=inputExpressions(scope);if(!expressionInputDirtyCheck(newInputValue,oldInputValue)){lastResult=parsedExpression(scope);oldInputValue=newInputValue&&getValueOf(newInputValue);}
return lastResult;},listener,objectEquality);}
var oldInputValueOfValues=[];for(var i=0,ii=inputExpressions.length;i<ii;i++){oldInputValueOfValues[i]=expressionInputDirtyCheck;}
return scope.$watch(function expressionInputsWatch(scope){var changed=false;for(var i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);if(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i]))){oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue);}}
if(changed){lastResult=parsedExpression(scope);}
return lastResult;},listener,objectEquality);}
function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function oneTimeWatch(scope){return parsedExpression(scope);},function oneTimeListener(value,old,scope){lastValue=value;if(isFunction(listener)){listener.apply(this,arguments);}
if(isDefined(value)){scope.$$postDigest(function(){if(isDefined(lastValue)){unwatch();}});}},objectEquality);}
function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function oneTimeWatch(scope){return parsedExpression(scope);},function oneTimeListener(value,old,scope){lastValue=value;if(isFunction(listener)){listener.call(this,value,old,scope);}
if(isAllDefined(value)){scope.$$postDigest(function(){if(isAllDefined(lastValue))unwatch();});}},objectEquality);function isAllDefined(value){var allDefined=true;forEach(value,function(val){if(!isDefined(val))allDefined=false;});return allDefined;}}
function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function constantWatch(scope){return parsedExpression(scope);},function constantListener(value,old,scope){if(isFunction(listener)){listener.apply(this,arguments);}
unwatch();},objectEquality);}
function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate;var regularWatch=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate;var fn=regularWatch?function regularInterceptedExpression(scope,locals){var value=parsedExpression(scope,locals);return interceptorFn(value,scope,locals);}:function oneTimeInterceptedExpression(scope,locals){var value=parsedExpression(scope,locals);var result=interceptorFn(value,scope,locals);return isDefined(value)?result:value;};if(parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate){fn.$$watchDelegate=parsedExpression.$$watchDelegate;}else if(!interceptorFn.$stateful){fn.$$watchDelegate=inputsWatchDelegate;fn.inputs=[parsedExpression];}
return fn;}}];}
function $QProvider(){this.$get=['$rootScope','$exceptionHandler',function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback);},$exceptionHandler);}];}
function $$QProvider(){this.$get=['$browser','$exceptionHandler',function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback);},$exceptionHandler);}];}
function qFactory(nextTick,exceptionHandler){var $qMinErr=minErr('$q',TypeError);function callOnce(self,resolveFn,rejectFn){var called=false;function wrap(fn){return function(value){if(called)return;called=true;fn.call(self,value);};}
return[wrap(resolveFn),wrap(rejectFn)];}
var defer=function(){return new Deferred();};function Promise(){this.$$state={status:0};}
Promise.prototype={then:function(onFulfilled,onRejected,progressBack){var result=new Deferred();this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]);if(this.$$state.status>0)scheduleProcessQueue(this.$$state);return result.promise;},"catch":function(callback){return this.then(null,callback);},"finally":function(callback,progressBack){return this.then(function(value){return handleCallback(value,true,callback);},function(error){return handleCallback(error,false,callback);},progressBack);}};function simpleBind(context,fn){return function(value){fn.call(context,value);};}
function processQueue(state){var fn,promise,pending;pending=state.pending;state.processScheduled=false;state.pending=undefined;for(var i=0,ii=pending.length;i<ii;++i){promise=pending[i][0];fn=pending[i][state.status];try{if(isFunction(fn)){promise.resolve(fn(state.value));}else if(state.status===1){promise.resolve(state.value);}else{promise.reject(state.value);}}catch(e){promise.reject(e);exceptionHandler(e);}}}
function scheduleProcessQueue(state){if(state.processScheduled||!state.pending)return;state.processScheduled=true;nextTick(function(){processQueue(state);});}
function Deferred(){this.promise=new Promise();this.resolve=simpleBind(this,this.resolve);this.reject=simpleBind(this,this.reject);this.notify=simpleBind(this,this.notify);}
Deferred.prototype={resolve:function(val){if(this.promise.$$state.status)return;if(val===this.promise){this.$$reject($qMinErr('qcycle',"Expected promise to be resolved with value other than itself '{0}'",val));}else{this.$$resolve(val);}},$$resolve:function(val){var then,fns;fns=callOnce(this,this.$$resolve,this.$$reject);try{if((isObject(val)||isFunction(val)))then=val&&val.then;if(isFunction(then)){this.promise.$$state.status=-1;then.call(val,fns[0],fns[1],this.notify);}else{this.promise.$$state.value=val;this.promise.$$state.status=1;scheduleProcessQueue(this.promise.$$state);}}catch(e){fns[1](e);exceptionHandler(e);}},reject:function(reason){if(this.promise.$$state.status)return;this.$$reject(reason);},$$reject:function(reason){this.promise.$$state.value=reason;this.promise.$$state.status=2;scheduleProcessQueue(this.promise.$$state);},notify:function(progress){var callbacks=this.promise.$$state.pending;if((this.promise.$$state.status<=0)&&callbacks&&callbacks.length){nextTick(function(){var callback,result;for(var i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0];callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress);}catch(e){exceptionHandler(e);}}});}}};var reject=function(reason){var result=new Deferred();result.reject(reason);return result.promise;};var makePromise=function makePromise(value,resolved){var result=new Deferred();if(resolved){result.resolve(value);}else{result.reject(value);}
return result.promise;};var handleCallback=function handleCallback(value,isResolved,callback){var callbackOutput=null;try{if(isFunction(callback))callbackOutput=callback();}catch(e){return makePromise(e,false);}
if(isPromiseLike(callbackOutput)){return callbackOutput.then(function(){return makePromise(value,isResolved);},function(error){return makePromise(error,false);});}else{return makePromise(value,isResolved);}};var when=function(value,callback,errback,progressBack){var result=new Deferred();result.resolve(value);return result.promise.then(callback,errback,progressBack);};function all(promises){var deferred=new Deferred(),counter=0,results=isArray(promises)?[]:{};forEach(promises,function(promise,key){counter++;when(promise).then(function(value){if(results.hasOwnProperty(key))return;results[key]=value;if(!(--counter))deferred.resolve(results);},function(reason){if(results.hasOwnProperty(key))return;deferred.reject(reason);});});if(counter===0){deferred.resolve(results);}
return deferred.promise;}
var $Q=function Q(resolver){if(!isFunction(resolver)){throw $qMinErr('norslvr',"Expected resolverFn, got '{0}'",resolver);}
if(!(this instanceof Q)){return new Q(resolver);}
var deferred=new Deferred();function resolveFn(value){deferred.resolve(value);}
function rejectFn(reason){deferred.reject(reason);}
resolver(resolveFn,rejectFn);return deferred.promise;};$Q.defer=defer;$Q.reject=reject;$Q.when=when;$Q.all=all;return $Q;}
function $$RAFProvider(){this.$get=['$window','$timeout',function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame;var cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame;var rafSupported=!!requestAnimationFrame;var raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id);};}:function(fn){var timer=$timeout(fn,16.66,false);return function(){$timeout.cancel(timer);};};raf.supported=rafSupported;return raf;}];}
function $RootScopeProvider(){var TTL=10;var $rootScopeMinErr=minErr('$rootScope');var lastDirtyWatch=null;var applyAsyncId=null;this.digestTtl=function(value){if(arguments.length){TTL=value;}
return TTL;};function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=nextUid();this.$$ChildScope=null;}
ChildScope.prototype=parent;return ChildScope;}
this.$get=['$injector','$exceptionHandler','$parse','$browser',function($injector,$exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=true;}
function Scope(){this.$id=nextUid();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=false;this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings=null;}
Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;parent=parent||this;if(isolate){child=new Scope();child.$root=this.$root;}else{if(!this.$$ChildScope){this.$$ChildScope=createChildScopeClass(this);}
child=new this.$$ChildScope();}
child.$parent=parent;child.$$prevSibling=parent.$$childTail;if(parent.$$childHead){parent.$$childTail.$$nextSibling=child;parent.$$childTail=child;}else{parent.$$childHead=parent.$$childTail=child;}
if(isolate||parent!=this)child.$on('$destroy',destroyChildScope);return child;},$watch:function(watchExp,listener,objectEquality){var get=$parse(watchExp);if(get.$$watchDelegate){return get.$$watchDelegate(this,listener,objectEquality,get);}
var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};lastDirtyWatch=null;if(!isFunction(listener)){watcher.fn=noop;}
if(!array){array=scope.$$watchers=[];}
array.unshift(watcher);return function deregisterWatch(){arrayRemove(array,watcher);lastDirtyWatch=null;};},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length);var newValues=new Array(watchExpressions.length);var deregisterFns=[];var self=this;var changeReactionScheduled=false;var firstRun=true;if(!watchExpressions.length){var shouldCall=true;self.$evalAsync(function(){if(shouldCall)listener(newValues,newValues,self);});return function deregisterWatchGroup(){shouldCall=false;};}
if(watchExpressions.length===1){return this.$watch(watchExpressions[0],function watchGroupAction(value,oldValue,scope){newValues[0]=value;oldValues[0]=oldValue;listener(newValues,(value===oldValue)?newValues:oldValues,scope);});}
forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function watchGroupSubAction(value,oldValue){newValues[i]=value;oldValues[i]=oldValue;if(!changeReactionScheduled){changeReactionScheduled=true;self.$evalAsync(watchGroupAction);}});deregisterFns.push(unwatchFn);});function watchGroupAction(){changeReactionScheduled=false;if(firstRun){firstRun=false;listener(newValues,newValues,self);}else{listener(newValues,oldValues,self);}}
return function deregisterWatchGroup(){while(deregisterFns.length){deregisterFns.shift()();}};},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$stateful=true;var self=this;var newValue;var oldValue;var veryOldValue;var trackVeryOldValue=(listener.length>1);var changeDetected=0;var changeDetector=$parse(obj,$watchCollectionInterceptor);var internalArray=[];var internalObject={};var initRun=true;var oldLength=0;function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(isUndefined(newValue))return;if(!isObject(newValue)){if(oldValue!==newValue){oldValue=newValue;changeDetected++;}}else if(isArrayLike(newValue)){if(oldValue!==internalArray){oldValue=internalArray;oldLength=oldValue.length=0;changeDetected++;}
newLength=newValue.length;if(oldLength!==newLength){changeDetected++;oldValue.length=oldLength=newLength;}
for(var i=0;i<newLength;i++){oldItem=oldValue[i];newItem=newValue[i];bothNaN=(oldItem!==oldItem)&&(newItem!==newItem);if(!bothNaN&&(oldItem!==newItem)){changeDetected++;oldValue[i]=newItem;}}}else{if(oldValue!==internalObject){oldValue=internalObject={};oldLength=0;changeDetected++;}
newLength=0;for(key in newValue){if(newValue.hasOwnProperty(key)){newLength++;newItem=newValue[key];oldItem=oldValue[key];if(key in oldValue){bothNaN=(oldItem!==oldItem)&&(newItem!==newItem);if(!bothNaN&&(oldItem!==newItem)){changeDetected++;oldValue[key]=newItem;}}else{oldLength++;oldValue[key]=newItem;changeDetected++;}}}
if(oldLength>newLength){changeDetected++;for(key in oldValue){if(!newValue.hasOwnProperty(key)){oldLength--;delete oldValue[key];}}}}
return changeDetected;}
function $watchCollectionAction(){if(initRun){initRun=false;listener(newValue,newValue,self);}else{listener(newValue,veryOldValue,self);}
if(trackVeryOldValue){if(!isObject(newValue)){veryOldValue=newValue;}else if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++){veryOldValue[i]=newValue[i];}}else{veryOldValue={};for(var key in newValue){if(hasOwnProperty.call(newValue,key)){veryOldValue[key]=newValue[key];}}}}}
return this.$watch(changeDetector,$watchCollectionAction);},$digest:function(){var watch,value,last,watchers,length,dirty,ttl=TTL,next,current,target=this,watchLog=[],logIdx,logMsg,asyncTask;beginPhase('$digest');$browser.$$checkUrlChange();if(this===$rootScope&&applyAsyncId!==null){$browser.defer.cancel(applyAsyncId);flushApplyAsync();}
lastDirtyWatch=null;do{dirty=false;current=target;while(asyncQueue.length){try{asyncTask=asyncQueue.shift();asyncTask.scope.$eval(asyncTask.expression,asyncTask.locals);}catch(e){$exceptionHandler(e);}
lastDirtyWatch=null;}
traverseScopesLoop:do{if((watchers=current.$$watchers)){length=watchers.length;while(length--){try{watch=watchers[length];if(watch){if((value=watch.get(current))!==(last=watch.last)&&!(watch.eq?equals(value,last):(typeof value==='number'&&typeof last==='number'&&isNaN(value)&&isNaN(last)))){dirty=true;lastDirtyWatch=watch;watch.last=watch.eq?copy(value,null):value;watch.fn(value,((last===initWatchVal)?value:last),current);if(ttl<5){logIdx=4-ttl;if(!watchLog[logIdx])watchLog[logIdx]=[];watchLog[logIdx].push({msg:isFunction(watch.exp)?'fn: '+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last});}}else if(watch===lastDirtyWatch){dirty=false;break traverseScopesLoop;}}}catch(e){$exceptionHandler(e);}}}
if(!(next=(current.$$childHead||(current!==target&&current.$$nextSibling)))){while(current!==target&&!(next=current.$$nextSibling)){current=current.$parent;}}}while((current=next));if((dirty||asyncQueue.length)&&!(ttl--)){clearPhase();throw $rootScopeMinErr('infdig','{0} $digest() iterations reached. Aborting!\n'+'Watchers fired in the last 5 iterations: {1}',TTL,watchLog);}}while(dirty||asyncQueue.length);clearPhase();while(postDigestQueue.length){try{postDigestQueue.shift()();}catch(e){$exceptionHandler(e);}}},$destroy:function(){if(this.$$destroyed)return;var parent=this.$parent;this.$broadcast('$destroy');this.$$destroyed=true;if(this===$rootScope)return;for(var eventName in this.$$listenerCount){decrementListenerCount(this,this.$$listenerCount[eventName],eventName);}
if(parent.$$childHead==this)parent.$$childHead=this.$$nextSibling;if(parent.$$childTail==this)parent.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop;this.$on=this.$watch=this.$watchGroup=function(){return noop;};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null;},$eval:function(expr,locals){return $parse(expr)(this,locals);},$evalAsync:function(expr,locals){if(!$rootScope.$$phase&&!asyncQueue.length){$browser.defer(function(){if(asyncQueue.length){$rootScope.$digest();}});}
asyncQueue.push({scope:this,expression:expr,locals:locals});},$$postDigest:function(fn){postDigestQueue.push(fn);},$apply:function(expr){try{beginPhase('$apply');return this.$eval(expr);}catch(e){$exceptionHandler(e);}finally{clearPhase();try{$rootScope.$digest();}catch(e){$exceptionHandler(e);throw e;}}},$applyAsync:function(expr){var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression);scheduleApplyAsync();function $applyAsyncExpression(){scope.$eval(expr);}},$on:function(name,listener){var namedListeners=this.$$listeners[name];if(!namedListeners){this.$$listeners[name]=namedListeners=[];}
namedListeners.push(listener);var current=this;do{if(!current.$$listenerCount[name]){current.$$listenerCount[name]=0;}
current.$$listenerCount[name]++;}while((current=current.$parent));var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);if(indexOfListener!==-1){namedListeners[indexOfListener]=null;decrementListenerCount(self,1,name);}};},$emit:function(name,args){var empty=[],namedListeners,scope=this,stopPropagation=false,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=true;},preventDefault:function(){event.defaultPrevented=true;},defaultPrevented:false},listenerArgs=concat([event],arguments,1),i,length;do{namedListeners=scope.$$listeners[name]||empty;event.currentScope=scope;for(i=0,length=namedListeners.length;i<length;i++){if(!namedListeners[i]){namedListeners.splice(i,1);i--;length--;continue;}
try{namedListeners[i].apply(null,listenerArgs);}catch(e){$exceptionHandler(e);}}
if(stopPropagation){event.currentScope=null;return event;}
scope=scope.$parent;}while(scope);event.currentScope=null;return event;},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=true;},defaultPrevented:false};if(!target.$$listenerCount[name])return event;var listenerArgs=concat([event],arguments,1),listeners,i,length;while((current=next)){event.currentScope=current;listeners=current.$$listeners[name]||[];for(i=0,length=listeners.length;i<length;i++){if(!listeners[i]){listeners.splice(i,1);i--;length--;continue;}
try{listeners[i].apply(null,listenerArgs);}catch(e){$exceptionHandler(e);}}
if(!(next=((current.$$listenerCount[name]&&current.$$childHead)||(current!==target&&current.$$nextSibling)))){while(current!==target&&!(next=current.$$nextSibling)){current=current.$parent;}}}
event.currentScope=null;return event;}};var $rootScope=new Scope();var asyncQueue=$rootScope.$$asyncQueue=[];var postDigestQueue=$rootScope.$$postDigestQueue=[];var applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope;function beginPhase(phase){if($rootScope.$$phase){throw $rootScopeMinErr('inprog','{0} already in progress',$rootScope.$$phase);}
$rootScope.$$phase=phase;}
function clearPhase(){$rootScope.$$phase=null;}
function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count;if(current.$$listenerCount[name]===0){delete current.$$listenerCount[name];}}while((current=current.$parent));}
function initWatchVal(){}
function flushApplyAsync(){while(applyAsyncQueue.length){try{applyAsyncQueue.shift()();}catch(e){$exceptionHandler(e);}}
applyAsyncId=null;}
function scheduleApplyAsync(){if(applyAsyncId===null){applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync);});}}}];}
function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){aHrefSanitizationWhitelist=regexp;return this;}
return aHrefSanitizationWhitelist;};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){imgSrcSanitizationWhitelist=regexp;return this;}
return imgSrcSanitizationWhitelist;};this.$get=function(){return function sanitizeUri(uri,isImage){var regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;var normalizedVal;normalizedVal=urlResolve(uri).href;if(normalizedVal!==''&&!normalizedVal.match(regex)){return'unsafe:'+normalizedVal;}
return uri;};};}
var $sceMinErr=minErr('$sce');var SCE_CONTEXTS={HTML:'html',CSS:'css',URL:'url',RESOURCE_URL:'resourceUrl',JS:'js'};function adjustMatcher(matcher){if(matcher==='self'){return matcher;}else if(isString(matcher)){if(matcher.indexOf('***')>-1){throw $sceMinErr('iwcard','Illegal sequence *** in string matcher.  String: {0}',matcher);}
matcher=escapeForRegexp(matcher).replace('\\*\\*','.*').replace('\\*','[^:/.?&;]*');return new RegExp('^'+matcher+'$');}else if(isRegExp(matcher)){return new RegExp('^'+matcher.source+'$');}else{throw $sceMinErr('imatcher','Matchers may only be "self", string patterns or RegExp objects');}}
function adjustMatchers(matchers){var adjustedMatchers=[];if(isDefined(matchers)){forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher));});}
return adjustedMatchers;}
function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=['self'],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){if(arguments.length){resourceUrlWhitelist=adjustMatchers(value);}
return resourceUrlWhitelist;};this.resourceUrlBlacklist=function(value){if(arguments.length){resourceUrlBlacklist=adjustMatchers(value);}
return resourceUrlBlacklist;};this.$get=['$injector',function($injector){var htmlSanitizer=function htmlSanitizer(html){throw $sceMinErr('unsafe','Attempting to use an unsafe value in a safe context.');};if($injector.has('$sanitize')){htmlSanitizer=$injector.get('$sanitize');}
function matchUrl(matcher,parsedUrl){if(matcher==='self'){return urlIsSameOrigin(parsedUrl);}else{return!!matcher.exec(parsedUrl.href);}}
function isResourceUrlAllowedByPolicy(url){var parsedUrl=urlResolve(url.toString());var i,n,allowed=false;for(i=0,n=resourceUrlWhitelist.length;i<n;i++){if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=true;break;}}
if(allowed){for(i=0,n=resourceUrlBlacklist.length;i<n;i++){if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=false;break;}}}
return allowed;}
function generateHolderType(Base){var holderType=function TrustedValueHolderType(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue;};};if(Base){holderType.prototype=new Base();}
holderType.prototype.valueOf=function sceValueOf(){return this.$$unwrapTrustedValue();};holderType.prototype.toString=function sceToString(){return this.$$unwrapTrustedValue().toString();};return holderType;}
var trustedValueHolderBase=generateHolderType(),byType={};byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]);function trustAs(type,trustedValue){var Constructor=(byType.hasOwnProperty(type)?byType[type]:null);if(!Constructor){throw $sceMinErr('icontext','Attempted to trust a value in invalid context. Context: {0}; Value: {1}',type,trustedValue);}
if(trustedValue===null||trustedValue===undefined||trustedValue===''){return trustedValue;}
if(typeof trustedValue!=='string'){throw $sceMinErr('itype','Attempted to trust a non-string value in a content requiring a string: Context: {0}',type);}
return new Constructor(trustedValue);}
function valueOf(maybeTrusted){if(maybeTrusted instanceof trustedValueHolderBase){return maybeTrusted.$$unwrapTrustedValue();}else{return maybeTrusted;}}
function getTrusted(type,maybeTrusted){if(maybeTrusted===null||maybeTrusted===undefined||maybeTrusted===''){return maybeTrusted;}
var constructor=(byType.hasOwnProperty(type)?byType[type]:null);if(constructor&&maybeTrusted instanceof constructor){return maybeTrusted.$$unwrapTrustedValue();}
if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted)){return maybeTrusted;}else{throw $sceMinErr('insecurl','Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}',maybeTrusted.toString());}}else if(type===SCE_CONTEXTS.HTML){return htmlSanitizer(maybeTrusted);}
throw $sceMinErr('unsafe','Attempting to use an unsafe value in a safe context.');}
return{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf};}];}
function $SceProvider(){var enabled=true;this.enabled=function(value){if(arguments.length){enabled=!!value;}
return enabled;};this.$get=['$parse','$sceDelegate',function($parse,$sceDelegate){if(enabled&&msie<8){throw $sceMinErr('iequirks','Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks '+'mode.  You can fix this by adding the text <!doctype html> to the top of your HTML '+'document.  See http://docs.angularjs.org/api/ng.$sce for more information.');}
var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled;};sce.trustAs=$sceDelegate.trustAs;sce.getTrusted=$sceDelegate.getTrusted;sce.valueOf=$sceDelegate.valueOf;if(!enabled){sce.trustAs=sce.getTrusted=function(type,value){return value;};sce.valueOf=identity;}
sce.parseAs=function sceParseAs(type,expr){var parsed=$parse(expr);if(parsed.literal&&parsed.constant){return parsed;}else{return $parse(expr,function(value){return sce.getTrusted(type,value);});}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr);};sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value);};sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value);};});return sce;}];}
function $SnifferProvider(){this.$get=['$window','$document',function($window,$document){var eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorPrefix,vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=false,animations=false,match;if(bodyStyle){for(var prop in bodyStyle){if(match=vendorRegex.exec(prop)){vendorPrefix=match[0];vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break;}}
if(!vendorPrefix){vendorPrefix=('WebkitOpacity'in bodyStyle)&&'webkit';}
transitions=!!(('transition'in bodyStyle)||(vendorPrefix+'Transition'in bodyStyle));animations=!!(('animation'in bodyStyle)||(vendorPrefix+'Animation'in bodyStyle));if(android&&(!transitions||!animations)){transitions=isString(document.body.style.webkitTransition);animations=isString(document.body.style.webkitAnimation);}}
return{history:!!($window.history&&$window.history.pushState&&!(android<4)&&!boxee),hasEvent:function(event){if(event==='input'&&msie<=11)return false;if(isUndefined(eventSupport[event])){var divElm=document.createElement('div');eventSupport[event]='on'+event in divElm;}
return eventSupport[event];},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android};}];}
var $compileMinErr=minErr('$compile');function $TemplateRequestProvider(){this.$get=['$templateCache','$http','$q',function($templateCache,$http,$q){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++;var transformResponse=$http.defaults&&$http.defaults.transformResponse;if(isArray(transformResponse)){transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform;});}else if(transformResponse===defaultHttpResponseTransform){transformResponse=null;}
var httpOptions={cache:$templateCache,transformResponse:transformResponse};return $http.get(tpl,httpOptions)
['finally'](function(){handleRequestFn.totalPendingRequests--;}).then(function(response){return response.data;},handleError);function handleError(resp){if(!ignoreRequestError){throw $compileMinErr('tpload','Failed to load template: {0}',tpl);}
return $q.reject(resp);}}
handleRequestFn.totalPendingRequests=0;return handleRequestFn;}];}
function $$TestabilityProvider(){this.$get=['$rootScope','$browser','$location',function($rootScope,$browser,$location){var testability={};testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName('ng-binding');var matches=[];forEach(bindings,function(binding){var dataBinding=angular.element(binding).data('$binding');if(dataBinding){forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp('(^|\\s)'+escapeForRegexp(expression)+'(\\s|\\||$)');if(matcher.test(bindingName)){matches.push(binding);}}else{if(bindingName.indexOf(expression)!=-1){matches.push(binding);}}});}});return matches;};testability.findModels=function(element,expression,opt_exactMatch){var prefixes=['ng-','data-ng-','ng\\:'];for(var p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?'=':'*=';var selector='['+prefixes[p]+'model'+attributeEquals+'"'+expression+'"]';var elements=element.querySelectorAll(selector);if(elements.length){return elements;}}};testability.getLocation=function(){return $location.url();};testability.setLocation=function(url){if(url!==$location.url()){$location.url(url);$rootScope.$digest();}};testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback);};return testability;}];}
function $TimeoutProvider(){this.$get=['$rootScope','$browser','$q','$$q','$exceptionHandler',function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){var skipApply=(isDefined(invokeApply)&&!invokeApply),deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise,timeoutId;timeoutId=$browser.defer(function(){try{deferred.resolve(fn());}catch(e){deferred.reject(e);$exceptionHandler(e);}
finally{delete deferreds[promise.$$timeoutId];}
if(!skipApply)$rootScope.$apply();},delay);promise.$$timeoutId=timeoutId;deferreds[timeoutId]=deferred;return promise;}
timeout.cancel=function(promise){if(promise&&promise.$$timeoutId in deferreds){deferreds[promise.$$timeoutId].reject('canceled');delete deferreds[promise.$$timeoutId];return $browser.defer.cancel(promise.$$timeoutId);}
return false;};return timeout;}];}
var urlParsingNode=document.createElement("a");var originUrl=urlResolve(window.location.href);function urlResolve(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href;}
urlParsingNode.setAttribute('href',href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,''):'',host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,''):'',hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,''):'',hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:(urlParsingNode.pathname.charAt(0)==='/')?urlParsingNode.pathname:'/'+urlParsingNode.pathname};}
function urlIsSameOrigin(requestUrl){var parsed=(isString(requestUrl))?urlResolve(requestUrl):requestUrl;return(parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host);}
function $WindowProvider(){this.$get=valueFn(window);}
$FilterProvider.$inject=['$provide'];function $FilterProvider($provide){var suffix='Filter';function register(name,factory){if(isObject(name)){var filters={};forEach(name,function(filter,key){filters[key]=register(key,filter);});return filters;}else{return $provide.factory(name+suffix,factory);}}
this.register=register;this.$get=['$injector',function($injector){return function(name){return $injector.get(name+suffix);};}];register('currency',currencyFilter);register('date',dateFilter);register('filter',filterFilter);register('json',jsonFilter);register('limitTo',limitToFilter);register('lowercase',lowercaseFilter);register('number',numberFilter);register('orderBy',orderByFilter);register('uppercase',uppercaseFilter);}
function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var predicateFn;var matchAgainstAnyProp;switch(typeof expression){case'function':predicateFn=expression;break;case'boolean':case'number':case'string':matchAgainstAnyProp=true;case'object':predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array;}
return array.filter(predicateFn);};}
function createPredicateFn(expression,comparator,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&('$'in expression);var predicateFn;if(comparator===true){comparator=equals;}else if(!isFunction(comparator)){comparator=function(actual,expected){if(isObject(actual)||isObject(expected)){return false;}
actual=lowercase(''+actual);expected=lowercase(''+expected);return actual.indexOf(expected)!==-1;};}
predicateFn=function(item){if(shouldMatchPrimitives&&!isObject(item)){return deepCompare(item,expression.$,comparator,false);}
return deepCompare(item,expression,comparator,matchAgainstAnyProp);};return predicateFn;}
function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=(actual!==null)?typeof actual:'null';var expectedType=(expected!==null)?typeof expected:'null';if((expectedType==='string')&&(expected.charAt(0)==='!')){return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);}else if(isArray(actual)){return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp);});}
switch(actualType){case'object':var key;if(matchAgainstAnyProp){for(key in actual){if((key.charAt(0)!=='$')&&deepCompare(actual[key],expected,comparator,true)){return true;}}
return dontMatchWholeObject?false:deepCompare(actual,expected,comparator,false);}else if(expectedType==='object'){for(key in expected){var expectedVal=expected[key];if(isFunction(expectedVal)||isUndefined(expectedVal)){continue;}
var matchAnyProperty=key==='$';var actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,matchAnyProperty,matchAnyProperty)){return false;}}
return true;}else{return comparator(actual,expected);}
break;case'function':return false;default:return comparator(actual,expected);}}
currencyFilter.$inject=['$locale'];function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){if(isUndefined(currencySymbol)){currencySymbol=formats.CURRENCY_SYM;}
if(isUndefined(fractionSize)){fractionSize=formats.PATTERNS[1].maxFrac;}
return(amount==null)?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol);};}
numberFilter.$inject=['$locale'];function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return(number==null)?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize);};}
var DECIMAL_SEP='.';function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isFinite(number)||isObject(number))return'';var isNegative=number<0;number=Math.abs(number);var numStr=number+'',formatedText='',parts=[];var hasExponent=false;if(numStr.indexOf('e')!==-1){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);if(match&&match[2]=='-'&&match[3]>fractionSize+1){number=0;}else{formatedText=numStr;hasExponent=true;}}
if(!hasExponent){var fractionLen=(numStr.split(DECIMAL_SEP)[1]||'').length;if(isUndefined(fractionSize)){fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac);}
number=+(Math.round(+(number.toString()+'e'+fractionSize)).toString()+'e'+-fractionSize);var fraction=(''+number).split(DECIMAL_SEP);var whole=fraction[0];fraction=fraction[1]||'';var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=(lgroup+group)){pos=whole.length-lgroup;for(i=0;i<pos;i++){if((pos-i)%group===0&&i!==0){formatedText+=groupSep;}
formatedText+=whole.charAt(i);}}
for(i=pos;i<whole.length;i++){if((whole.length-i)%lgroup===0&&i!==0){formatedText+=groupSep;}
formatedText+=whole.charAt(i);}
while(fraction.length<fractionSize){fraction+='0';}
if(fractionSize&&fractionSize!=="0")formatedText+=decimalSep+fraction.substr(0,fractionSize);}else{if(fractionSize>0&&number<1){formatedText=number.toFixed(fractionSize);number=parseFloat(formatedText);}}
if(number===0){isNegative=false;}
parts.push(isNegative?pattern.negPre:pattern.posPre,formatedText,isNegative?pattern.negSuf:pattern.posSuf);return parts.join('');}
function padNumber(num,digits,trim){var neg='';if(num<0){neg='-';num=-num;}
num=''+num;while(num.length<digits)num='0'+num;if(trim)
num=num.substr(num.length-digits);return neg+num;}
function dateGetter(name,size,offset,trim){offset=offset||0;return function(date){var value=date['get'+name]();if(offset>0||value>-offset)
value+=offset;if(value===0&&offset==-12)value=12;return padNumber(value,size,trim);};}
function dateStrGetter(name,shortForm){return function(date,formats){var value=date['get'+name]();var get=uppercase(shortForm?('SHORT'+name):name);return formats[get][value];};}
function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset();var paddedZone=(zone>=0)?"+":"";paddedZone+=padNumber(Math[zone>0?'floor':'ceil'](zone/60),2)+
padNumber(Math.abs(zone%60),2);return paddedZone;}
function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=(new Date(year,0,1)).getDay();return new Date(year,0,((dayOfWeekOnFirst<=4)?5:12)-dayOfWeekOnFirst);}
function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()));}
function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date);var diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6.048e8);return padNumber(result,size);};}
function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1];}
function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1];}
function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1];}
var DATE_FORMATS={yyyy:dateGetter('FullYear',4),yy:dateGetter('FullYear',2,0,true),y:dateGetter('FullYear',1),MMMM:dateStrGetter('Month'),MMM:dateStrGetter('Month',true),MM:dateGetter('Month',2,1),M:dateGetter('Month',1,1),dd:dateGetter('Date',2),d:dateGetter('Date',1),HH:dateGetter('Hours',2),H:dateGetter('Hours',1),hh:dateGetter('Hours',2,-12),h:dateGetter('Hours',1,-12),mm:dateGetter('Minutes',2),m:dateGetter('Minutes',1),ss:dateGetter('Seconds',2),s:dateGetter('Seconds',1),sss:dateGetter('Milliseconds',3),EEEE:dateStrGetter('Day'),EEE:dateStrGetter('Day',true),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter};var DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=['$locale'];function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;if(match[9]){tzHour=int(match[9]+match[10]);tzMin=int(match[9]+match[11]);}
dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour;var m=int(match[5]||0)-tzMin;var s=int(match[6]||0);var ms=Math.round(parseFloat('0.'+(match[7]||0))*1000);timeSetter.call(date,h,m,s,ms);return date;}
return string;}
return function(date,format,timezone){var text='',parts=[],fn,match;format=format||'mediumDate';format=$locale.DATETIME_FORMATS[format]||format;if(isString(date)){date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date);}
if(isNumber(date)){date=new Date(date);}
if(!isDate(date)){return date;}
while(format){match=DATE_FORMATS_SPLIT.exec(format);if(match){parts=concat(parts,match,1);format=parts.pop();}else{parts.push(format);format=null;}}
if(timezone&&timezone==='UTC'){date=new Date(date.getTime());date.setMinutes(date.getMinutes()+date.getTimezoneOffset());}
forEach(parts,function(value){fn=DATE_FORMATS[value];text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,'').replace(/''/g,"'");});return text;};}
function jsonFilter(){return function(object,spacing){if(isUndefined(spacing)){spacing=2;}
return toJson(object,spacing);};}
var lowercaseFilter=valueFn(lowercase);var uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit){if(isNumber(input))input=input.toString();if(!isArray(input)&&!isString(input))return input;if(Math.abs(Number(limit))===Infinity){limit=Number(limit);}else{limit=int(limit);}
if(limit){return limit>0?input.slice(0,limit):input.slice(limit);}else{return isString(input)?"":[];}};}
orderByFilter.$inject=['$parse'];function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){if(!(isArrayLike(array)))return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate];if(sortPredicate.length===0){sortPredicate=['+'];}
sortPredicate=sortPredicate.map(function(predicate){var descending=false,get=predicate||identity;if(isString(predicate)){if((predicate.charAt(0)=='+'||predicate.charAt(0)=='-')){descending=predicate.charAt(0)=='-';predicate=predicate.substring(1);}
if(predicate===''){return reverseComparator(compare,descending);}
get=$parse(predicate);if(get.constant){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key]);},descending);}}
return reverseComparator(function(a,b){return compare(get(a),get(b));},descending);});return slice.call(array).sort(reverseComparator(comparator,reverseOrder));function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(comp!==0)return comp;}
return 0;}
function reverseComparator(comp,descending){return descending?function(a,b){return comp(b,a);}:comp;}
function isPrimitive(value){switch(typeof value){case'number':case'boolean':case'string':return true;default:return false;}}
function objectToString(value){if(value===null)return'null';if(typeof value.valueOf==='function'){value=value.valueOf();if(isPrimitive(value))return value;}
if(typeof value.toString==='function'){value=value.toString();if(isPrimitive(value))return value;}
return'';}
function compare(v1,v2){var t1=typeof v1;var t2=typeof v2;if(t1===t2&&t1==="object"){v1=objectToString(v1);v2=objectToString(v2);}
if(t1===t2){if(t1==="string"){v1=v1.toLowerCase();v2=v2.toLowerCase();}
if(v1===v2)return 0;return v1<v2?-1:1;}else{return t1<t2?-1:1;}}};}
function ngDirective(directive){if(isFunction(directive)){directive={link:directive};}
directive.restrict=directive.restrict||'AC';return valueFn(directive);}
var htmlAnchorDirective=valueFn({restrict:'E',compile:function(element,attr){if(!attr.href&&!attr.xlinkHref&&!attr.name){return function(scope,element){if(element[0].nodeName.toLowerCase()!=='a')return;var href=toString.call(element.prop('href'))==='[object SVGAnimatedString]'?'xlink:href':'href';element.on('click',function(event){if(!element.attr(href)){event.preventDefault();}});};}}});var ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if(propName=="multiple")return;var normalized=directiveNormalize('ng-'+attrName);ngAttributeAliasDirectives[normalized]=function(){return{restrict:'A',priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function ngBooleanAttrWatchAction(value){attr.$set(attrName,!!value);});}};};});forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if(ngAttr==="ngPattern"&&attr.ngPattern.charAt(0)=="/"){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match){attr.$set("ngPattern",new RegExp(match[1],match[2]));return;}}
scope.$watch(attr[ngAttr],function ngAttrAliasWatchAction(value){attr.$set(ngAttr,value);});}};};});forEach(['src','srcset','href'],function(attrName){var normalized=directiveNormalize('ng-'+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;if(attrName==='href'&&toString.call(element.prop('href'))==='[object SVGAnimatedString]'){name='xlinkHref';attr.$attr[name]='xlink:href';propName=null;}
attr.$observe(normalized,function(value){if(!value){if(attrName==='href'){attr.$set(name,null);}
return;}
attr.$set(name,value);if(msie&&propName)element.prop(propName,attr[name]);});}};};});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS='ng-submitted';function nullFormRenameControl(control,name){control.$name=name;}
FormController.$inject=['$element','$attrs','$scope','$animate','$interpolate'];function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[];var parentForm=form.$$parentForm=element.parent().controller('form')||nullFormCtrl;form.$error={};form.$$success={};form.$pending=undefined;form.$name=$interpolate(attrs.name||attrs.ngForm||'')($scope);form.$dirty=false;form.$pristine=true;form.$valid=true;form.$invalid=false;form.$submitted=false;parentForm.$addControl(form);form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue();});};form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue();});};form.$addControl=function(control){assertNotHasOwnProperty(control.$name,'input');controls.push(control);if(control.$name){form[control.$name]=control;}};form.$$renameControl=function(control,newName){var oldName=control.$name;if(form[oldName]===control){delete form[oldName];}
form[newName]=control;control.$name=newName;};form.$removeControl=function(control){if(control.$name&&form[control.$name]===control){delete form[control.$name];}
forEach(form.$pending,function(value,name){form.$setValidity(name,null,control);});forEach(form.$error,function(value,name){form.$setValidity(name,null,control);});forEach(form.$$success,function(value,name){form.$setValidity(name,null,control);});arrayRemove(controls,control);};addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];if(!list){object[property]=[controller];}else{var index=list.indexOf(controller);if(index===-1){list.push(controller);}}},unset:function(object,property,controller){var list=object[property];if(!list){return;}
arrayRemove(list,controller);if(list.length===0){delete object[property];}},parentForm:parentForm,$animate:$animate});form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS);$animate.addClass(element,DIRTY_CLASS);form.$dirty=true;form.$pristine=false;parentForm.$setDirty();};form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+' '+SUBMITTED_CLASS);form.$dirty=false;form.$pristine=true;form.$submitted=false;forEach(controls,function(control){control.$setPristine();});};form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched();});};form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS);form.$submitted=true;parentForm.$setSubmitted();};}
var formDirectiveFactory=function(isNgForm){return['$timeout',function($timeout){var formDirective={name:'form',restrict:isNgForm?'EAC':'E',controller:FormController,compile:function ngFormCompile(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?'name':(isNgForm&&attr.ngForm?'ngForm':false);return{pre:function ngFormPreLink(scope,formElement,attr,controller){if(!('action'in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue();controller.$setSubmitted();});event.preventDefault();};addEventListenerFn(formElement[0],'submit',handleFormSubmission);formElement.on('$destroy',function(){$timeout(function(){removeEventListenerFn(formElement[0],'submit',handleFormSubmission);},0,false);});}
var parentFormCtrl=controller.$$parentForm;if(nameAttr){setter(scope,null,controller.$name,controller,controller.$name);attr.$observe(nameAttr,function(newValue){if(controller.$name===newValue)return;setter(scope,null,controller.$name,undefined,controller.$name);parentFormCtrl.$$renameControl(controller,newValue);setter(scope,null,controller.$name,controller,controller.$name);});}
formElement.on('$destroy',function(){parentFormCtrl.$removeControl(controller);if(nameAttr){setter(scope,null,attr[nameAttr],undefined,controller.$name);}
extend(controller,nullFormCtrl);});}};}};return formDirective;}];};var formDirective=formDirectiveFactory();var ngFormDirective=formDirectiveFactory(true);var ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/;var URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;var EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;var NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;var DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/;var DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var WEEK_REGEXP=/^(\d{4})-W(\d\d)$/;var MONTH_REGEXP=/^(\d{4})-(\d\d)$/;var TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var inputType={'text':textInputType,'date':createDateInputType('date',DATE_REGEXP,createDateParser(DATE_REGEXP,['yyyy','MM','dd']),'yyyy-MM-dd'),'datetime-local':createDateInputType('datetimelocal',DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,['yyyy','MM','dd','HH','mm','ss','sss']),'yyyy-MM-ddTHH:mm:ss.sss'),'time':createDateInputType('time',TIME_REGEXP,createDateParser(TIME_REGEXP,['HH','mm','ss','sss']),'HH:mm:ss.sss'),'week':createDateInputType('week',WEEK_REGEXP,weekParser,'yyyy-Www'),'month':createDateInputType('month',MONTH_REGEXP,createDateParser(MONTH_REGEXP,['yyyy','MM']),'yyyy-MM'),'number':numberInputType,'url':urlInputType,'email':emailInputType,'radio':radioInputType,'checkbox':checkboxInputType,'hidden':noop,'button':noop,'submit':noop,'reset':noop,'file':noop};function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString();});}
function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);}
function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=false;element.on('compositionstart',function(data){composing=true;});element.on('compositionend',function(){composing=false;listener();});}
var listener=function(ev){if(timeout){$browser.defer.cancel(timeout);timeout=null;}
if(composing)return;var value=element.val(),event=ev&&ev.type;if(type!=='password'&&(!attr.ngTrim||attr.ngTrim!=='false')){value=trim(value);}
if(ctrl.$viewValue!==value||(value===''&&ctrl.$$hasNativeValidators)){ctrl.$setViewValue(value,event);}};if($sniffer.hasEvent('input')){element.on('input',listener);}else{var timeout;var deferListener=function(ev,input,origValue){if(!timeout){timeout=$browser.defer(function(){timeout=null;if(!input||input.value!==origValue){listener(ev);}});}};element.on('keydown',function(event){var key=event.keyCode;if(key===91||(15<key&&key<19)||(37<=key&&key<=40))return;deferListener(event,this,this.value);});if($sniffer.hasEvent('paste')){element.on('paste cut',deferListener);}}
element.on('change',listener);ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?'':ctrl.$viewValue);};}
function weekParser(isoWeek,existingDate){if(isDate(isoWeek)){return isoWeek;}
if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=(week-1)*7;if(existingDate){hours=existingDate.getHours();minutes=existingDate.getMinutes();seconds=existingDate.getSeconds();milliseconds=existingDate.getMilliseconds();}
return new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds);}}
return NaN;}
function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso)){return iso;}
if(isString(iso)){if(iso.charAt(0)=='"'&&iso.charAt(iso.length-1)=='"'){iso=iso.substring(1,iso.length-1);}
if(ISO_DATE_REGEXP.test(iso)){return new Date(iso);}
regexp.lastIndex=0;parts=regexp.exec(iso);if(parts){parts.shift();if(date){map={yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1000};}else{map={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0};}
forEach(parts,function(part,index){if(index<mapping.length){map[mapping[index]]=+part;}});return new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,map.sss*1000||0);}}
return NaN;};}
function createDateInputType(type,regexp,parseDate,format){return function dynamicDateInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter){badInputChecker(scope,element,attr,ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;var previousDate;ctrl.$$parserName=type;ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);if(timezone==='UTC'){parsedDate.setMinutes(parsedDate.getMinutes()-parsedDate.getTimezoneOffset());}
return parsedDate;}
return undefined;});ctrl.$formatters.push(function(value){if(value&&!isDate(value)){throw $ngModelMinErr('datefmt','Expected `{0}` to be a date',value);}
if(isValidDate(value)){previousDate=value;if(previousDate&&timezone==='UTC'){var timezoneOffset=60000*previousDate.getTimezoneOffset();previousDate=new Date(previousDate.getTime()+timezoneOffset);}
return $filter('date')(value,format,timezone);}else{previousDate=null;return'';}});if(isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal;};attr.$observe('min',function(val){minVal=parseObservedDateValue(val);ctrl.$validate();});}
if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal;};attr.$observe('max',function(val){maxVal=parseObservedDateValue(val);ctrl.$validate();});}
function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime());}
function parseObservedDateValue(val){return isDefined(val)?(isDate(val)?val:parseDate(val)):undefined;}};}
function badInputChecker(scope,element,attr,ctrl){var node=element[0];var nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);if(nativeValidation){ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value;});}}
function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);ctrl.$$parserName='number';ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(NUMBER_REGEXP.test(value))return parseFloat(value);return undefined;});ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value)){throw $ngModelMinErr('numfmt','Expected `{0}` to be a number',value);}
value=value.toString();}
return value;});if(isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal;};attr.$observe('min',function(val){if(isDefined(val)&&!isNumber(val)){val=parseFloat(val,10);}
minVal=isNumber(val)&&!isNaN(val)?val:undefined;ctrl.$validate();});}
if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal;};attr.$observe('max',function(val){if(isDefined(val)&&!isNumber(val)){val=parseFloat(val,10);}
maxVal=isNumber(val)&&!isNaN(val)?val:undefined;ctrl.$validate();});}}
function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);ctrl.$$parserName='url';ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value);};}
function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);ctrl.$$parserName='email';ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value);};}
function radioInputType(scope,element,attr,ctrl){if(isUndefined(attr.name)){element.attr('name',nextUid());}
var listener=function(ev){if(element[0].checked){ctrl.$setViewValue(attr.value,ev&&ev.type);}};element.on('click',listener);ctrl.$render=function(){var value=attr.value;element[0].checked=(value==ctrl.$viewValue);};attr.$observe('value',ctrl.$render);}
function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){parseFn=$parse(expression);if(!parseFn.constant){throw minErr('ngModel')('constexpr','Expected constant expression for `{0}`, but saw '+'`{1}`.',name,expression);}
return parseFn(context);}
return fallback;}
function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,'ngTrueValue',attr.ngTrueValue,true);var falseValue=parseConstantExpr($parse,scope,'ngFalseValue',attr.ngFalseValue,false);var listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type);};element.on('click',listener);ctrl.$render=function(){element[0].checked=ctrl.$viewValue;};ctrl.$isEmpty=function(value){return value===false;};ctrl.$formatters.push(function(value){return equals(value,trueValue);});ctrl.$parsers.push(function(value){return value?trueValue:falseValue;});}
var inputDirective=['$browser','$sniffer','$filter','$parse',function($browser,$sniffer,$filter,$parse){return{restrict:'E',require:['?ngModel'],link:{pre:function(scope,element,attr,ctrls){if(ctrls[0]){(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse);}}}};}];var CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/;var ngValueDirective=function(){return{restrict:'A',priority:100,compile:function(tpl,tplAttr){if(CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)){return function ngValueConstantLink(scope,elm,attr){attr.$set('value',scope.$eval(attr.ngValue));};}else{return function ngValueLink(scope,elm,attr){scope.$watch(attr.ngValue,function valueWatchAction(value){attr.$set('value',value);});};}}};};var ngBindDirective=['$compile',function($compile){return{restrict:'AC',compile:function ngBindCompile(templateElement){$compile.$$addBindingClass(templateElement);return function ngBindLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind);element=element[0];scope.$watch(attr.ngBind,function ngBindWatchAction(value){element.textContent=value===undefined?'':value;});};}};}];var ngBindTemplateDirective=['$interpolate','$compile',function($interpolate,$compile){return{compile:function ngBindTemplateCompile(templateElement){$compile.$$addBindingClass(templateElement);return function ngBindTemplateLink(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions);element=element[0];attr.$observe('ngBindTemplate',function(value){element.textContent=value===undefined?'':value;});};}};}];var ngBindHtmlDirective=['$sce','$parse','$compile',function($sce,$parse,$compile){return{restrict:'A',compile:function ngBindHtmlCompile(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml);var ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function getStringValue(value){return(value||'').toString();});$compile.$$addBindingClass(tElement);return function ngBindHtmlLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml);scope.$watch(ngBindHtmlWatch,function ngBindHtmlWatchAction(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||'');});};}};}];var ngChangeDirective=valueFn({restrict:'A',require:'ngModel',link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange);});}});function classDirective(name,selector){name='ngClass'+name;return['$animate',function($animate){return{restrict:'AC',link:function(scope,element,attr){var oldVal;scope.$watch(attr[name],ngClassWatchAction,true);attr.$observe('class',function(value){ngClassWatchAction(scope.$eval(attr[name]));});if(name!=='ngClass'){scope.$watch('$index',function($index,old$index){var mod=$index&1;if(mod!==(old$index&1)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes);}});}
function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses);}
function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses);}
function digestClassCounts(classes,count){var classCounts=element.data('$classCounts')||{};var classesToUpdate=[];forEach(classes,function(className){if(count>0||classCounts[className]){classCounts[className]=(classCounts[className]||0)+count;if(classCounts[className]===+(count>0)){classesToUpdate.push(className);}}});element.data('$classCounts',classCounts);return classesToUpdate.join(' ');}
function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses);var toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1);toRemove=digestClassCounts(toRemove,-1);if(toAdd&&toAdd.length){$animate.addClass(element,toAdd);}
if(toRemove&&toRemove.length){$animate.removeClass(element,toRemove);}}
function ngClassWatchAction(newVal){if(selector===true||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(!oldVal){addClasses(newClasses);}else if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses);}}
oldVal=shallowCopy(newVal);}}};function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){var token=tokens1[i];for(var j=0;j<tokens2.length;j++){if(token==tokens2[j])continue outer;}
values.push(token);}
return values;}
function arrayClasses(classVal){if(isArray(classVal)){return classVal;}else if(isString(classVal)){return classVal.split(' ');}else if(isObject(classVal)){var classes=[];forEach(classVal,function(v,k){if(v){classes=classes.concat(k.split(' '));}});return classes;}
return classVal;}}];}
var ngClassDirective=classDirective('',true);var ngClassOddDirective=classDirective('Odd',0);var ngClassEvenDirective=classDirective('Even',1);var ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set('ngCloak',undefined);element.removeClass('ng-cloak');}});var ngControllerDirective=[function(){return{restrict:'A',scope:true,controller:'@',priority:500};}];var ngEventDirectives={};var forceAsyncEvents={'blur':true,'focus':true};forEach('click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),function(eventName){var directiveName=directiveNormalize('ng-'+eventName);ngEventDirectives[directiveName]=['$parse','$rootScope',function($parse,$rootScope){return{restrict:'A',compile:function($element,attr){var fn=$parse(attr[directiveName],null,true);return function ngEventHandler(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event});};if(forceAsyncEvents[eventName]&&$rootScope.$$phase){scope.$evalAsync(callback);}else{scope.$apply(callback);}});};}};}];});var ngIfDirective=['$animate',function($animate){return{multiElement:true,transclude:'element',priority:600,terminal:true,restrict:'A',$$tlb:true,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function ngIfWatchAction(value){if(value){if(!childScope){$transclude(function(clone,newScope){childScope=newScope;clone[clone.length++]=document.createComment(' end ngIf: '+$attr.ngIf+' ');block={clone:clone};$animate.enter(clone,$element.parent(),$element);});}}else{if(previousElements){previousElements.remove();previousElements=null;}
if(childScope){childScope.$destroy();childScope=null;}
if(block){previousElements=getBlockNodes(block.clone);$animate.leave(previousElements).then(function(){previousElements=null;});block=null;}}});}};}];var ngIncludeDirective=['$templateRequest','$anchorScroll','$animate','$sce',function($templateRequest,$anchorScroll,$animate,$sce){return{restrict:'ECA',priority:400,terminal:true,transclude:'element',controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||'',autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var changeCounter=0,currentScope,previousElement,currentElement;var cleanupLastIncludeContent=function(){if(previousElement){previousElement.remove();previousElement=null;}
if(currentScope){currentScope.$destroy();currentScope=null;}
if(currentElement){$animate.leave(currentElement).then(function(){previousElement=null;});previousElement=currentElement;currentElement=null;}};scope.$watch($sce.parseAsResourceUrl(srcExp),function ngIncludeWatchAction(src){var afterAnimation=function(){if(isDefined(autoScrollExp)&&(!autoScrollExp||scope.$eval(autoScrollExp))){$anchorScroll();}};var thisChangeId=++changeCounter;if(src){$templateRequest(src,true).then(function(response){if(thisChangeId!==changeCounter)return;var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent();$animate.enter(clone,null,$element).then(afterAnimation);});currentScope=newScope;currentElement=clone;currentScope.$emit('$includeContentLoaded',src);scope.$eval(onloadExp);},function(){if(thisChangeId===changeCounter){cleanupLastIncludeContent();scope.$emit('$includeContentError',src);}});scope.$emit('$includeContentRequested',src);}else{cleanupLastIncludeContent();ctrl.template=null;}});};}};}];var ngIncludeFillContentDirective=['$compile',function($compile){return{restrict:'ECA',priority:-400,require:'ngInclude',link:function(scope,$element,$attr,ctrl){if(/SVG/.test($element[0].toString())){$element.empty();$compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function namespaceAdaptedClone(clone){$element.append(clone);},{futureParentElement:$element});return;}
$element.html(ctrl.template);$compile($element.contents())(scope);}};}];var ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit);}};}});var ngListDirective=function(){return{restrict:'A',priority:100,require:'ngModel',link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||', ';var trimValues=attr.ngTrim!=='false';var separator=trimValues?trim(ngList):ngList;var parse=function(viewValue){if(isUndefined(viewValue))return;var list=[];if(viewValue){forEach(viewValue.split(separator),function(value){if(value)list.push(trimValues?trim(value):value);});}
return list;};ctrl.$parsers.push(parse);ctrl.$formatters.push(function(value){if(isArray(value)){return value.join(ngList);}
return undefined;});ctrl.$isEmpty=function(value){return!value||!value.length;};}};};var VALID_CLASS='ng-valid',INVALID_CLASS='ng-invalid',PRISTINE_CLASS='ng-pristine',DIRTY_CLASS='ng-dirty',UNTOUCHED_CLASS='ng-untouched',TOUCHED_CLASS='ng-touched',PENDING_CLASS='ng-pending';var $ngModelMinErr=new minErr('ngModel');var NgModelController=['$scope','$exceptionHandler','$attrs','$element','$parse','$animate','$timeout','$rootScope','$q','$interpolate',function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=undefined;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=true;this.$touched=false;this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$error={};this.$$success={};this.$pending=undefined;this.$name=$interpolate($attr.name||'',false)($scope);var parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,parserValid,ctrl=this;this.$$setOptions=function(options){ctrl.$options=options;if(options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+'()'),invokeModelSetter=$parse($attr.ngModel+'($$$p)');ngModelGet=function($scope){var modelValue=parsedNgModel($scope);if(isFunction(modelValue)){modelValue=invokeModelGetter($scope);}
return modelValue;};ngModelSet=function($scope,newValue){if(isFunction(parsedNgModel($scope))){invokeModelSetter($scope,{$$$p:ctrl.$modelValue});}else{parsedNgModelAssign($scope,ctrl.$modelValue);}};}else if(!parsedNgModel.assign){throw $ngModelMinErr('nonassign',"Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));}};this.$render=noop;this.$isEmpty=function(value){return isUndefined(value)||value===''||value===null||value!==value;};var parentForm=$element.inheritedData('$formController')||nullFormCtrl,currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=true;},unset:function(object,property){delete object[property];},parentForm:parentForm,$animate:$animate});this.$setPristine=function(){ctrl.$dirty=false;ctrl.$pristine=true;$animate.removeClass($element,DIRTY_CLASS);$animate.addClass($element,PRISTINE_CLASS);};this.$setDirty=function(){ctrl.$dirty=true;ctrl.$pristine=false;$animate.removeClass($element,PRISTINE_CLASS);$animate.addClass($element,DIRTY_CLASS);parentForm.$setDirty();};this.$setUntouched=function(){ctrl.$touched=false;ctrl.$untouched=true;$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS);};this.$setTouched=function(){ctrl.$touched=true;ctrl.$untouched=false;$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS);};this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce);ctrl.$viewValue=ctrl.$$lastCommittedViewValue;ctrl.$render();};this.$validate=function(){if(isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)){return;}
var viewValue=ctrl.$$lastCommittedViewValue;var modelValue=ctrl.$$rawModelValue;var prevValid=ctrl.$valid;var prevModelValue=ctrl.$modelValue;var allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){if(!allowInvalid&&prevValid!==allValid){ctrl.$modelValue=allValid?modelValue:undefined;if(ctrl.$modelValue!==prevModelValue){ctrl.$$writeModelToScope();}}});};this.$$runValidators=function(modelValue,viewValue,doneCallback){currentValidationRunId++;var localValidationRunId=currentValidationRunId;if(!processParseErrors()){validationDone(false);return;}
if(!processSyncValidators()){validationDone(false);return;}
processAsyncValidators();function processParseErrors(){var errorKey=ctrl.$$parserName||'parse';if(parserValid===undefined){setValidity(errorKey,null);}else{if(!parserValid){forEach(ctrl.$validators,function(v,name){setValidity(name,null);});forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null);});}
setValidity(errorKey,parserValid);return parserValid;}
return true;}
function processSyncValidators(){var syncValidatorsValid=true;forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result;setValidity(name,result);});if(!syncValidatorsValid){forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null);});return false;}
return true;}
function processAsyncValidators(){var validatorPromises=[];var allValid=true;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise)){throw $ngModelMinErr("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);}
setValidity(name,undefined);validatorPromises.push(promise.then(function(){setValidity(name,true);},function(error){allValid=false;setValidity(name,false);}));});if(!validatorPromises.length){validationDone(true);}else{$q.all(validatorPromises).then(function(){validationDone(allValid);},noop);}}
function setValidity(name,isValid){if(localValidationRunId===currentValidationRunId){ctrl.$setValidity(name,isValid);}}
function validationDone(allValid){if(localValidationRunId===currentValidationRunId){doneCallback(allValid);}}};this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce);if(ctrl.$$lastCommittedViewValue===viewValue&&(viewValue!==''||!ctrl.$$hasNativeValidators)){return;}
ctrl.$$lastCommittedViewValue=viewValue;if(ctrl.$pristine){this.$setDirty();}
this.$$parseAndValidate();};this.$$parseAndValidate=function(){var viewValue=ctrl.$$lastCommittedViewValue;var modelValue=viewValue;parserValid=isUndefined(modelValue)?undefined:true;if(parserValid){for(var i=0;i<ctrl.$parsers.length;i++){modelValue=ctrl.$parsers[i](modelValue);if(isUndefined(modelValue)){parserValid=false;break;}}}
if(isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)){ctrl.$modelValue=ngModelGet($scope);}
var prevModelValue=ctrl.$modelValue;var allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue;if(allowInvalid){ctrl.$modelValue=modelValue;writeToModelIfNeeded();}
ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){if(!allowInvalid){ctrl.$modelValue=allValid?modelValue:undefined;writeToModelIfNeeded();}});function writeToModelIfNeeded(){if(ctrl.$modelValue!==prevModelValue){ctrl.$$writeModelToScope();}}};this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue);forEach(ctrl.$viewChangeListeners,function(listener){try{listener();}catch(e){$exceptionHandler(e);}});};this.$setViewValue=function(value,trigger){ctrl.$viewValue=value;if(!ctrl.$options||ctrl.$options.updateOnDefault){ctrl.$$debounceViewValueCommit(trigger);}};this.$$debounceViewValueCommit=function(trigger){var debounceDelay=0,options=ctrl.$options,debounce;if(options&&isDefined(options.debounce)){debounce=options.debounce;if(isNumber(debounce)){debounceDelay=debounce;}else if(isNumber(debounce[trigger])){debounceDelay=debounce[trigger];}else if(isNumber(debounce['default'])){debounceDelay=debounce['default'];}}
$timeout.cancel(pendingDebounce);if(debounceDelay){pendingDebounce=$timeout(function(){ctrl.$commitViewValue();},debounceDelay);}else if($rootScope.$$phase){ctrl.$commitViewValue();}else{$scope.$apply(function(){ctrl.$commitViewValue();});}};$scope.$watch(function ngModelWatch(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue;parserValid=undefined;var formatters=ctrl.$formatters,idx=formatters.length;var viewValue=modelValue;while(idx--){viewValue=formatters[idx](viewValue);}
if(ctrl.$viewValue!==viewValue){ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue;ctrl.$render();ctrl.$$runValidators(modelValue,viewValue,noop);}}
return modelValue;});}];var ngModelDirective=['$rootScope',function($rootScope){return{restrict:'A',require:['ngModel','^?form','^?ngModelOptions'],controller:NgModelController,priority:1,compile:function ngModelCompile(element){element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS);return{pre:function ngModelPreLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options);formCtrl.$addControl(modelCtrl);attr.$observe('name',function(newValue){if(modelCtrl.$name!==newValue){formCtrl.$$renameControl(modelCtrl,newValue);}});scope.$on('$destroy',function(){formCtrl.$removeControl(modelCtrl);});},post:function ngModelPostLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0];if(modelCtrl.$options&&modelCtrl.$options.updateOn){element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type);});}
element.on('blur',function(ev){if(modelCtrl.$touched)return;if($rootScope.$$phase){scope.$evalAsync(modelCtrl.$setTouched);}else{scope.$apply(modelCtrl.$setTouched);}});}};}};}];var DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/;var ngModelOptionsDirective=function(){return{restrict:'A',controller:['$scope','$attrs',function($scope,$attrs){var that=this;this.$options=$scope.$eval($attrs.ngModelOptions);if(this.$options.updateOn!==undefined){this.$options.updateOnDefault=false;this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){that.$options.updateOnDefault=true;return' ';}));}else{this.$options.updateOnDefault=true;}}]};};function addSetValidityMethod(context){var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,parentForm=context.parentForm,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS));ctrl.$setValidity=setValidity;function setValidity(validationErrorKey,state,controller){if(state===undefined){createAndSet('$pending',validationErrorKey,controller);}else{unsetAndCleanup('$pending',validationErrorKey,controller);}
if(!isBoolean(state)){unset(ctrl.$error,validationErrorKey,controller);unset(ctrl.$$success,validationErrorKey,controller);}else{if(state){unset(ctrl.$error,validationErrorKey,controller);set(ctrl.$$success,validationErrorKey,controller);}else{set(ctrl.$error,validationErrorKey,controller);unset(ctrl.$$success,validationErrorKey,controller);}}
if(ctrl.$pending){cachedToggleClass(PENDING_CLASS,true);ctrl.$valid=ctrl.$invalid=undefined;toggleValidationCss('',null);}else{cachedToggleClass(PENDING_CLASS,false);ctrl.$valid=isObjectEmpty(ctrl.$error);ctrl.$invalid=!ctrl.$valid;toggleValidationCss('',ctrl.$valid);}
var combinedState;if(ctrl.$pending&&ctrl.$pending[validationErrorKey]){combinedState=undefined;}else if(ctrl.$error[validationErrorKey]){combinedState=false;}else if(ctrl.$$success[validationErrorKey]){combinedState=true;}else{combinedState=null;}
toggleValidationCss(validationErrorKey,combinedState);parentForm.$setValidity(validationErrorKey,combinedState,ctrl);}
function createAndSet(name,value,controller){if(!ctrl[name]){ctrl[name]={};}
set(ctrl[name],value,controller);}
function unsetAndCleanup(name,value,controller){if(ctrl[name]){unset(ctrl[name],value,controller);}
if(isObjectEmpty(ctrl[name])){ctrl[name]=undefined;}}
function cachedToggleClass(className,switchValue){if(switchValue&&!classCache[className]){$animate.addClass($element,className);classCache[className]=true;}else if(!switchValue&&classCache[className]){$animate.removeClass($element,className);classCache[className]=false;}}
function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?'-'+snake_case(validationErrorKey,'-'):'';cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===true);cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===false);}}
function isObjectEmpty(obj){if(obj){for(var prop in obj){return false;}}
return true;}
var ngNonBindableDirective=ngDirective({terminal:true,priority:1000});var ngPluralizeDirective=['$locale','$interpolate',function($locale,$interpolate){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{restrict:'EA',link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+'-'+offset+endSymbol,watchRemover=angular.noop,lastCount;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?'-':'')+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName]);}});forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement));});scope.$watch(numberExp,function ngPluralizeWatchAction(newVal){var count=parseFloat(newVal);var countIsNaN=isNaN(count);if(!countIsNaN&&!(count in whens)){count=$locale.pluralCat(count-offset);}
if((count!==lastCount)&&!(countIsNaN&&isNaN(lastCount))){watchRemover();watchRemover=scope.$watch(whensExpFns[count],updateElementText);lastCount=count;}});function updateElementText(newText){element.text(newText||'');}}};}];var ngRepeatDirective=['$parse','$animate',function($parse,$animate){var NG_REMOVED='$$NG_REMOVED';var ngRepeatMinErr=minErr('ngRepeat');var updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value;if(keyIdentifier)scope[keyIdentifier]=key;scope.$index=index;scope.$first=(index===0);scope.$last=(index===(arrayLength-1));scope.$middle=!(scope.$first||scope.$last);scope.$odd=!(scope.$even=(index&1)===0);};var getBlockStart=function(block){return block.clone[0];};var getBlockEnd=function(block){return block.clone[block.clone.length-1];};return{restrict:'A',multiElement:true,transclude:'element',priority:1000,terminal:true,$$tlb:true,compile:function ngRepeatCompile($element,$attr){var expression=$attr.ngRepeat;var ngRepeatEndComment=document.createComment(' end ngRepeat: '+expression+' ');var match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match){throw ngRepeatMinErr('iexp',"Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);}
var lhs=match[1];var rhs=match[2];var aliasAs=match[3];var trackByExp=match[4];match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!match){throw ngRepeatMinErr('iidexp',"'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);}
var valueIdentifier=match[3]||match[1];var keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs))){throw ngRepeatMinErr('badident',"alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);}
var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn;var hashFnLocals={$id:hashKey};if(trackByExp){trackByExpGetter=$parse(trackByExp);}else{trackByIdArrayFn=function(key,value){return hashKey(value);};trackByIdObjFn=function(key){return key;};}
return function ngRepeatLink($scope,$element,$attr,ctrl,$transclude){if(trackByExpGetter){trackByIdExpFn=function(key,value,index){if(keyIdentifier)hashFnLocals[keyIdentifier]=key;hashFnLocals[valueIdentifier]=value;hashFnLocals.$index=index;return trackByExpGetter($scope,hashFnLocals);};}
var lastBlockMap=createMap();$scope.$watchCollection(rhs,function ngRepeatAction(collection){var index,length,previousNode=$element[0],nextNode,nextBlockMap=createMap(),collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove;if(aliasAs){$scope[aliasAs]=collection;}
if(isArrayLike(collection)){collectionKeys=collection;trackByIdFn=trackByIdExpFn||trackByIdArrayFn;}else{trackByIdFn=trackByIdExpFn||trackByIdObjFn;collectionKeys=[];for(var itemKey in collection){if(collection.hasOwnProperty(itemKey)&&itemKey.charAt(0)!='$'){collectionKeys.push(itemKey);}}
collectionKeys.sort();}
collectionLength=collectionKeys.length;nextBlockOrder=new Array(collectionLength);for(index=0;index<collectionLength;index++){key=(collection===collectionKeys)?index:collectionKeys[index];value=collection[key];trackById=trackByIdFn(key,value,index);if(lastBlockMap[trackById]){block=lastBlockMap[trackById];delete lastBlockMap[trackById];nextBlockMap[trackById]=block;nextBlockOrder[index]=block;}else if(nextBlockMap[trackById]){forEach(nextBlockOrder,function(block){if(block&&block.scope)lastBlockMap[block.id]=block;});throw ngRepeatMinErr('dupes',"Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);}else{nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined};nextBlockMap[trackById]=true;}}
for(var blockKey in lastBlockMap){block=lastBlockMap[blockKey];elementsToRemove=getBlockNodes(block.clone);$animate.leave(elementsToRemove);if(elementsToRemove[0].parentNode){for(index=0,length=elementsToRemove.length;index<length;index++){elementsToRemove[index][NG_REMOVED]=true;}}
block.scope.$destroy();}
for(index=0;index<collectionLength;index++){key=(collection===collectionKeys)?index:collectionKeys[index];value=collection[key];block=nextBlockOrder[index];if(block.scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling;}while(nextNode&&nextNode[NG_REMOVED]);if(getBlockStart(block)!=nextNode){$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode));}
previousNode=getBlockEnd(block);updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength);}else{$transclude(function ngRepeatTransclude(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(false);clone[clone.length++]=endNode;$animate.enter(clone,null,jqLite(previousNode));previousNode=endNode;block.clone=clone;nextBlockMap[block.id]=block;updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength);});}}
lastBlockMap=nextBlockMap;});};}};}];var NG_HIDE_CLASS='ng-hide';var NG_HIDE_IN_PROGRESS_CLASS='ng-hide-animate';var ngShowDirective=['$animate',function($animate){return{restrict:'A',multiElement:true,link:function(scope,element,attr){scope.$watch(attr.ngShow,function ngShowWatchAction(value){$animate[value?'removeClass':'addClass'](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS});});}};}];var ngHideDirective=['$animate',function($animate){return{restrict:'A',multiElement:true,link:function(scope,element,attr){scope.$watch(attr.ngHide,function ngHideWatchAction(value){$animate[value?'addClass':'removeClass'](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS});});}};}];var ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watchCollection(attr.ngStyle,function ngStyleWatchAction(newStyles,oldStyles){if(oldStyles&&(newStyles!==oldStyles)){forEach(oldStyles,function(val,style){element.css(style,'');});}
if(newStyles)element.css(newStyles);});});var ngSwitchDirective=['$animate',function($animate){return{restrict:'EA',require:'ngSwitch',controller:['$scope',function ngSwitchController(){this.cases={};}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[];var spliceFactory=function(array,index){return function(){array.splice(index,1);};};scope.$watch(watchExpr,function ngSwitchWatchAction(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;i<ii;++i){$animate.cancel(previousLeaveAnimations[i]);}
previousLeaveAnimations.length=0;for(i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i));}
selectedElements.length=0;selectedScopes.length=0;if((selectedTranscludes=ngSwitchController.cases['!'+value]||ngSwitchController.cases['?'])){forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(' end ngSwitchWhen: ');var block={clone:caseElement};selectedElements.push(block);$animate.enter(caseElement,anchor.parent(),anchor);});});}});}};}];var ngSwitchWhenDirective=ngDirective({transclude:'element',priority:1200,require:'^ngSwitch',multiElement:true,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases['!'+attrs.ngSwitchWhen]=(ctrl.cases['!'+attrs.ngSwitchWhen]||[]);ctrl.cases['!'+attrs.ngSwitchWhen].push({transclude:$transclude,element:element});}});var ngSwitchDefaultDirective=ngDirective({transclude:'element',priority:1200,require:'^ngSwitch',multiElement:true,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases['?']=(ctrl.cases['?']||[]);ctrl.cases['?'].push({transclude:$transclude,element:element});}});var ngTranscludeDirective=ngDirective({restrict:'EAC',link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude){throw minErr('ngTransclude')('orphan','Illegal use of ngTransclude directive in the template! '+'No parent directive that requires a transclusion found. '+'Element: {0}',startingTag($element));}
$transclude(function(clone){$element.empty();$element.append(clone);});}});var scriptDirective=['$templateCache',function($templateCache){return{restrict:'E',terminal:true,compile:function(element,attr){if(attr.type=='text/ng-template'){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text);}}};}];var ngOptionsMinErr=minErr('ngOptions');var ngOptionsDirective=valueFn({restrict:'A',terminal:true});var selectDirective=['$compile','$parse',function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:'E',require:['select','?ngModel'],controller:['$element','$scope','$attrs',function($element,$scope,$attrs){var self=this,optionsMap={},ngModelCtrl=nullModelCtrl,nullOption,unknownOption;self.databound=$attrs.ngModel;self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_;nullOption=nullOption_;unknownOption=unknownOption_;};self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"');optionsMap[value]=true;if(ngModelCtrl.$viewValue==value){$element.val(value);if(unknownOption.parent())unknownOption.remove();}
if(element&&element[0].hasAttribute('selected')){element[0].selected=true;}};self.removeOption=function(value){if(this.hasOption(value)){delete optionsMap[value];if(ngModelCtrl.$viewValue===value){this.renderUnknownOption(value);}}};self.renderUnknownOption=function(val){var unknownVal='? '+hashKey(val)+' ?';unknownOption.val(unknownVal);$element.prepend(unknownOption);$element.val(unknownVal);unknownOption.prop('selected',true);};self.hasOption=function(value){return optionsMap.hasOwnProperty(value);};$scope.$on('$destroy',function(){self.renderUnknownOption=noop;});}],link:function(scope,element,attr,ctrls){if(!ctrls[1])return;var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=false,emptyOption,renderScheduled=false,optionTemplate=jqLite(document.createElement('option')),optGroupTemplate=jqLite(document.createElement('optgroup')),unknownOption=optionTemplate.clone();for(var i=0,children=element.children(),ii=children.length;i<ii;i++){if(children[i].value===''){emptyOption=nullOption=children.eq(i);break;}}
selectCtrl.init(ngModelCtrl,nullOption,unknownOption);if(multiple){ngModelCtrl.$isEmpty=function(value){return!value||value.length===0;};}
if(optionsExp)setupAsOptions(scope,element,ngModelCtrl);else if(multiple)setupAsMultiple(scope,element,ngModelCtrl);else setupAsSingle(scope,element,ngModelCtrl,selectCtrl);function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;if(selectCtrl.hasOption(viewValue)){if(unknownOption.parent())unknownOption.remove();selectElement.val(viewValue);if(viewValue==='')emptyOption.prop('selected',true);}else{if(isUndefined(viewValue)&&emptyOption){selectElement.val('');}else{selectCtrl.renderUnknownOption(viewValue);}}};selectElement.on('change',function(){scope.$apply(function(){if(unknownOption.parent())unknownOption.remove();ngModelCtrl.$setViewValue(selectElement.val());});});}
function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find('option'),function(option){option.selected=isDefined(items.get(option.value));});};scope.$watch(function selectMultipleWatch(){if(!equals(lastView,ctrl.$viewValue)){lastView=shallowCopy(ctrl.$viewValue);ctrl.$render();}});selectElement.on('change',function(){scope.$apply(function(){var array=[];forEach(selectElement.find('option'),function(option){if(option.selected){array.push(option.value);}});ctrl.$setViewValue(array);});});}
function setupAsOptions(scope,selectElement,ctrl){var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP))){throw ngOptionsMinErr('iexp',"Expected expression in form of "+"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"+" but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));}
var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],selectAs=/ as /.test(match[0])&&match[1],selectAsFn=selectAs?$parse(selectAs):null,keyName=match[5],groupByFn=$parse(match[3]||''),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,trackKeysCache={},optionGroupsCache=[[{element:selectElement,label:''}]],locals={};if(nullOption){$compile(nullOption)(scope);nullOption.removeClass('ng-scope');nullOption.remove();}
selectElement.empty();selectElement.on('change',selectionChanged);ctrl.$render=render;scope.$watchCollection(valuesFn,scheduleRendering);scope.$watchCollection(getLabels,scheduleRendering);if(multiple){scope.$watchCollection(function(){return ctrl.$modelValue;},scheduleRendering);}
function callExpression(exprFn,key,value){locals[valueName]=value;if(keyName)locals[keyName]=key;return exprFn(scope,locals);}
function selectionChanged(){scope.$apply(function(){var collection=valuesFn(scope)||[];var viewValue;if(multiple){viewValue=[];forEach(selectElement.val(),function(selectedKey){selectedKey=trackFn?trackKeysCache[selectedKey]:selectedKey;viewValue.push(getViewValue(selectedKey,collection[selectedKey]));});}else{var selectedKey=trackFn?trackKeysCache[selectElement.val()]:selectElement.val();viewValue=getViewValue(selectedKey,collection[selectedKey]);}
ctrl.$setViewValue(viewValue);render();});}
function getViewValue(key,value){if(key==='?'){return undefined;}else if(key===''){return null;}else{var viewValueFn=selectAsFn?selectAsFn:valueFn;return callExpression(viewValueFn,key,value);}}
function getLabels(){var values=valuesFn(scope);var toDisplay;if(values&&isArray(values)){toDisplay=new Array(values.length);for(var i=0,ii=values.length;i<ii;i++){toDisplay[i]=callExpression(displayFn,i,values[i]);}
return toDisplay;}else if(values){toDisplay={};for(var prop in values){if(values.hasOwnProperty(prop)){toDisplay[prop]=callExpression(displayFn,prop,values[prop]);}}}
return toDisplay;}
function createIsSelectedFn(viewValue){var selectedSet;if(multiple){if(trackFn&&isArray(viewValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<viewValue.length;trackIndex++){selectedSet.put(callExpression(trackFn,null,viewValue[trackIndex]),true);}}else{selectedSet=new HashMap(viewValue);}}else if(trackFn){viewValue=callExpression(trackFn,null,viewValue);}
return function isSelected(key,value){var compareValueFn;if(trackFn){compareValueFn=trackFn;}else if(selectAsFn){compareValueFn=selectAsFn;}else{compareValueFn=valueFn;}
if(multiple){return isDefined(selectedSet.remove(callExpression(compareValueFn,key,value)));}else{return viewValue===callExpression(compareValueFn,key,value);}};}
function scheduleRendering(){if(!renderScheduled){scope.$$postDigest(render);renderScheduled=true;}}
function updateLabelMap(labelMap,label,added){labelMap[label]=labelMap[label]||0;labelMap[label]+=(added?1:-1);}
function render(){renderScheduled=false;var optionGroups={'':[]},optionGroupNames=[''],optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,viewValue=ctrl.$viewValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,key,value,groupLength,length,groupIndex,index,labelMap={},selected,isSelected=createIsSelectedFn(viewValue),anySelected=false,lastElement,element,label,optionId;trackKeysCache={};for(index=0;length=keys.length,index<length;index++){key=index;if(keyName){key=keys[index];if(key.charAt(0)==='$')continue;}
value=values[key];optionGroupName=callExpression(groupByFn,key,value)||'';if(!(optionGroup=optionGroups[optionGroupName])){optionGroup=optionGroups[optionGroupName]=[];optionGroupNames.push(optionGroupName);}
selected=isSelected(key,value);anySelected=anySelected||selected;label=callExpression(displayFn,key,value);label=isDefined(label)?label:'';optionId=trackFn?trackFn(scope,locals):(keyName?keys[index]:index);if(trackFn){trackKeysCache[optionId]=key;}
optionGroup.push({id:optionId,label:label,selected:selected});}
if(!multiple){if(nullOption||viewValue===null){optionGroups[''].unshift({id:'',label:'',selected:!anySelected});}else if(!anySelected){optionGroups[''].unshift({id:'?',label:'',selected:true});}}
for(groupIndex=0,groupLength=optionGroupNames.length;groupIndex<groupLength;groupIndex++){optionGroupName=optionGroupNames[groupIndex];optionGroup=optionGroups[optionGroupName];if(optionGroupsCache.length<=groupIndex){existingParent={element:optGroupTemplate.clone().attr('label',optionGroupName),label:optionGroup.label};existingOptions=[existingParent];optionGroupsCache.push(existingOptions);selectElement.append(existingParent.element);}else{existingOptions=optionGroupsCache[groupIndex];existingParent=existingOptions[0];if(existingParent.label!=optionGroupName){existingParent.element.attr('label',existingParent.label=optionGroupName);}}
lastElement=null;for(index=0,length=optionGroup.length;index<length;index++){option=optionGroup[index];if((existingOption=existingOptions[index+1])){lastElement=existingOption.element;if(existingOption.label!==option.label){updateLabelMap(labelMap,existingOption.label,false);updateLabelMap(labelMap,option.label,true);lastElement.text(existingOption.label=option.label);lastElement.prop('label',existingOption.label);}
if(existingOption.id!==option.id){lastElement.val(existingOption.id=option.id);}
if(lastElement[0].selected!==option.selected){lastElement.prop('selected',(existingOption.selected=option.selected));if(msie){lastElement.prop('selected',existingOption.selected);}}}else{if(option.id===''&&nullOption){element=nullOption;}else{(element=optionTemplate.clone()).val(option.id).prop('selected',option.selected).attr('selected',option.selected).prop('label',option.label).text(option.label);}
existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected});updateLabelMap(labelMap,option.label,true);if(lastElement){lastElement.after(element);}else{existingParent.element.append(element);}
lastElement=element;}}
index++;while(existingOptions.length>index){option=existingOptions.pop();updateLabelMap(labelMap,option.label,false);option.element.remove();}}
while(optionGroupsCache.length>groupIndex){optionGroup=optionGroupsCache.pop();for(index=1;index<optionGroup.length;++index){updateLabelMap(labelMap,optionGroup[index].label,false);}
optionGroup[0].element.remove();}
forEach(labelMap,function(count,label){if(count>0){selectCtrl.addOption(label);}else if(count<0){selectCtrl.removeOption(label);}});}}}};}];var optionDirective=['$interpolate',function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:'E',priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),true);if(!interpolateFn){attr.$set('value',element.text());}}
return function(scope,element,attr){var selectCtrlName='$selectController',parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);if(!selectCtrl||!selectCtrl.databound){selectCtrl=nullSelectCtrl;}
if(interpolateFn){scope.$watch(interpolateFn,function interpolateWatchAction(newVal,oldVal){attr.$set('value',newVal);if(oldVal!==newVal){selectCtrl.removeOption(oldVal);}
selectCtrl.addOption(newVal,element);});}else{selectCtrl.addOption(attr.value,element);}
element.on('$destroy',function(){selectCtrl.removeOption(attr.value);});};}};}];var styleDirective=valueFn({restrict:'E',terminal:false});var requiredDirective=function(){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;attr.required=true;ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue);};attr.$observe('required',function(){ctrl.$validate();});}};};var patternDirective=function(){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe('pattern',function(regex){if(isString(regex)&&regex.length>0){regex=new RegExp('^'+regex+'$');}
if(regex&&!regex.test){throw minErr('ngPattern')('noregexp','Expected {0} to be a RegExp but was {1}. Element: {2}',patternExp,regex,startingTag(elm));}
regexp=regex||undefined;ctrl.$validate();});ctrl.$validators.pattern=function(value){return ctrl.$isEmpty(value)||isUndefined(regexp)||regexp.test(value);};}};};var maxlengthDirective=function(){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;var maxlength=-1;attr.$observe('maxlength',function(value){var intVal=int(value);maxlength=isNaN(intVal)?-1:intVal;ctrl.$validate();});ctrl.$validators.maxlength=function(modelValue,viewValue){return(maxlength<0)||ctrl.$isEmpty(viewValue)||(viewValue.length<=maxlength);};}};};var minlengthDirective=function(){return{restrict:'A',require:'?ngModel',link:function(scope,elm,attr,ctrl){if(!ctrl)return;var minlength=0;attr.$observe('minlength',function(value){minlength=int(value)||0;ctrl.$validate();});ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength;};}};};if(window.angular.bootstrap){console.log('WARNING: Tried to load angular more than once.');return;}
bindJQuery();publishExternalAPI(angular);jqLite(document).ready(function(){angularInit(document,bootstrap);});})(window,document);!window.angular.$$csp()&&window.angular.element(document).find('head').prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');
(function(window,angular,undefined){'use strict';angular.module('ngCookies',['ng']).factory('$cookies',['$rootScope','$browser',function($rootScope,$browser){var cookies={},lastCookies={},lastBrowserCookies,runEval=false,copy=angular.copy,isUndefined=angular.isUndefined;$browser.addPollFn(function(){var currentCookies=$browser.cookies();if(lastBrowserCookies!=currentCookies){lastBrowserCookies=currentCookies;copy(currentCookies,lastCookies);copy(currentCookies,cookies);if(runEval)$rootScope.$apply();}})();runEval=true;$rootScope.$watch(push);return cookies;function push(){var name,value,browserCookies,updated;for(name in lastCookies){if(isUndefined(cookies[name])){$browser.cookies(name,undefined);}}
for(name in cookies){value=cookies[name];if(!angular.isString(value)){value=''+value;cookies[name]=value;}
if(value!==lastCookies[name]){$browser.cookies(name,value);updated=true;}}
if(updated){updated=false;browserCookies=$browser.cookies();for(name in cookies){if(cookies[name]!==browserCookies[name]){if(isUndefined(browserCookies[name])){delete cookies[name];}else{cookies[name]=browserCookies[name];}
updated=true;}}}}}]).factory('$cookieStore',['$cookies',function($cookies){return{get:function(key){var value=$cookies[key];return value?angular.fromJson(value):value;},put:function(key,value){$cookies[key]=angular.toJson(value);},remove:function(key){delete $cookies[key];}};}]);})(window,window.angular);
(function(n,h,p){'use strict';function E(a){var e=[];r(e,h.noop).chars(a);return e.join("")}function g(a){var e={};a=a.split(",");var d;for(d=0;d<a.length;d++)e[a[d]]=!0;return e}function F(a,e){function d(a,b,d,l){b=h.lowercase(b);if(s[b])for(;f.last()&&t[f.last()];)c("",f.last());u[b]&&f.last()==b&&c("",b);(l=v[b]||!!l)||f.push(b);var m={};d.replace(G,function(a,b,e,c,d){m[b]=q(e||c||d||"")});e.start&&e.start(b,m,l)}function c(a,b){var c=0,d;if(b=h.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);if(0<=c){for(d=f.length-1;d>=c;d--)e.end&&e.end(f[d]);f.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,k,f=[],m=a,l;for(f.last=function(){return f[f.length-1]};a;){l="";k=!0;if(f.last()&&w[f.last()])a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){b=b.replace(H,"$1").replace(I,"$1");e.chars&&e.chars(q(b));return""}),c("",f.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",b)===b&&(e.comment&&e.comment(a.substring(4,b)),a=a.substring(b+3),k=!1);else if(x.test(a)){if(b=a.match(x))a=a.replace(b[0],""),k=!1}else if(J.test(a)){if(b=a.match(y))a=a.substring(b[0].length),b[0].replace(y,c),k=!1}else K.test(a)&&((b=a.match(z))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(z,d)),k=!1):(l+="<",a=a.substring(1)));k&&(b=a.indexOf("<"),l+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),e.chars&&e.chars(q(l)))}if(a==m)throw L("badparse",a);m=a}c()}function q(a){if(!a)return"";A.innerHTML=a.replace(/</g,"&lt;");return A.textContent}function B(a){return a.replace(/&/g,"&amp;").replace(M,function(a){var d=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(d-55296)+(a-56320)+65536)+";"}).replace(N,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(a,e){var d=!1,c=h.bind(a,a.push);return{start:function(a,k,f){a=h.lowercase(a);!d&&w[a]&&(d=a);d||!0!==C[a]||(c("<"),c(a),h.forEach(k,function(d,f){var k=h.lowercase(f),g="img"===a&&"src"===k||"background"===k;!0!==O[k]||!0===D[k]&&!e(d,g)||(c(" "),c(f),c('="'),c(B(d)),c('"'))}),c(f?"/>":">"))},end:function(a){a=h.lowercase(a);d||!0!==C[a]||(c("</"),c(a),c(">"));a==d&&(d=!1)},chars:function(a){d||c(B(a))}}}var L=h.$$minErr("$sanitize"),z=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,y=/^<\/\s*([\w:-]+)[^>]*>/,G=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,K=/^</,J=/^<\//,H=/\x3c!--(.*?)--\x3e/g,x=/<!DOCTYPE([^>]*?)>/i,I=/<!\[CDATA\[(.*?)]]\x3e/g,M=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,N=/([^\#-~| |!])/g,v=g("area,br,col,hr,img,wbr");n=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");p=g("rp,rt");var u=h.extend({},p,n),s=h.extend({},n,g("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),t=h.extend({},p,g("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));n=g("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var w=g("script,style"),C=h.extend({},v,s,t,u,n),D=g("background,cite,href,longdesc,src,usemap,xlink:href");n=g("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width");p=g("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");var O=h.extend({},D,p,n),A=document.createElement("pre");h.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(e){var d=[];F(e,r(d,function(c,b){return!/^unsafe/.test(a(c,b))}));return d.join("")}}]});h.module("ngSanitize").filter("linky",["$sanitize",function(a){var e=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,d=/^mailto:/;return function(c,b){function k(a){a&&g.push(E(a))}function f(a,c){g.push("<a ");h.isDefined(b)&&g.push('target="',b,'" ');g.push('href="',a.replace(/"/g,"&quot;"),'">');k(c);g.push("</a>")}if(!c)return c;for(var m,l=c,g=[],n,p;m=l.match(e);)n=m[0],m[2]||m[4]||(n=(m[3]?"http://":"mailto:")+n),p=m.index,k(l.substr(0,p)),f(n,m[0].replace(d,"")),l=l.substring(p+m[0].length);k(l);return a(g.join(""))}}])})(window,window.angular);
var GCONFIG={max_upload_size:20*1024*1024,image_allow_type:["BMP","JPG","JPEG","PNG","TIF","GIF"],file_allow_type:["PDF","XLS","XLSX","DOC","DOCX","PPT","PPTX","TXT","BMP","JPG","JPEG","PNG","TIF","GIF"],lang:(""+(navigator.language||navigator.userLanguage)).toLowerCase().substr(0,2),errorCall:function(errorObj){switch(errorObj.errorCode){case 980:case 990:if($("div#wliu-autotip-id[wliu-autotip]").length>0){$("div#wliu-autotip-id[wliu-autotip]").trigger("auto",[errorObj.errorMessage,"warning",function(){if(errorObj.errorField&&!$.isArray(errorObj.errorField))window.location.href=errorObj.errorField;}]);}else{alert(errorObj.errorMessage);if(errorObj.errorField&&!$.isArray(errorObj.errorField))window.location.href=errorObj.errorField;}
break;}},saveSuccess:function(errorObj){if(parseInt(errorObj.errorCode)==0){var callback=undefined;if(errorObj.errorField){window.location.href=errorObj.errorField;}
if(errorObj.errorMessage)
$("div#wliu-autotip-id[wliu-autotip]").trigger("auto",[errorObj.errorMessage.nl2br1(),"success"]);else
$("div#wliu-autotip-id[wliu-autotip]").trigger("auto",["Submitted Success.","success"]);}}};String.prototype.nl2br=function(){var str=this.toString();str=str.replace(/\n|\r/gi,"<br>");str=str.replace(/ /gi,"&nbsp;");return str;}
String.prototype.nl2br1=function(){var str=this.toString();str=str.replace(/\n|\r/gi,"<br>");return str;}
String.prototype.br2nl=function(){var str=this.toString();str=str.replace(/<br>|<br \/>/gi,"\n");str=str.replace(/&nbsp;/gi," ");return str;}
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');}
String.prototype.replaceAll=function(s1,s2){return this.replace(new RegExp(s1,"gm"),s2);}
String.prototype.capital=function(){if(this!=""){return this.charAt(0).toUpperCase()+this.slice(1);}else
{return"";}}
String.prototype.join=function(sp,str){if(this!=""&&(""+str)!="")
return this+sp+str;else
return this+(""+str);}
String.prototype.toBlob=function(mime){var bstr=""+this.toString();var n=bstr.length;var u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n);}
return new Blob([u8arr],{type:mime});}
String.prototype.toArray=function(sp,case_sense){case_sense=case_sense?case_sense:"origin";sp=sp?sp:",";var bstr=""+this.toString();var barr=bstr.split(sp);var narr=[];for(var key in barr){switch(case_sense){case"upper":narr.push(barr[key].trim().toUpperCase());break;case"lower":narr.push(barr[key].trim().toLowerCase());break;default:narr.push(barr[key].trim());break;}}
return narr;}
String.prototype.fileName=function(){return this.toString().replace(/.*(\/|\\)/,"");}
String.prototype.shortName=function(){var name=this.toString().replace(/.*(\/|\\)/,"");return name.substr(0,name.lastIndexOf("."));}
String.prototype.extName=function(){return(this.toString().indexOf('.')!==-1)?this.toString().replace(/.*[.]/,'').toLowerCase():'';}
String.prototype.subName=function(n){n=n||10;var name=this.toString().fileName();if(name.length>n){name=name.slice(0,n-6)+'...'+name.slice(-6);}
return name;}
String.prototype.toDate=function(){if(isNaN(this)||parseInt(this)<=0){return new Date(0);}else{return new Date(parseInt(this)*1000);}}
String.prototype.intDate=function(){if(isNaN(this)||parseInt(this)<=0){return"";}else{var ndate=new Date(parseInt(this)*1000);return ndate.format("Y-m-d H:i")}}
Number.prototype.toSize=function(){if(isNaN(this)||parseFloat(this)<=0){return"";}else{var bytes=parseInt(this);var i=-1;do{bytes=bytes/1024;i++;}while(bytes>999);return Math.max(bytes,1).toFixed(1)+['KB','MB','GB','TB','PB','EB'][i];}}
Number.prototype.toDate=function(){if(isNaN(this)||parseInt(this)<=0){return new Date(0);}else{return new Date(parseInt(this)*1000);}}
Number.prototype.intDate=function(){if(isNaN(this)||parseInt(this)<=0){return"";}else{var ndate=new Date(parseInt(this)*1000);return ndate.format("Y-m-d H:i")}}
Date.prototype.diff=function(d2){var t2=this.getTime();var t1=d2.getTime();return parseInt((t2-t1)/(24*3600*1000));}
Date.prototype.timezone=function(){return this.getTimezoneOffset()>=0?"+"+(this.getTimezoneOffset()/60)+":00":"-"+(Math.abs(this.getTimezoneOffset())/60)+":00";};Date.prototype.ticks=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds())/1000};Date.prototype.format=function(format){var returnStr='';var replace=Date.replaceChars;for(var i=0;i<format.length;i++){var curChar=format.charAt(i);if(i-1>=0&&format.charAt(i-1)=="\\"){returnStr+=curChar;}
else if(replace[curChar]){returnStr+=replace[curChar].call(this);}else if(curChar!="\\"){returnStr+=curChar;}}
return returnStr;};Date.replaceChars={shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],longMonths:['January','February','March','April','May','June','July','August','September','October','November','December'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],longDays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d:function(){return(this.getDate()<10?'0':'')+this.getDate();},D:function(){return Date.replaceChars.shortDays[this.getDay()];},j:function(){return this.getDate();},l:function(){return Date.replaceChars.longDays[this.getDay()];},N:function(){return this.getDay()+1;},S:function(){return(this.getDate()%10==1&&this.getDate()!=11?'st':(this.getDate()%10==2&&this.getDate()!=12?'nd':(this.getDate()%10==3&&this.getDate()!=13?'rd':'th')));},w:function(){return this.getDay();},z:function(){var d=new Date(this.getFullYear(),0,1);return Math.ceil((this-d)/86400000);},W:function(){var d=new Date(this.getFullYear(),0,1);return Math.ceil((((this-d)/86400000)+d.getDay()+1)/7);},F:function(){return Date.replaceChars.longMonths[this.getMonth()];},m:function(){return(this.getMonth()<9?'0':'')+(this.getMonth()+1);},M:function(){return Date.replaceChars.shortMonths[this.getMonth()];},n:function(){return this.getMonth()+1;},t:function(){var d=new Date();return new Date(d.getFullYear(),d.getMonth(),0).getDate()},L:function(){var year=this.getFullYear();return(year%400==0||(year%100!=0&&year%4==0));},o:function(){var d=new Date(this.valueOf());d.setDate(d.getDate()-((this.getDay()+6)%7)+3);return d.getFullYear();},Y:function(){return this.getFullYear();},y:function(){return(''+this.getFullYear()).substr(2);},a:function(){return this.getHours()<12?'am':'pm';},A:function(){return this.getHours()<12?'AM':'PM';},B:function(){return Math.floor((((this.getUTCHours()+1)%24)+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)*1000/24);},g:function(){return this.getHours()%12||12;},G:function(){return this.getHours();},h:function(){return((this.getHours()%12||12)<10?'0':'')+(this.getHours()%12||12);},H:function(){return(this.getHours()<10?'0':'')+this.getHours();},i:function(){return(this.getMinutes()<10?'0':'')+this.getMinutes();},s:function(){return(this.getSeconds()<10?'0':'')+this.getSeconds();},u:function(){var m=this.getMilliseconds();return(m<10?'00':(m<100?'0':''))+m;},e:function(){return"Not Yet Supported";},I:function(){var DST=null;for(var i=0;i<12;++i){var d=new Date(this.getFullYear(),i,1);var offset=d.getTimezoneOffset();if(DST===null)DST=offset;else if(offset<DST){DST=offset;break;}else if(offset>DST)break;}
return(this.getTimezoneOffset()==DST)|0;},O:function(){return(-this.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.getTimezoneOffset()/60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()/60))+'00';},P:function(){return(-this.getTimezoneOffset()<0?'-':'+')+(Math.abs(this.getTimezoneOffset()/60)<10?'0':'')+(Math.abs(this.getTimezoneOffset()/60))+':00';},T:function(){var m=this.getMonth();this.setMonth(0);var result=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,'$1');this.setMonth(m);return result;},Z:function(){return-this.getTimezoneOffset()*60;},c:function(){return this.format("Y-m-d\\TH:i:sP");},r:function(){return this.toString();},U:function(){return this.getTime()/1000;}};function guid(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}
return s4()+s4()+'-'+s4()+'-'+s4()+'-'+
s4()+'-'+s4()+s4()+s4();}
function imageAutoFix(img){var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=100;var c_hh=100;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;}
$.fn.extend({hasAttr:function(attrs){if(!attrs||attrs.trim()=="")return false;var flag=true;this.each(function(idx,el){var attrArr=[];attrArr.push(attrs);var seperate="";if(attrs.indexOf(" ")>=0){attrArr=attrs.split(" ");seperate="";}
if(attrs.indexOf(",")>=0){attrArr=attrs.split(",");seperate=",";}
var attrStr="";for(var idx in attrArr){if(attrArr[idx].trim()!=""){var temp1=attrArr[idx].trim();var attrName="";if(temp1.indexOf(" ")>=0){temp2=temp1.split(" ");for(var idx2 in temp2){var temp3=temp2[idx2].trim();attrName+="["+temp3+"]";}}else{attrName="["+attrArr[idx].trim()+"]";}
attrStr+=(attrStr?seperate:"")+attrName;}}
if(attrStr=="")attrStr="*";if($(el).filter(attrStr).length<=0)flag=false;});return flag;},addAttr:function(attrName,attrVal){return this.each(function(idx,el){if(attrVal)
$(el).attr(attrName,attrVal)
else
$(el).attr(attrName,"")});}})
var WLIU=WLIU||{};WLIU.COM=function(){}
WLIU.COM.prototype={check2Array:function(jObj){var nval=[];if($.isPlainObject(jObj)){for(var ckval in jObj){if(jObj[ckval]==true||jObj[ckval]=="true"){nval.push(ckval);}}}
return nval;},array2Check:function(arr){var nval={};if($.isArray(arr)){$.each(arr,function(i,n){nval[n]=true;})}
return nval;},array2Datetime:function(datetimeObj){var nval="";if(datetimeObj&&datetimeObj.date){nval=(datetimeObj.date?datetimeObj.date:"")+(datetimeObj.date&&datetimeObj.time?" ":"")+(datetimeObj.time?datetimeObj.time:"");}else{if(datetimeObj&&datetimeObj.time){nval=datetimeObj.time?datetimeObj.time:"";}}
return nval;},datetime2Array:function(datetimeString){var nval={};nval.date="";nval.time="";if(datetimeString!=""){var dt_part=datetimeString.split(" ");var date_part=(""+dt_part[0]).trim();if(date_part.indexOf("-")>=0||date_part.indexOf("/")>=0){if(date_part!="0000-00-00"&&date_part!="0000/00/00"&&date_part!="00/00/0000")
nval.date=date_part;else
nval.date="";}else if(date_part.indexOf(":")>=0){if(date_part!="00:00"&&date_part!="00:00:00")
nval.time=date_part;else
nval.time="";}
var time_part=(""+dt_part[1]).trim();if(time_part.indexOf(":")>=0){if(time_part!="00:00"&&time_part!="00:00:00"){var tt_tmp=time_part.split(":");nval.time=tt_tmp[0]+":"+tt_tmp[1];}else{nval.time="";}}}
return nval;},colreplace:function(expression_str,rowCols){var ret_val=expression_str;var patern=/{(\w+)(:|.)?(\w+)}/ig;var colArr=ret_val.match(patern);for(var cidx in colArr){var colNames_str=colArr[cidx].replaceAll("{","").replaceAll("}","");if(colNames_str.indexOf(":")>=0){var colNames=colNames_str.split(":");var colName=colNames[0]?colNames[0]:"";var colPrefix=colNames[1]?colNames[1]:"";var colValObj=FCOLLECT.firstByKV(rowCols,{name:colName});var colVal=colValObj?(colValObj.value?colValObj.value:""):"";if(colPrefix!=""&&colVal!="")
ret_val=ret_val.replaceAll(colArr[cidx],colPrefix+colVal);else
ret_val=ret_val.replaceAll(colArr[cidx],colVal);}else if(colNames_str.indexOf(".")>=0){var colNames=colNames_str.split(".");var colName=colNames[0]?colNames[0]:"";var colPrefix=colNames[1]?colNames[1]:"";var colValObj=FCOLLECT.firstByKV(rowCols,{name:colName});var colVal=colValObj?(colValObj.value[colPrefix]?colValObj.value[colPrefix]:""):"";ret_val=ret_val.replaceAll(colArr[cidx],colVal);}else{var colNames=colNames_str;var colName=colNames.trim();var colValObj=FCOLLECT.firstByKV(rowCols,{name:colName});var colVal=colValObj?(colValObj.value?colValObj.value:""):"";ret_val=ret_val.replaceAll(colArr[cidx],colVal);}}
return ret_val;},}
WLIU.OBJECT=function(){}
WLIU.OBJECT.prototype={update:function(col,p_value1,p_value2){switch(arguments.length){case 0:return undefined;case 1:var col=arguments[0];return col;case 2:var col=arguments[0];var keyvalues=arguments[1];if($.isPlainObject(keyvalues)){for(var key in keyvalues){col[key]=keyvalues[key];}}
return col
case 3:var col=arguments[0];var key=arguments[1];var val=arguments[2];col[key]=val;return col;}}}
WLIU.COLLECTION=function(){}
WLIU.COLLECTION.prototype={indexByKV:function(collection,keyvalues){var cidx=-1;$.each(collection,function(i,n){var not_found=false;for(var key in keyvalues){if(n[key]!=keyvalues[key])not_found=true;}
if(!not_found)cidx=i;return not_found;});return cidx;},indexByKeys:function(collection,keys){var cidx=-1;$.each(collection,function(i,n){var found=0;var cnt=0;for(var key in keys){cnt++;if(n.keys){if(n.keys[key]==keys[key]){found++;}else{found--;}}else{found--;}}
if(cnt>0&&found==cnt)cidx=i;return cidx;});return cidx;},objectByIndex:function(collection,cidx){if(cidx>=0&&cidx<collection.length){return collection[cidx];}else{return undefined;}},objectByKV:function(collection,keyvalues){var cidx=this.indexByKV(collection,keyvalues);if(cidx>=0){return collection[cidx];}else{return undefined;}},objectByKeys:function(collection,keys){var cidx=this.indexByKeys(collection,keys);if(cidx>=0){return collection[cidx];}else{return undefined;}},collectionByKV:function(collection,keyvalues){return $.grep(collection,function(n,i){var not_found=false;for(var key in keyvalues){if(n[key]!=keyvalues[key])not_found=true;}
return!not_found;});},firstByKV:function(collection,keyvalues){var ncollection=this.collectionByKV(collection,keyvalues);return ncollection?(ncollection.length>0?ncollection[0]:undefined):undefined;},insert:function(collection,cidx,nobject){if(cidx>=0){if(cidx<collection.length){collection.splice(cidx,0,nobject);}else{collection.push(nobject);}}else if(cidx<0){collection.push(nobject);}
return collection;},update:function(collection,cidx,nobject){if(cidx>=0&&cidx<collection.length){collection[cidx]=nobject;}
return collection;},delete:function(collection,cidx){if(cidx>=0&&cidx<collection.length){collection.splice(cidx,1);return collection;}else{return collection;}}}
WLIU.FILTER=function(opts){this.col={scope:"",name:"",cols:"",colname:"",coldesc:"",coltype:"textbox",datatype:"ALL",need:0,minlength:0,maxlength:0,min:0,max:0,trans:0,list:"",compare:"",defval:"",value:""};$.extend(this.col,opts);this.col.cols=this.col.cols?this.col.cols:this.col.name;this.col.value=this.col.defval?this.col.defval:"";return this.col;}
WLIU.COL=function(opts){this.col={key:0,scope:"",name:"",col:"",colname:"",coldesc:"",table:"",coltype:"textbox",datatype:"ALL",need:0,notnull:0,unique:0,minlength:0,maxlength:0,min:0,max:0,trans:0,sort:"",relation:"",list:"",targetid:"",tooltip:"",css:"input-short",style:"",defval:""};$.extend(this.col,opts);this.col.col=this.col.col?this.col.col:this.col.name;this.col.table=this.col.table?this.col.table.toLowerCase():"p";return this.col;}
WLIU.ROW=function(cols,nameValues,scope){if(scope==undefined)scope="";if(nameValues==undefined)nameValues={};this.guid=nameValues.guid?nameValues.guid:guid();this.type="p";this.parent=0;this.scope=scope;this.rowstate=2;this.error={errorCode:0,errorMessage:""};this.cols=[];for(cidx=0;cidx<cols.length;cidx++){var colObj={};colObj.scope=scope!=""?scope:cols[cidx].scope;colObj.name=cols[cidx].name;colObj.key=cols[cidx].key?cols[cidx].key:0;colObj.defval=cols[cidx].defval?cols[cidx].defval:"";colObj.colname=cols[cidx].colname?cols[cidx].colname:colObj.name.capital();colObj.coldesc=cols[cidx].coldesc?cols[cidx].coldesc:"";colObj.table=cols[cidx].table?cols[cidx].table:"p";colObj.col=cols[cidx].col?cols[cidx].col:cols[cidx].name;colObj.coltype=cols[cidx].coltype?cols[cidx].coltype.toLowerCase():"textbox";colObj.datatype=cols[cidx].datatype?cols[cidx].datatype.toUpperCase():"ALL";colObj.need=cols[cidx].need?cols[cidx].need:0;colObj.notnull=cols[cidx].notnull?cols[cidx].notnull:0;colObj.unique=cols[cidx].unique?cols[cidx].unique:0;colObj.minlength=cols[cidx].minlength?cols[cidx].minlength:0;colObj.maxlength=cols[cidx].maxlength?cols[cidx].maxlength:0;colObj.min=cols[cidx].min?cols[cidx].min:0;colObj.max=cols[cidx].max?cols[cidx].max:0;colObj.trans=cols[cidx].trans?cols[cidx].trans:0;colObj.relation=cols[cidx].relation?cols[cidx].relation:"";colObj.sort=cols[cidx].sort?cols[cidx].sort:"";colObj.list=cols[cidx].list?cols[cidx].list:"";colObj.targetid=cols[cidx].targetid?cols[cidx].targetid:"";colObj.tooltip=cols[cidx].tooltip?cols[cidx].tooltip:"";colObj.css=cols[cidx].css?cols[cidx].css:"input-short";colObj.style=cols[cidx].style?cols[cidx].style:"";colObj.colstate=0;colObj.original="";colObj.current="";colObj.value="";var colValue=nameValues[colObj.name]?nameValues[colObj.name]:(colObj.defval?colObj.defval:"");FROW.setColVal(colObj,colValue);colObj.errorCode=0;colObj.errorMessage="";this.cols.push(colObj);}}
WLIU.FILE=function(opts){this.file={sn:0,errorCode:0,errorMessage:"",scope:"",key1:0,key2:0,key3:0,title_en:"",title_cn:"",detail_en:"",detail_cn:"",full_name:"",short_name:"",ext_name:"",mime_type:"",size:0,access:0,main:0,orderno:0,status:0,url:"",data:"",guid:"",token:""};$.extend(this.file,opts);return this.file;}
WLIU.IMAGE=function(opts){this.image={sn:0,errorCode:0,errorMessage:"",scope:"",id:0,key1:0,key2:0,key3:0,title_en:"",title_cn:"",detail_en:"",detail_cn:"",full_name:"",short_name:"",ext_name:"",mime_type:"",size:0,access:0,main:0,orderno:0,status:0,url:"",guid:"",token:"",resize:{origin:{ww:1000,hh:1000,width:0,height:0,name:"",size:0,data:""},thumb:{ww:100,hh:100,width:0,height:0,name:"",size:0,data:""},tiny:{ww:200,hh:200,width:0,height:0,name:"",size:0,data:""},small:{ww:400,hh:400,width:0,height:0,name:"",size:0,data:""},medium:{ww:600,hh:600,width:0,height:0,name:"",size:0,data:""},large:{ww:800,hh:800,width:0,height:0,name:"",size:0,data:""}}};$.extend(this.image,opts);return this.image;}
WLIU.ROWACTION=function(){}
WLIU.ROWACTION.prototype={rowstate:function(theRow,p_rowstate){if(theRow!=undefined){if(p_rowstate!=undefined)theRow.rowstate=p_rowstate;return theRow.rowstate;}else{return undefined;}},rowerror:function(theRow,p_error){if(theRow!=undefined){if(p_error!=undefined)theRow.error=p_error;return theRow.error;}else{return undefined;}},colerror:function(theRow,col_name,p_error){if(theRow!=undefined){var theCol=FCOLLECT.objectByKV(theRow.cols,{name:col_name});if(theCol!=undefined){if(p_error!=undefined){theCol.errorCode=p_error.errorCode;theCol.errorMessage=p_error.errorMessage;this.validate(theRow);}
return{errorCode:theCol.errorCode,errorMessage:theCol.errorMessage};}else{return undefined;}}else{return undefined;}},validate:function(theRow){var changed=false;var errorCode=0;var errorMessage="";for(var colName in theRow.cols){var theCol=theRow.cols[colName];if(theCol.errorCode>0){errorCode=Math.max(errorCode,theCol.errorCode);errorMessage+=(errorMessage!=""&&theCol.errorMessage!=""?"\n":"")+theCol.errorMessage;}
if(theCol.colstate==1)changed=true;}
theRow.error.errorCode=theRow.error.errorCode<=1?errorCode:theRow.error.errorCode;theRow.error.errorMessage=errorMessage;if(theRow.rowstate<=1){if(changed)
theRow.rowstate=1;else
theRow.rowstate=0;}},colUpdate:function(theRow,theCol,val){if(theRow!=undefined){if(theCol!=undefined){if(val==null)val="";if(val!=undefined){theCol.value=val;if($.isPlainObject(theCol.value)){var objectSame=true;for(var vkey in theCol.value){var curVal=theCol.value[vkey]?theCol.value[vkey]:"";var curCur=theCol.current[vkey]?theCol.current[vkey]:"";if(curVal!=curCur)objectSame=false;}
for(var vkey in theCol.current){var curVal=theCol.value[vkey]?theCol.value[vkey]:"";var curCur=theCol.current[vkey]?theCol.current[vkey]:"";if(curVal!=curCur)objectSame=false;}
if(objectSame)
theCol.colstate=0;else
theCol.colstate=1;}else{if(theCol.value==theCol.current)
theCol.colstate=0;else
theCol.colstate=1;}
theCol.errorCode=0;theCol.errorMessage="";this.validate(theRow);theCol.value=theCol.coltype=="bool"?(theCol.value?true:false):theCol.value;return theCol.value;}else{return theCol.value;}}else{return undefined;}}else{return undefined;}},colRestore:function(theRow,theCol){if(theRow!=undefined){if(theCol!=undefined){var keyvalues={};keyvalues[theCol.name]=angular.copy(theCol.current);this.update(theRow,keyvalues);}}},colChange:function(theRow,theCol){if(theRow&&theCol){var keyvalues={};keyvalues[theCol.name]=theCol.value;return this.update(theRow,keyvalues);}else{return undefined;}},relationCol:function(theRow){if(theRow){return FCOLLECT.firstByKV(theRow.cols,{coltype:"relation"});}else{return undefined;}},relationHide:function(theRow,theCol){if(theRow){var relCol=FCOLLECT.objectByKV(theRow.cols,{coltype:"relation",table:theCol.table});if(relCol){if(relCol.value)
return false;else
return true;}else{return false;}}},relationChange:function(theRow){if(theRow){var relCol=this.relationCol(theRow);if(relCol){if(relCol.value){if(relCol.current){var rCols=FCOLLECT.collectionByKV(theRow.cols,{table:relCol.table});for(var cidx in rCols){if(rCols[cidx].coltype!="relation")this.colRestore(theRow,rCols[cidx]);}}}else{var rCols=FCOLLECT.collectionByKV(theRow.cols,{table:relCol.table});for(var cidx in rCols){if(rCols[cidx].coltype!="relation"){var keyvalues={};keyvalues[rCols[cidx].name]=this.toColVal(rCols[cidx].coltype,"");this.update(theRow,keyvalues);}}}}
return theRow;}else{return undefined;}},update:function(theRow,keyvalues){if(theRow!=undefined){for(var key in keyvalues){var theCol=FCOLLECT.objectByKV(theRow.cols,{name:key});if(theCol!=undefined){return this.colUpdate(theRow,theCol,keyvalues[key]);}}
return theRow;}else{return undefined;}},cancel:function(theRow){var errorCode=0;var errorMessage="";theRow.error.errorCode=errorCode;theRow.error.errorMessage=errorMessage;theRow.rowstate=0;for(var colName in theRow.cols){theRow.cols[colName].colstate=0;theRow.cols[colName].errorCode=0;theRow.cols[colName].errorMessage="";theRow.cols[colName].value=angular.copy(theRow.cols[colName].current);}
return theRow;},detach:function(theRow){if(theRow.rowstate<=1)theRow.rowstate=3;return theRow;},getColVal:function(theCol){var ret_val="";switch(theCol.coltype){case"hidden":case"textbox":case"textarea":case"ckeditor":case"password":case"upload":case"editor":ret_val=theCol.value?theCol.value:"";break;case"checkbox":case"checkbox1":case"checkbox2":case"checkbox3":ret_val=$.isPlainObject(theCol.value)?FCOM.check2Array(theCol.value):[];break;case"date":case"time":ret_val=theCol.value?theCol.value:"";break;case"datetime":ret_val=$.isPlainObject(theCol.value)?FCOM.array2Datetime(theCol.value):"";break;case"select":ret_val=theCol.value?theCol.value:"";break;case"radio":case"radio1":case"radio2":case"radio3":ret_val=theCol.value?theCol.value:0;break;case"relation":case"bool":ret_val=theCol.value?1:0;break;case"passpair":ret_val={}
ret_val.password=theCol.value.password?theCol.value.password:"";ret_val.confirm=theCol.value.confirm?theCol.value.confirm:"";break;case"text":ret_val="";case"daterange":case"timerange":case"range":ret_val={}
ret_val.from=theCol.value.from?theCol.value.from:"";ret_val.to=theCol.value.to?theCol.value.to:"";break;case"datetimerange":ret_val={}
ret_val.from=$.isPlainObject(theCol.value.from)?FCOM.array2Datetime(theCol.value.from):"";ret_val.to=$.isPlainObject(theCol.value.to)?FCOM.array2Datetime(theCol.value.to):"";break;default:ret_val="";break;}
return ret_val;},getCol:function(theCol){var nCol=undefined;switch(theCol.coltype){case"hidden":case"textbox":case"textarea":case"ckeditor":case"password":case"upload":case"editor":case"checkbox":case"checkbox1":case"checkbox2":case"checkbox3":case"date":case"time":case"datetime":case"select":case"radio":case"radio1":case"radio2":case"radio3":case"relation":case"bool":case"passpair":var nCol=angular.copy(theCol);nCol.current="";nCol.value=this.getColVal(nCol);break;case"text":break;default:break;}
return nCol;},getChangeCols:function(theRow){var ncols=[];switch(parseInt(theRow.rowstate)){case 0:break;case 1:for(var cidx in theRow.cols){if(theRow.cols[cidx].key==1||theRow.cols[cidx].need==1||theRow.cols[cidx].coltype=="relation"||theRow.cols[cidx].colstate==1){var ncol=this.getCol(theRow.cols[cidx]);if(ncol)ncols.push(ncol);}}
break;case 2:for(var cidx in theRow.cols){var ncol=this.getCol(theRow.cols[cidx]);if(ncol)ncols.push(ncol);}
break;case 3:for(var cidx in theRow.cols){if(theRow.cols[cidx].key==1||theRow.cols[cidx].coltype=="relation"){var ncol=this.getCol(theRow.cols[cidx]);if(ncol)ncols.push(ncol);}}
break;}
return ncols;},getChangeRow:function(theRow){var nrows=[];if(true){var nrow={};nrow.scope=theRow.scope;nrow.rowstate=theRow.rowstate;nrow.guid=theRow.guid;nrow.type=theRow.type;nrow.parent=theRow.parent;nrow.error={errorCode:0,errorMessage:""};nrow.cols=this.getChangeCols(theRow);nrows.push(nrow);}
return nrows;},resetRow:function(theRow){if(theRow){for(var cIdx in theRow.cols){if(theRow.cols[cIdx].key)continue;var colName=theRow.cols[cIdx].name;var colVal=theRow.cols[cIdx].defval?theRow.cols[cIdx].defval:"";var nameValues={};nameValues[colName]=colVal;this.update(theRow,nameValues);}
return theRow;}else{return undefined;}},setColVal:function(theCol,p_val){if(theCol==undefined)return;var ret_val="";switch(theCol.coltype){case"hidden":case"textbox":case"textarea":case"ckeditor":case"password":case"upload":case"editor":if(theCol.value!=undefined)theCol.value=p_val?p_val:"";if(theCol.current!=undefined)theCol.current=p_val?p_val:"";ret_val=p_val?p_val:"";break;case"checkbox":case"checkbox1":case"checkbox2":case"checkbox3":if(!$.isArray(p_val))p_val=[];if(theCol.value!=undefined)theCol.value=FCOM.array2Check(p_val);if(theCol.current!=undefined)theCol.current=FCOM.array2Check(p_val);ret_val=FCOM.array2Check(p_val);break;case"date":case"time":if(theCol.value!=undefined)theCol.value=p_val?p_val:"";if(theCol.current!=undefined)theCol.current=p_val?p_val:"";ret_val=parseInt(p_val)?p_val:"";break;case"datetime":p_val=p_val?p_val:"";if(theCol.value!=undefined)theCol.value=FCOM.datetime2Array(p_val);if(theCol.current!=undefined)theCol.current=FCOM.datetime2Array(p_val);ret_val=FCOM.datetime2Array(p_val);break;case"select":if(theCol.value!=undefined)theCol.value=p_val?p_val:"";if(theCol.current!=undefined)theCol.current=p_val?p_val:"";ret_val=p_val?p_val:"";break;case"radio":case"radio1":case"radio2":case"radio3":if(theCol.value!=undefined)theCol.value=parseInt(p_val)?parseInt(p_val):0;if(theCol.current!=undefined)theCol.current=parseInt(p_val)?parseInt(p_val):0;ret_val=parseInt(p_val)?parseInt(p_val):0;break;case"relation":case"bool":if(theCol.value!=undefined)theCol.value=parseInt(p_val)?true:false;if(theCol.current!=undefined)theCol.current=parseInt(p_val)?true:false;ret_val=p_val=="1"?true:false;break;case"passpair":if(theCol.value!=undefined){theCol.value={};theCol.value.password=p_val?p_val:"";theCol.value.confirm=p_val?p_val:"";}
if(theCol.current!=undefined){theCol.current={};theCol.current.password=p_val?p_val:"";theCol.current.confirm=p_val?p_val:"";}
ret_val=angular.copy(theCol.value);break;case"text":if(theCol.value!=undefined)theCol.value=p_val?p_val:"";if(theCol.current!=undefined)theCol.current=p_val?p_val:"";ret_val=p_val?p_val:"";break;default:if(theCol.value!=undefined)theCol.value=p_val?p_val:"";if(theCol.current!=undefined)theCol.current=p_val?p_val:"";ret_val=p_val?p_val:"";break;}
return ret_val;},toColVal:function(colType,p_val){var ret_val="";switch(colType){case"hidden":case"textbox":case"textarea":case"ckeditor":case"password":case"upload":case"editor":ret_val=p_val?p_val:"";break;case"checkbox":case"checkbox1":case"checkbox2":case"checkbox3":if(!$.isArray(p_val))p_val=[];ret_val=FCOM.array2Check(p_val);break;case"date":case"time":ret_val=p_val?p_val:"";break;case"datetime":p_val=p_val?p_val:"";ret_val=FCOM.datetime2Array(p_val);break;case"select":ret_val=p_val?p_val:"";break;case"radio":case"radio1":case"radio2":case"radio3":ret_val=p_val?p_val:0;break;case"relation":case"bool":ret_val=p_val=="1"?true:false;break;case"passpair":ret_val={};ret_val.password=p_val?p_val:"";ret_val.confirm=p_val?p_val:"";break;case"text":ret_val=p_val?p_val:"";break;default:ret_val=p_val?p_val:"";break;}
return ret_val;}}
WLIU.TABLEACTION=function(){}
WLIU.TABLEACTION.prototype={index:function(theTable,guid){return FCOLLECT.indexByKV(theTable.rows,{guid:guid});},indexByRow:function(theTable,theRow){return this.index(theTable,theRow.guid);},getRowKeys:function(theTable,theRow){var r_rowKeys={};if(theRow&&theRow.cols){var keyCols=FCOLLECT.collectionByKV(theRow.cols,{key:1});for(var kidx in keyCols){r_rowKeys[keyCols[kidx].name]=keyCols[kidx].value;}}
return r_rowKeys;},setColsDefault:function(theTable,IDKeyValues){if($.isPlainObject(IDKeyValues)){for(var key in IDKeyValues){this.colDefault(theTable,key,IDKeyValues[key]);}}},tableErrorReset:function(theTable){theTable.error.errorCode=0;theTable.error.errorMessage="";for(var ridx in theTable.rows){if(theTable.rows[ridx].error.errorCode>0){theTable.error.errorCode=Math.max(theTable.error.errorCode,theTable.rows[ridx].error.errorCode);theTable.error.errorMessage+=(theTable.error.errorMessage?"\n":"")+theTable.rows[ridx].error.errorMessage;}}},tableError:function(theTable,p_error){if(p_error!=undefined){theTable.error=angular.copy(p_error);}
return theTable.error;},colMeta:function(theTable,col_name){return FCOLLECT.objectByKV(theTable.cols,{name:col_name});},colDefault:function(theTable,col_name,p_value){var theCol=this.colMeta(theTable,col_name);if(theCol){FOBJECT.update(theCol,{defval:p_value});return theCol.defval;}else{return undefined;}},colRelation:function(theTable){return FCOLLECT.objectByKV(theTable.cols,{coltype:"relation"});},colList:function(theTable,col_name){var ret_list={};var oCol=this.colMeta(theTable,col_name);if(oCol){var listName=oCol.list?oCol.list:"";if(listName){if(theTable.lists[listName]){ret_list=theTable.lists[listName];}}}
return ret_list;},relationHide:function(theTable,theRow,col_name){var t_row=this.getRow(theTable,theRow);var theCol=this.getCol(theTable,t_row,col_name);return FROW.relationHide(t_row,theCol);},relationChange:function(theTable,theRow){var t_row=this.getRow(theTable,theRow);return FROW.relationChange(t_row);},relationHideCurrent:function(theTable,col_name){var theRow=this.getCurrent(theTable);var theCol=this.getCol(theTable,theRow,col_name);return FROW.relationHide(theRow,theCol);},relationChangeCurrent:function(theTable){var theRow=this.getCurrent(theTable);return FROW.relationChange(theRow);},getList:function(theTable,list_name){if(theTable.lists){if(theTable.lists[list_name])
return theTable.lists[list_name];else
return undefined;}else{return undefined;}},getLists:function(theTable){var nlists={};for(var lname in theTable.lists){if(theTable.lists[lname].loaded==0){nlists[lname]={};nlists[lname].loaded=0;nlists[lname].list=[];}}
return nlists;},setLists:function(theTable,nlists){for(var listName in nlists){var nlistObj=theTable.getList(listName);if(nlistObj){nlistObj.loaded=nlists[listName].loaded;nlistObj.keys=nlists[listName].keys;nlistObj.list=nlists[listName].list;}}
return theTable.lists;},filterMeta:function(theTable,col_name){return FCOLLECT.firstByKV(theTable.filters,{name:col_name});},filterClear:function(theTable){for(var fidx in theTable.filters){FROW.setColVal(theTable.filters[fidx],"");}
return theTable.filters;},filterValue:function(theTable,name,val){if(val!=undefined){if(theTable.filterMeta(name)){return FROW.setColVal(this.filterMeta(name),val);}else{return undefined;}}else{if(theTable.filterMeta(name)){return FROW.getColVal(theTable.filterMeta(name));}else{return undefined;}}},filterDefault:function(theTable,name,val){if(val!=undefined){if(theTable.filterMeta(name)){theTable.filterMeta(name).defval=val;theTable.filterMeta(name).value=val;return val;}else{return undefined;}}else{if(theTable.filterMeta(name)){return theTable.filterMeta(name).defval?theTable.filterMeta(name).defval:undefined;}else{return undefined;}}},getFilters:function(theTable){var nfilters=[];for(var fidx in theTable.filters){var nfilter=angular.copy(theTable.filters[fidx]);nfilter.value=FROW.getColVal(theTable.filters[fidx]);if(nfilter.need)nfilters.push(nfilter);if($.isArray(nfilter.value)&&nfilter.value.length>0&&!nfilter.need)nfilters.push(nfilter);if(!$.isArray(nfilter.value)&&nfilter.value&&!$.isPlainObject(nfilter.value)&&!nfilter.need)nfilters.push(nfilter);if($.isPlainObject(nfilter.value)&&(nfilter.value.from!=""||nfilter.value.to!="")&&!nfilter.need)nfilters.push(nfilter);}
return nfilters;},getRow:function(theTable,theRow){if(theRow){return theRow;}},getRowByGuid:function(theTable,guid){return FCOLLECT.objectByKV(theTable.rows,{guid:guid});},getCurrent:function(theTable){var rowidx=this.index(theTable,theTable.current);if(rowidx>=0&&rowidx<theTable.rows.length){return theTable.rows[rowidx];}else{return undefined;}},getCol:function(theTable,theRow,col_name){var t_row=this.getRow(theTable,theRow);if(t_row!=undefined){return FCOLLECT.objectByKV(t_row.cols,{name:col_name});}else{return undefined;}},getColCurrent:function(theTable,col_name){var t_row=this.getCurrent(theTable);if(t_row!=undefined){return FCOLLECT.objectByKV(t_row.cols,{name:col_name});}else{return undefined;}},getColByGuid:function(theTable,guid,col_name){var t_row=this.getRowByGuid(theTable,guid);if(t_row!=undefined){return FCOLLECT.objectByKV(t_row.cols,{name:col_name});}else{return undefined;}},changeCol:function(theTable,theRow,col_name){var t_row=this.getRow(theTable,theRow);var t_col=this.getCol(theTable,t_row,col_name);var col=FROW.colChange(t_row,t_col);this.tableErrorReset(theTable);return col;},changeColCurrent:function(theTable,col_name){var t_row=this.getCurrent(theTable);var t_col=this.getCol(theTable,t_row,col_name);var col=FROW.colChange(t_row,t_col);this.tableErrorReset(theTable);return col;},changeColByGuid:function(theTable,guid,col_name){var t_row=this.getRowByGuid(theTable,guid);var t_col=this.getColByGuid(theTable,guid,col_name);return FROW.colChange(t_row,t_col);},setImage:function(theTable,theRow,col_name,oImg){var t_col=this.getCol(theTable,theRow,col_name);if(t_col){var view="medium";if(this.colMeta(theTable,col_name)&&this.colMeta(theTable,col_name).view)view=this.colMeta(theTable,col_name).view;t_col.value=oImg.resize[view].data;}},setImageCurrent:function(theTable,col_name,oImg){var t_row=this.getCurrent(theTable);var t_col=this.getCol(theTable,t_row,col_name);if(t_col){var view="medium";if(this.colMeta(theTable,col_name)&&this.colMeta(theTable,col_name).view)view=this.colMeta(theTable,col_name).view;t_col.value=oImg.resize[view].data;}},newRow:function(theTable,keyvalues){var t_row=new WLIU.ROW(theTable.cols,keyvalues,theTable.scope);return t_row;},addRow:function(theTable,ridx,nrow){if(ridx==undefined)ridx=0;if(!nrow){nrow=this.newRow(theTable);}
FCOLLECT.insert(theTable.rows,ridx,nrow);theTable.current=nrow.guid;return nrow;},formInit:function(theTable,IDKeyValues,callback){this.init(theTable,IDKeyValues,callback);},formNew:function(theTable,IDKeyValues,callback){if(this.colRelation(theTable))this.colRelation(theTable).defval=true;this.init(theTable,IDKeyValues,{ajaxSuccess:function(){theTable.addRow();if(!theTable.sc.$$phase){theTable.sc.$apply();}
if(callback)if($.isFunction(callback))callback(theTable);}});},formReset:function(theTable){if(this.colRelation(theTable))this.colRelation(theTable).defval=true;theTable.rows=[];theTable.addRow();this.tableErrorReset(theTable);},formGet:function(theTable,IDKeyValues,callback){if(this.colRelation(theTable))this.colRelation(theTable).defval=true;this.setColsDefault(theTable,IDKeyValues);this.getRows(theTable,callback);},getRecords:function(theTable,IDKeyValues,callback){this.setColsDefault(theTable,IDKeyValues);this.getRows(theTable,callback);},getAllRecords:function(theTable,IDKeyValues,callback){this.setColsDefault(theTable,IDKeyValues);this.allRows(theTable,callback);},getMatchRecords:function(theTable,IDKeyValues,callback){this.setColsDefault(theTable,IDKeyValues);this.matchRows(theTable,callback);},removeRow:function(theTable,theRow){if(theTable&&theRow){var ridx=this.index(theTable,theRow.guid);FCOLLECT.delete(theTable.rows,ridx);}
return theRow;},detachRow:function(theTable,theRow){return FROW.detach(theRow);},cancelRow:function(theTable,theRow){if(theRow){switch(parseInt(theRow.rowstate)){case 0:break;case 1:FROW.cancel(theRow);break;case 2:this.removeRow(theTable,theRow);break;case 3:FROW.cancel(theRow);break;}
this.tableErrorReset(theTable);return theRow;}else{return undefined;}},resetRow:function(theTable,theRow){FROW.resetRow(theRow);this.tableErrorReset(theTable);},cancelRows:function(theTable){for(var i=theTable.rows.length-1;i>=0;i--){this.cancelRow(theTable,theTable.rows[i]);}
theTable.error.errorCode=0;theTable.error.errorMessage="";return theTable.rows;},getChangeRows:function(theTable){var nrows=[];for(var ridx in theTable.rows){if(theTable.rows[ridx].rowstate>0){var theRow=theTable.rows[ridx];if(true){var nrow={};nrow.scope=theRow.scope;nrow.guid=theRow.guid;nrow.type=theRow.type;nrow.parent=theRow.parent;nrow.rowstate=theRow.rowstate;nrow.error={errorCode:0,errorMessage:""};nrow.cols=FROW.getChangeCols(theRow);nrows.push(nrow);}}}
return nrows;},init:function(theTable,IDKeyValues,callback){this.setColsDefault(theTable,IDKeyValues);theTable.rows=[];var ntable={};ntable.scope=theTable.scope;ntable.lang=theTable.lang;ntable.action="init";ntable.error={errorCode:0,errorMessage:""};ntable.cols=theTable.cols;ntable.navi=theTable.navi;ntable.lists=this.getLists(theTable);this.ajaxCall(theTable,ntable,callback);},getRows:function(theTable,callback){var ntable={};ntable.scope=theTable.scope;ntable.lang=theTable.lang;ntable.action="get";ntable.error={errorCode:0,errorMessage:""};ntable.cols=theTable.cols;ntable.navi=theTable.navi;ntable.filters=this.getFilters(theTable);ntable.lists=this.getLists(theTable);ntable.rows=[];this.ajaxCall(theTable,ntable,callback);},allRows:function(theTable,callback){theTable.navi.match=0;this.getRows(theTable,callback);},matchRows:function(theTable,callback){theTable.navi.match=1;this.getRows(theTable,callback);},saveRow:function(theTable,theRow,callback){var ntable={};ntable.scope=theTable.scope;ntable.lang=theTable.lang;ntable.action="save";ntable.error={errorCode:0,errorMessage:""};ntable.cols=theTable.cols;ntable.navi=theTable.navi;ntable.lists=this.getLists(theTable);ntable.rows=FROW.getChangeRow(theRow);this.ajaxCall(theTable,ntable,callback);},saveRows:function(theTable,callback){var ntable={};ntable.scope=theTable.scope;ntable.lang=theTable.lang;ntable.action="save";ntable.error={errorCode:0,errorMessage:""};ntable.cols=theTable.cols;ntable.navi=theTable.navi;ntable.lists=this.getLists(theTable);ntable.rows=this.getChangeRows(theTable);this.ajaxCall(theTable,ntable,callback);},ajaxCall:function(theTable,ntable,callback){var _self=theTable;$("div#wliu-wait-id[wliu-wait]").trigger("show");_self.navi.loading=1;if(callback&&callback.ajaxBefore&&$.isFunction(callback.ajaxBefore))callback.ajaxBefore(ntable);$.ajax({data:{table:ntable},dataType:"json",contentType:"application/x-www-form-urlencoded",error:function(xhr,tStatus,errorTh){$("div#wliu-wait-id[wliu-wait]").trigger("hide");},success:function(req,tStatus){$("div#wliu-wait-id[wliu-wait]").trigger("hide");if(callback&&callback.ajaxAfter&&$.isFunction(callback.ajaxAfter))callback.ajaxAfter(req.table);_self.tableError(req.table.error);switch(req.table.action){case"init":case"get":FTABLE.setLists(_self,req.table.lists);FTABLE.syncRows(_self,req.table);break;case"save":FTABLE.updateRows(_self,req.table);break;}
if(parseInt(req.table.error.errorCode)==0){if(callback&&callback.ajaxSuccess&&$.isFunction(callback.ajaxSuccess))callback.ajaxSuccess(_self);}else{if(callback&&callback.ajaxError&&$.isFunction(callback.ajaxError))callback.ajaxError(_self);}
if(callback&&callback.ajaxComplete&&$.isFunction(callback.ajaxComplete))callback.ajaxComplete(_self);_self.navi.loading=0;if(!_self.sc.$$phase){_self.sc.$apply();}
GCONFIG.errorCall(req.table.error);$("#wliu-table-error-popup[scope='"+_self.scope+"']").trigger("ishow");},type:"post",url:_self.url});},syncRows:function(theTable,ntable){theTable.rows=[];theTable.current="";theTable.navi=angular.copy(ntable.navi);theTable.rights=angular.copy(ntable.rights);if(ntable.primary&&$.isArray(ntable.primary)){if(ntable.primary.length>0){for(var pidx in ntable.primary){var colObj=ntable.primary[pidx];for(var colName in colObj){theTable.colDefault(colName,colObj[colName]);}}}}
for(var ridx in ntable.rows){var theRow=ntable.rows[ridx];var nrow=theTable.newRow(theRow);nrow.rowstate=0;for(var colName in theRow){ncol=FCOLLECT.firstByKV(nrow.cols,{name:colName});FROW.setColVal(ncol,theRow[colName]);}
FTABLE.addRow(theTable,-1,nrow);}
if(theTable.firstone&&theTable.rows.length>0){theTable.current=theTable.rows[0].guid;}else{theTable.current="";}},updateRows:function(theTable,ntable){theTable.rights=angular.copy(ntable.rights);if(ntable.primary&&$.isArray(ntable.primary)){if(ntable.primary.length>0){for(var pidx in ntable.primary){var colObj=ntable.primary[pidx];for(var colName in colObj){theTable.colDefault(colName,colObj[colName]);}}}}
for(var ridx in ntable.rows){var nRow=ntable.rows[ridx];var tableRow=theTable.getRowByGuid(nRow.guid);if(tableRow){if(parseInt(nRow.error.errorCode)>0){switch(parseInt(nRow.rowstate)){case 0:break;case 1:theTable.rowError(tableRow,nRow.error);for(var cidx in nRow.cols){theTable.colError(tableRow,nRow.cols[cidx].name,{errorCode:nRow.cols[cidx].errorCode,errorMessage:nRow.cols[cidx].errorMessage});}
break;case 2:theTable.rowError(tableRow,nRow.error);for(var cidx in nRow.cols){theTable.colError(tableRow,nRow.cols[cidx].name,{errorCode:nRow.cols[cidx].errorCode,errorMessage:nRow.cols[cidx].errorMessage});}
break;case 3:theTable.rowError(tableRow,nRow.error);break;}}else{switch(parseInt(nRow.rowstate)){case 0:break;case 1:theTable.rowError(tableRow,nRow.error);tableRow.rowstate=0;for(var cidx in tableRow.cols){tableRow.cols[cidx].colstate=0;tableRow.cols[cidx].current=angular.copy(tableRow.cols[cidx].value);theTable.colError(tableRow,tableRow.cols[cidx].name,{errorCode:0,errorMessage:""});}
break;case 2:theTable.rowError(tableRow,nRow.error);tableRow.rowstate=0;for(var cidx in tableRow.cols){if(tableRow.cols[cidx].key){var keyColObj=FCOLLECT.objectByKV(nRow.cols,{name:tableRow.cols[cidx].name});if(keyColObj){FROW.setColVal(tableRow.cols[cidx],keyColObj.value);}}
tableRow.cols[cidx].colstate=0;tableRow.cols[cidx].current=angular.copy(tableRow.cols[cidx].value);theTable.colError(tableRow,tableRow.cols[cidx].name,{errorCode:0,errorMessage:""});}
theTable.navi.recordtotal++;break;case 3:theTable.rowError(tableRow,nRow.error);tableRow.rowstate=0;if(parseInt(tableRow.error.errorCode)<=0){if(theTable.current==tableRow.guid)theTable.current="";theTable.removeRow(tableRow);theTable.navi.recordtotal--;}
break;}}}}
GCONFIG.saveSuccess(theTable.error);},errorCall:function(theTable){if(theTable.error.errorCode==990){window.location.href=theTable.error.errorField;}},firstPage:function(theTable){if(theTable.navi.pageno<=0){theTable.navi.pageno=1;}
if(theTable.navi.pagetotal<=0)theTable.navi.pageno=0;if(theTable.navi.pageno>1&&theTable.navi.pagetotal>0){theTable.navi.pageno=1;this.getRows(theTable);}},firstState:function(theTable){return!theTable.navi.pageno||!theTable.navi.pagetotal||theTable.navi.pageno<=1||theTable.navi.pagetotal<=0},previousPage:function(theTable){if(theTable.navi.pageno<=0){theTable.navi.pageno=1;}
if(theTable.navi.pagetotal<=0)theTable.navi.pageno=0;if(theTable.navi.pageno>1){theTable.navi.pageno--;this.getRows(theTable);}},previousState:function(theTable){return!theTable.navi.pageno||!theTable.navi.pagetotal||theTable.navi.pageno<=1||theTable.navi.pagetotal<=0},nextPage:function(theTable){if(theTable.navi.pagetotal<=0)theTable.navi.pageno=0;if(theTable.navi.pageno>theTable.navi.pagetotal){theTable.navi.pageno=theTable.navi.pagetotal;this.getRows(theTable);}
if(theTable.navi.pageno<theTable.navi.pagetotal){theTable.navi.pageno++;this.getRows(theTable);}},nextState:function(theTable){return!theTable.navi.pageno||!theTable.navi.pagetotal||theTable.navi.pageno>=theTable.navi.pagetotal||theTable.navi.pagetotal<=0},lastPage:function(theTable){if(theTable.navi.pagetotal<=0)theTable.navi.pageno=0;if(theTable.navi.pageno!=theTable.navi.pagetotal){theTable.navi.pageno=theTable.navi.pagetotal;this.getRows(theTable);}},lastState:function(theTable){return!theTable.navi.pageno||!theTable.navi.pagetotal||theTable.navi.pageno>=theTable.navi.pagetotal||theTable.navi.pagetotal<=0;},rowno:function(theTable,guid){if(guid!=undefined){return this.index(theTable,guid);}else{return this.index(theTable,theTable.current);}},navLeft:function(theTable){var rowidx=this.rowno(theTable);if(rowidx<0)rowidx=0;if(rowidx>0&&rowidx<theTable.rows.length)rowidx--;theTable.current=theTable.rows[rowidx]?theTable.rows[rowidx].guid:"";},navLeftState:function(theTable){var rowidx=this.rowno(theTable);if(rowidx>0&&table.rows.length>0)
return true;else
return false;},navRight:function(theTable){var rowidx=this.rowno(theTable);if(rowidx<0)rowidx=0;if(rowidx>=theTable.rows.length-1)rowidx=theTable.rows.length-1;if(rowidx>=0&&rowidx<theTable.rows.length-1)rowidx++;theTable.current=theTable.rows[rowidx]?theTable.rows[rowidx].guid:"";},navRightState:function(theTable){var rowidx=this.rowno(theTable);if(rowidx>=0&&rowidx<theTable.rows.length-1&&table.rows.length>0)
return true;else
return false;},orderState:function(theTable,name,sort){var colMeta=this.colMeta(theTable,name);var colName=colMeta.trans?colMeta.col:colMeta.table+"."+colMeta.col;if(theTable.navi.orderby==colName&&(theTable.navi.sortby.toUpperCase()==sort.toUpperCase()||(theTable.navi.sortby==""&&colMeta.sort.toUpperCase()==sort.toUpperCase())))
return true;else
return false;}}
WLIU.FILEACTION=function(opts){this.allowSize=GCONFIG.max_upload_size;this.allowType=GCONFIG.file_allow_type;if(opts){if(opts.allowSize)this.allowSize=opts.allowSize;if(opts.allowType)this.allowType=opts.allowType;}}
WLIU.FILEACTION.prototype={fromFile:function(theFile,file,callback){theFile.full_name=file.name.fileName();theFile.short_name=file.name.shortName();theFile.ext_name=file.name.extName();theFile.mime_type=file.type;theFile.size=file.size;theFile.errorCode=0;theFile.errorMessage="";if(this.allowType.indexOf(theFile.ext_name.toUpperCase())>=0||this.allowType.indexOf("*")>=0){if(theFile.size<=this.allowSize){this._fromBlob(theFile,file,callback);}else{theFile.errorCode=1;theFile.errorMessage="File size {"+theFile.size.toSize()+"} over maximum size {"+this.allowSize.toSize()+"}.";if(callback)if($.isFunction(callback))callback(theFile);}}else{theFile.errorCode=1;theFile.errorMessage="Only file type: ["+this.allowType.join(", ")+"] allow to upload.";if(callback)if($.isFunction(callback))callback(theFile);}},exportFile:function(theFile){if(theFile.data)window.open(theFile.data);},exportBlob:function(blob){this._readBlob(blob,function(dataURL){if(dataURL)window.open(dataURL);});},exportDataURL:function(dataURL){if(dataURL)window.open(dataURL);},exportBase64:function(base64_str,mimeType){if(mimeType)
if(base64_str)window.open(this.toBase64(base64_str,mimeType));else
if(base64_str)window.open(base64_str);},exportHTML:function(html){if(html)this.exportDataURL(this._string2DataURL(html,"text/html"));},_fromBlob:function(theFile,file,callback){var fs=new FileReader();fs.onload=function(ev1){theFile.data=ev1.target.result;if(callback)if($.isFunction(callback))callback(theFile);}
fs.readAsDataURL(file);},_readBlob:function(file,callback){var fs=new FileReader();fs.onload=function(ev1){var data=ev1.target.result;if(callback)if($.isFunction(callback))callback(data);}
fs.readAsDataURL(file);},_mimeType:function(dataURL){try{var arr=dataURL.split(',');var mime=arr[0].match(/:(.*?);/)[1];return mime;}catch(err){return"";}},_dataURL2Blob:function(dataURL){try{var arr=dataURL.split(',');var mime=arr[0].match(/:(.*?);/)[1];var bstr=atob(arr[1]);var n=bstr.length;var u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n);}
return new Blob([u8arr],{type:mime});}
catch(err){}},_string2DataURL:function(str,mimeType){var base64_str=btoa(str);return"data:"+mimeType+";base64,"+base64_str;},_base64DataURL:function(base64_str,mimeType){return"data:"+mimeType+";base64,"+base64_str;}}
WLIU.IMAGEACTION=function(opts){this.allowSize=GCONFIG.max_upload_size,this.allowType=GCONFIG.image_allow_type;this.view="medium";this.execute=[];if(opts){if(opts.allowSize)this.allowSize=opts.allowSize;if(opts.allowType)this.allowType=opts.allowType;}}
WLIU.IMAGEACTION.prototype={setScope:function(theImage,p_scope,ngName){if(ngName){p_scope[ngName]=theImage;}else{p_scope.imgobj=theImage;}},setView:function(view){if(view)
this.view=view
else
this.view="medium";},doneReset:function(){this.execute=[];},fromFile:function(theImage,file,callback,donecall){theImage.full_name=file.name.fileName();theImage.short_name=file.name.shortName();theImage.ext_name=file.name.extName();theImage.mime_type=file.type;theImage.size=file.size;theImage.errorCode=0;theImage.errorMessage="";this.doneReset();if(this.allowType.indexOf(theImage.ext_name.toUpperCase())>=0||this.allowType.indexOf("*")>=0){if(theImage.size<=this.allowSize){this._fromBlob(theImage,file,callback,donecall);}else{theImage.errorCode=1;theImage.errorMessage="File size "+theImage.size.toSize()+" over maximum size "+this.allowSize.toSize()+".";if(callback)if($.isFunction(callback))callback(theImage);if(donecall)if($.isFunction(donecall))donecall(theImage);}}else{theImage.errorCode=1;theImage.errorMessage="Only file type: ["+this.allowType.join(", ")+"] allow to upload.";if(callback)if($.isFunction(callback))callback(theImage);if(donecall)if($.isFunction(donecall))donecall(theImage);}},exportImage:function(theImage,rsize){var base64_data=this.imageData(theImage,rsize);FFILE.exportDataURL(base64_data);},clearImage:function(theImage){theImage=new WLIU.IMAGE();return theImage;},imageData:function(theImage,view){if(view){if(theImage.resize[view])
if(theImage.resize[view].data)
return theImage.resize[view].data;else
return"";else
return"";}else{if(theImage.resize[this.view])
if(theImage.resize[this.view].data)
return theImage.resize[this.view].data;else
return"";else
return"";}},image2Canvas:function(ctx,dataUrl,callback){var img=new Image();img.onload=function(){ctx.drawImage(img,0,0);if(callback)if($.isFunction(callback))callback(ctx);}
img.src=dataUrl;},resizeAll:function(theImage,callback,donecall){this.doneReset();this._resizeAll(theImage,callback,donecall);},rotate:function(theImage,callback,donecall){this.doneReset();this._rotateAll(theImage,callback,donecall);},crop:function(theImage,ww,hh,x,y,nw,nh,callback,donecall){this.doneReset();this._cropLarge(theImage,ww,hh,x,y,nw,nh,callback,donecall);},cropDiv:function(theImage,frame_div,crop_div,callback,donecall){this.doneReset();this._cropLarge(theImage,frame_div.width(),frame_div.height(),crop_div.position().left,crop_div.position().top,crop_div.outerWidth(),crop_div.outerHeight(),callback,donecall);},cropDivReset:function(crop_div){crop_div.css({left:"5%",top:"5%",width:"90%",height:"90%"});},cropReset:function(theImage,callback,donecall){this.doneReset();this._cropReset(theImage,callback,donecall);},_fromBlob:function(theImage,file,callback,donecall){var _self=this;var fs=new FileReader();fs.onload=function(ev1){var data=ev1.target.result;_self._imageDataURL(theImage,data,callback,donecall);}
fs.readAsDataURL(file);},_readBlob:function(file,callback){var fs=new FileReader();fs.onload=function(ev1){var data=ev1.target.result;if(callback)if($.isFunction(callback))callback(data);}
fs.readAsDataURL(file);},_imageDataURL:function(theImage,dataURL,callback,donecall){var _self=this;var t_img=new Image();t_img.onload=function(){_self._initImage(theImage,t_img,callback,donecall);}
t_img.src=dataURL;},_initImage:function(theImage,t_img,callback,donecall){var _self=this;var originImg=theImage.resize.origin;var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var ratio_ww=1;var ratio_hh=1;if(_self.scale){if(originImg.ww>0)ratio_ww=originImg.ww/t_img.width;if(originImg.hh>0)ratio_hh=originImg.hh/t_img.height;}else{if(originImg.ww>0&&t_img.width>originImg.ww)ratio_ww=originImg.ww/t_img.width;if(originImg.hh>0&&t_img.height>originImg.hh)ratio_hh=originImg.hh/t_img.height;}
var ratio=Math.min(ratio_ww,ratio_hh);canvas.width=t_img.width*ratio;canvas.height=t_img.height*ratio;ctx.drawImage(t_img,0,0,t_img.width,t_img.height,0,0,canvas.width,canvas.height);var imgDataURL=canvas.toDataURL(theImage.mime_type);originImg.width=canvas.width;originImg.height=canvas.height;originImg.data=imgDataURL;originImg.size=imgDataURL.length;originImg.name="origin";canvas=null;_self._resizeAll(theImage,callback,donecall);if(callback&&_self.view=="origin")if($.isFunction(callback))callback(originImg);},_resizeAll:function(theImage,callback,donecall){var _self=this;_self.execute.push("origin");for(var rname in theImage.resize){if(rname!="origin"){this._resizeImage(theImage,rname,callback,donecall);}}},_resizeImage:function(theImage,rname,callback,donecall){var _self=this;var originImg=theImage.resize.origin;var resizeImg=theImage.resize[rname];var t_img=new Image();t_img.onload=function(){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var ratio_ww=1;var ratio_hh=1;if(_self.scale){if(resizeImg.ww>0)ratio_ww=resizeImg.ww/t_img.width;if(resizeImg.hh>0)ratio_hh=resizeImg.hh/t_img.height;}else{if(resizeImg.ww>0&&t_img.width>resizeImg.ww)ratio_ww=resizeImg.ww/t_img.width;if(resizeImg.hh>0&&t_img.height>resizeImg.hh)ratio_hh=resizeImg.hh/t_img.height;}
var ratio=Math.min(ratio_ww,ratio_hh);canvas.width=t_img.width*ratio;canvas.height=t_img.height*ratio;ctx.drawImage(t_img,0,0,t_img.width,t_img.height,0,0,canvas.width,canvas.height);var imgDataURL=canvas.toDataURL(theImage.mime_type);resizeImg.width=canvas.width;resizeImg.height=canvas.height;resizeImg.data=imgDataURL;resizeImg.size=imgDataURL.length;resizeImg.name=rname;if(callback&&_self.view==rname)if($.isFunction(callback))callback(resizeImg);_self.execute.push(rname);var flag_done=true;if(_self.execute.length<6)flag_done=false;if(donecall&&flag_done)if($.isFunction(donecall))donecall(theImage);canvas=null;}
t_img.src=originImg.data;},_resizeImageFromLarge:function(theImage,rname,callback,donecall){var _self=this;var largeImg=theImage.resize.large;var resizeImg=theImage.resize[rname];var t_img=new Image();t_img.onload=function(){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var ratio_ww=1;var ratio_hh=1;if(_self.scale){if(resizeImg.ww>0)ratio_ww=resizeImg.ww/t_img.width;if(resizeImg.hh>0)ratio_hh=resizeImg.hh/t_img.height;}else{if(resizeImg.ww>0&&t_img.width>resizeImg.ww)ratio_ww=resizeImg.ww/t_img.width;if(resizeImg.hh>0&&t_img.height>resizeImg.hh)ratio_hh=resizeImg.hh/t_img.height;}
var ratio=Math.min(ratio_ww,ratio_hh);canvas.width=t_img.width*ratio;canvas.height=t_img.height*ratio;ctx.drawImage(t_img,0,0,t_img.width,t_img.height,0,0,canvas.width,canvas.height);var imgDataURL=canvas.toDataURL(theImage.mime_type);resizeImg.width=canvas.width;resizeImg.height=canvas.height;resizeImg.data=imgDataURL;resizeImg.size=imgDataURL.length;resizeImg.name=rname;if(callback&&_self.view==rname)if($.isFunction(callback))callback(resizeImg);_self.execute.push(rname);var flag_done=true;if(_self.execute.length<6)flag_done=false;if(donecall&&flag_done)if($.isFunction(donecall))donecall(theImage);canvas=null;}
t_img.src=largeImg.data;},_rotateAll:function(theImage,callback,donecall){this.execute.push("origin");for(var rname in theImage.resize){if(rname!="origin")this._rotateImage(theImage,rname,callback,donecall);}},_rotateImage:function(theImage,rname,callback,donecall){var _self=this;var degree=90;var resizeImg=theImage.resize[rname];var t_img=new Image();t_img.onload=function(){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");if(degree%180==0){canvas.width=t_img.width;canvas.height=t_img.height;}else{canvas.width=t_img.height;canvas.height=t_img.width;}
ctx.translate(canvas.width/2,canvas.height/2);ctx.rotate(degree*Math.PI/180);ctx.drawImage(t_img,-t_img.width/2,-t_img.height/2);var imgDataURL=canvas.toDataURL(theImage.mime_type);resizeImg.data=imgDataURL;resizeImg.width=canvas.width;resizeImg.height=canvas.height;resizeImg.size=imgDataURL.length;canvas=null;if(callback&&$.isFunction(callback)&&_self.view==rname)callback(resizeImg);_self.execute.push(rname);var flag_done=true;if(_self.execute.length<6)flag_done=false;if(donecall&&flag_done)if($.isFunction(donecall))donecall(theImage);}
t_img.src=resizeImg.data;},_cropLarge:function(theImage,ww,hh,x,y,nw,nh,callback,donecall){var _self=this;var largeImg=theImage.resize.large;if(largeImg.data!=""){var t_img=new Image();t_img.onload=function(){var ratio_ww=1;var ratio_hh=1;ratio_ww=t_img.width/ww;ratio_hh=t_img.height/hh;x=x*ratio_ww;y=y*ratio_hh;nw=nw*ratio_ww;nh=nh*ratio_hh;if(x<0)x=0;if(y<0)y=0;if(x+nw>t_img.width)nw=t_img.width-x;if(y+nh>t_img.height)nh=t_img.height-y;var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");canvas.width=nw;canvas.height=nh;ctx.drawImage(t_img,x,y,nw,nh,0,0,canvas.width,canvas.height);var imgDataURL=canvas.toDataURL(theImage.mime_type);largeImg.width=canvas.width;largeImg.height=canvas.height;largeImg.data=imgDataURL;largeImg.length=imgDataURL.length;largeImg.size=largeImg.length.toSize();largeImg.name="large";if(callback&&$.isFunction(callback)&&_self.view=="large")callback(largeImg);_self._cropAll(theImage,callback,donecall);}
t_img.src=largeImg.data;}},_cropAll:function(theImage,callback,donecall){var _self=this;_self.execute.push("origin");_self.execute.push("large");var largeImg=theImage.resize.large;var resizeImgs=theImage.resize;for(var rname in resizeImgs){if(rname!="origin"&&rname!="large"){this._resizeImageFromLarge(theImage,rname,callback,donecall);}}},_cropReset:function(theImage,callback,donecall){this._resizeAll(theImage,callback,donecall);},}
WLIU.CANVAS=function(opts){this.flag=false;this.prevX=0,this.currX=0,this.prevY=0,this.currY=0,this.dot_flag=false;this.signed=false;this.subject=opts.subject?opts.subject:"";this.firstName=opts.firstName?opts.firstName:"";this.lastName=opts.lastName?opts.lastName:"";this.lineColor="black";this.lineWidth=6;this.font="14px Arial";this.canvas=opts.canvas?opts.canvas:document.createElement("canvas");this.ctx=this.canvas.getContext("2d");return this;}
WLIU.CANVAS.prototype={init:function(){this.signed=false;this.addCanvasEvent();},addCanvasEvent:function(){var _self=this;this.canvas.addEventListener("mousemove",function(e){_self.findxy('move',e);},false);this.canvas.addEventListener("mousedown",function(e){document.onmousewheel=stop;_self.findxy('down',e);},false);this.canvas.addEventListener("mouseup",function(e){_self.findxy('up',e);},false);this.canvas.addEventListener("mouseout",function(e){_self.findxy('out',e);},false);},drawText:function(text,x,y){this.ctx.font=this.font;this.ctx.fillText(text,x,y);},drawLine:function(){this.ctx.beginPath();this.ctx.moveTo(this.prevX,this.prevY);this.ctx.lineTo(this.currX,this.currY);this.ctx.strokeStyle=this.lineColor;this.ctx.lineWidth=this.lineWidth;this.ctx.stroke();this.ctx.closePath();},getDataUrl:function(){this.ctx.fillStyle="white";this.ctx.fillRect(0,0,this.canvas.width,20);this.ctx.fillRect(0,this.canvas.height-20,this.canvas.width,20);this.ctx.fillStyle=this.lineColor;this.drawText("Subject: "+this.subject,2,16);this.drawText("Print Name: "+this.firstName+" "+this.lastName+" {Signed on: "+(new Date()).format("Y-m-d H:i:s")+" "+(new Date()).timezone()+"}",2,this.canvas.height-4);return this.canvas.toDataURL();},clear:function(){this.signed=false;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);},findxy:function(res,e){switch(res){case"down":this.prevX=this.currX;this.prevY=this.currY;this.currX=e.offsetX;this.currY=e.offsetY;this.signed=true;this.flag=true;this.dot_flag=true;if(this.dot_flag){this.ctx.beginPath();this.ctx.fillStyle=this.lineColor;this.ctx.fillRect(this.currX,this.currY,2,2);this.ctx.closePath();dot_flag=false;}
break;case"up":case"out":this.flag=false;break;case"move":if(this.flag){this.prevX=this.currX;this.prevY=this.currY;this.currX=e.offsetX;this.currY=e.offsetY;this.drawLine();}
break;}}}
var FCOLLECT=new WLIU.COLLECTION();var FOBJECT=new WLIU.OBJECT();var FROW=new WLIU.ROWACTION();var FCOM=new WLIU.COM();var FTABLE=new WLIU.TABLEACTION();var FFILE=new WLIU.FILEACTION();var FIMAGE=new WLIU.IMAGEACTION();
var WLIU=WLIU||{};WLIU.TABLE=function(opts){this.sc=null;this.lang=opts.lang?opts.lang:"cn";this.scope=opts.scope?opts.scope:"";this.url=opts.url?opts.url:"";this.tooltip=opts.tooltip?opts.tooltip:"";this.firstone=opts.firstone?opts.firstone:0;this.current="";this._rowno=-1;this.action="get";this.error={errorCode:0,errorMessage:""};this.rights={view:1,save:1,cancel:1,clear:1,delete:1,add:1,detail:1,output:1,print:1};this.cols=[];this.rows=[];this.navi={paging:1,pageno:0,pagesize:20,pagetotal:0,recordtotal:0,match:1,loading:0,orderby:"",sortby:"",tooltip:""};this.filters=[];this.lists={};this.callback={ajaxBefore:null,ajaxAfter:null,ajaxComplete:null,ajaxError:null,ajaxSuccess:null};this.xhr=null;$.extend(this.rights,opts.rights);$.extend(this.cols,opts.cols);$.extend(this.navi,opts.navi);$.extend(this.filters,opts.filters);$.extend(this.lists,opts.lists);$.extend(this.callback,opts.callback);}
WLIU.TABLE.prototype={setScope:function(p_scope,tableName){if(tableName){p_scope[tableName]=this;}else{p_scope.table=this;}
this.sc=p_scope;},index:function(guid){return FTABLE.index(this,guid);},indexByRow:function(theRow){return FTABLE.indexByRow(this,theRow);},rowstate:function(theRow,p_rowstate){return FROW.rowstate(theRow,p_rowstate);},getRowKeys:function(theRow){return FTABLE.getRowKeys(this,theRow);},getCurrentKeys:function(){return FTABLE.getRowKeys(this,this.getCurrent());},colMeta:function(col_name){return FTABLE.colMeta(this,col_name);},colDefault:function(col_name,p_value){return FTABLE.colDefault(this,col_name,p_value);},colList:function(col_name){return FTABLE.colList(this,col_name);},getList:function(list_name){return FTABLE.getList(this,list_name);},relationHide:function(theRow,col_name){return FTABLE.relationHide(this,theRow,col_name);},relationChange:function(theRow){return FTABLE.relationChange(this,theRow);},relationHideCurrent:function(col_name){return FTABLE.relationHideCurrent(this,col_name);},relationChangeCurrent:function(){return FTABLE.relationChangeCurrent(this);},filterMeta:function(col_name){return FTABLE.filterMeta(this,col_name);},filterClear:function(){return FTABLE.filterClear(this);},filterValue:function(name,val){return FTABLE.filterValue(this,name,val);},filterDefault:function(name,val){return FTABLE.filterDefault(this,name,val);},getRow:function(theRow){return FTABLE.getRow(this,theRow);},getRowByGuid:function(guid){return FTABLE.getRowByGuid(this,guid);},getCurrent:function(){return FTABLE.getCurrent(this);},getCol:function(theRow,col_name){return FTABLE.getCol(this,theRow,col_name);},getColCurrent:function(col_name){return FTABLE.getColCurrent(this,col_name);},getColByGuid:function(guid,col_name){return FTABLE.getColByGuid(this,guid,col_name);},tableError:function(p_error){return FTABLE.tableError(this,p_error);},rowError:function(theRow,p_error){return FROW.rowerror(theRow,p_error);},colError:function(theRow,col_name,p_error){return FROW.colerror(theRow,col_name,p_error);},changeCol:function(theRow,col_name){return FTABLE.changeCol(this,theRow,col_name);},changeColCurrent:function(col_name){return FTABLE.changeColCurrent(this,col_name);},changeColByGuid:function(guid,col_name){return FTABLE.changeColByGuid(this,guid,col_name);},setImage:function(theRow,col_name,oImg){return FTABLE.setImage(this,theRow,col_name,oImg);},setImageCurrent:function(col_name,oImg){return FTABLE.setImageCurrent(this,col_name,oImg);},init:function(IDKeyValues,callback){FTABLE.init(this,callback);},newRow:function(keyvalues){return FTABLE.newRow(this,keyvalues);},addRow:function(ridx,t_row){return FTABLE.addRow(this,ridx,t_row);},cancelRow:function(theRow){return FTABLE.cancelRow(this,theRow);},cancelRows:function(){return FTABLE.cancelRows(this);},resetRow:function(theRow){return FTABLE.resetRow(this,theRow);},removeRow:function(theRow){return FTABLE.removeRow(this,theRow);},deleteRow:function(theRow){return FTABLE.detachRow(this,theRow);},deleteRows:function(){},saveRow:function(theRow,callback){FTABLE.saveRow(this,theRow,callback);},saveRows:function(callback){FTABLE.saveRows(this,callback);},getRows:function(callback){FTABLE.getRows(this,callback);},allRows:function(callback){FTABLE.allRows(this,callback);},matchRows:function(callback){FTABLE.matchRows(this,callback);},formInit:function(IDKeyValues,callback){FTABLE.init(this,IDKeyValues,callback);},formNew:function(IDKeyValues,callback){FTABLE.formNew(this,IDKeyValues,callback);},formReset:function(){FTABLE.formReset(this);},formGet:function(IDKeyValues,callback){FTABLE.formGet(this,IDKeyValues,callback);},getRecords:function(IDKeyValues,callback){FTABLE.getRecords(this,IDKeyValues,callback);},getAgetAllRecords:function(IDKeyValues,callback){FTABLE.getAllRecords(this,IDKeyValues,callback);},getMatchRecords:function(IDKeyValues,callback){FTABLE.getMatchRecords(this,IDKeyValues,callback);},errorCall:function(theTable){FTABLE.errorCall(this);},firstPage:function(){FTABLE.firstPage(this);},firstState:function(){return FTABLE.firstState(this);},previousPage:function(){FTABLE.previousPage(this);},previousState:function(){return FTABLE.previousState(this);},nextPage:function(){FTABLE.nextPage(this);},nextState:function(){return FTABLE.nextState(this);},lastPage:function(){FTABLE.lastPage(this);},lastState:function(){return FTABLE.lastState(this);},rowno:function(guid){return FTABLE.rowno(this,guid);},navLeft:function(){FTABLE.navLeft(this);},navLeftState:function(){return FTABLE.navLeftState(this);},navRight:function(){FTABLE.navRight(this);},navRightState:function(){return FTABLE.navRightState(this);},orderState:function(name,sort){return FTABLE.orderState(this,name,sort);}}
var WLIU=WLIU||{};WLIU.FORM=function(opts){this.selfName=opts.name?opts.name:"form";this.scope=opts.scope?opts.scope:"";this.action=opts.action?opts.action:"save";this.rowstate=2;this.lang=opts.lang?opts.lang:"cn";this.url=opts.url?opts.url:"";this.error={errorCode:0,errorMessage:"",errorField:""};this.rights={view:1,save:0,cancel:1,clear:1,delete:0,add:1,detail:1,output:0,print:1};this.cols=[];this.data=[];$.extend(this.cols,opts.cols);}
WLIU.FORM.prototype={setScope:function(sc){if(sc){this.scope=sc;return this.scope;}else{return this.scope;}},_resetError:function(){this.error.errorCode=0;this.error.errorMessage="";this.error.errorField="";$("#wliu-form-message-body","div[wliu-form-message]").html("");$("div[wliu-form-message]").removeAttr("active");$("#wliu-form-popup-body","div[wliu-form-popup]").html("");if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];$("a[wliu-form-col-error][scope='"+this.scope+"'][name='"+theCol.name+"']").attr("popup-body","").removeAttr("active");}}},_setError:function(ntable){var errMsg=ntable.error.errorMessage;if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];var nCol=FCOLLECT.objectByKV(ntable.data,{name:theCol.name});if(nCol&&nCol.errorCode>0){$("a[wliu-form-col-error][scope='"+this.scope+"'][name='"+theCol.name+"']").attr("popup-body",nCol.errorMessage).addAttr("active");errMsg+=(errMsg?"\n":"")+nCol.errorMessage;}else{$("a[wliu-form-col-error][scope='"+this.scope+"'][name='"+theCol.name+"']").attr("popup-body","").removeAttr("active");}}}
this.error.errorCode=ntable.error.errorCode;this.error.errorField=ntable.error.errorField;this.error.errorMessage=errMsg;if(this.error.errorCode){$("#wliu-form-message-body","div[wliu-form-message]").html(this.error.errorMessage.nl2br1());$("div[wliu-form-message]").addAttr("active");$("#wliu-form-popup-body","div[wliu-form-popup]").html(this.error.errorMessage.nl2br1());$("div[wliu-form-popup]").trigger("show");}else{$("#wliu-form-message-body","div[wliu-form-message]").html("");$("div[wliu-form-message]").removeAttr("active");$("#wliu-form-popup-body","div[wliu-form-popup]").html("");}},_initData:function(){if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];if(theCol.defval){switch(theCol.coltype){case"text":$("span[scope='"+this.scope+"'][name='"+theCol.name+"']").html(theCol.defval);break;case"hidden":case"textbox":case"password":case"date":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val(theCol.defval);break;case"textarea":$("textarea[scope='"+this.scope+"'][name='"+theCol.name+"']").val(theCol.defval);break;case"select":$("select[scope='"+this.scope+"'][name='"+theCol.name+"']").val(theCol.defval);break;case"passpair":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val(theCol.defval);$("input[scope='"+this.scope+"'][name='confirm_"+theCol.name+"']").val(theCol.defval);break;case"radio":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']:checked").attr("checked",false);$("input[scope='"+this.scope+"'][name='"+theCol.name+"'][value='"+theCol.defval+"']").attr("checked",true);break;case"checkbox":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").attr("checked",false);$.map(theCol.defval.split(","),function(n){$("input[scope='"+this.scope+"'][name='"+theCol.name+"'][value='"+n+"']").attr("checked",true);});break;case"bool":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").attr("checked",theCol.defval?true:false);break;}}}}},_clearData:function(){if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];switch(theCol.coltype){case"text":$("span[scope='"+this.scope+"'][name='"+theCol.name+"']").html("");break;case"hidden":case"textbox":case"password":case"date":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val("");break;case"textarea":$("textarea[scope='"+this.scope+"'][name='"+theCol.name+"']").val("");break;case"select":$("select[scope='"+this.scope+"'][name='"+theCol.name+"']").val("");break;case"passpair":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val("");$("input[scope='"+this.scope+"'][name='confirm_"+theCol.name+"']").val("");break;case"radio":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']:checked").attr("checked",false);break;case"checkbox":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").attr("checked",false);break;case"bool":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").attr("checked",false);break;}}}},_getData:function(){var pdata=[];if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];var colDataObj={};colDataObj.name=theCol.name;colDataObj.key=theCol.key;colDataObj.errorCode=0;colDataObj.errorMessage="";switch(theCol.coltype){case"text":colDataObj.value=$("span[scope='"+this.scope+"'][name='"+theCol.name+"']").html();break;case"hidden":case"textbox":case"password":case"date":colDataObj.value=$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val();break;case"textarea":colDataObj.value=$("textarea[scope='"+this.scope+"'][name='"+theCol.name+"']").val();break;case"select":colDataObj.value=$("select[scope='"+this.scope+"'][name='"+theCol.name+"']").val();break;case"passpair":colDataObj.value={};colDataObj.value.password=$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val();colDataObj.value.confirm=$("input[scope='"+this.scope+"'][name='confirm_"+theCol.name+"']").val();break;case"radio":colDataObj.value=$("input[scope='"+this.scope+"'][name='"+theCol.name+"']:checked").val();break;case"checkbox":colDataObj.value=$("input[scope='"+this.scope+"'][name='"+theCol.name+"']:checked").map(function(){return $(this).val();}).get().join(",");break;case"bool":colDataObj.value=$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").is(":checked")?1:0;break;}
pdata.push(colDataObj);}}
return pdata;},_getDataID:function(){var pdata=[];if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];if(parseInt(theCol.key)){var colDataObj={};colDataObj.name=theCol.name;colDataObj.key=theCol.key;colDataObj.errorCode=0;colDataObj.errorMessage="";colDataObj.value=$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val();pdata.push(colDataObj);}}}
return pdata;},resetData:function(theRows,theRow){this._resetError();this.action="save";this.rowstate=2;this._initData();},getData:function(callback){this._resetError();this.action="get";this.rowstate=0;var ntable={};ntable.scope=this.scope;ntable.action=this.action;ntable.rowstate=this.rowstate;ntable.lang=this.lang;ntable.error={errorCode:0,errorMessage:"",errorField:""};ntable.cols=this.cols;this.ajaxCall(ntable,callback);},customData:function(callback){this._resetError();this.action="custom";this.rowstate=0;var ntable={};ntable.scope=this.scope;ntable.action=this.action;ntable.rowstate=this.rowstate;ntable.lang=this.lang;ntable.error={errorCode:0,errorMessage:"",errorField:""};ntable.cols=this.cols;if(callback&&$.isFunction(callback.custom))ntable.data=callback.custom();this.ajaxCall(ntable,callback);},updateData:function(callback){this._resetError();this.action="save";this.rowstate=1;var ntable={};ntable.scope=this.scope;ntable.action=this.action;ntable.rowstate=this.rowstate;ntable.lang=this.lang;ntable.error={errorCode:0,errorMessage:"",errorField:""};ntable.cols=this.cols;ntable.data=this._getData();this.ajaxCall(ntable,callback);},addData:function(callback){this._resetError();this.action="save";this.rowstate=2;var ntable={};ntable.scope=this.scope;ntable.action=this.action;ntable.rowstate=this.rowstate;ntable.lang=this.lang;ntable.error={errorCode:0,errorMessage:"",errorField:""};ntable.cols=this.cols;ntable.data=this._getData();this.ajaxCall(ntable,callback);},deleteData:function(callback){this._resetError();this.action="save";this.rowstate=3;var ntable={};ntable.scope=this.scope;ntable.action=this.action;ntable.rowstate=this.rowstate;ntable.lang=this.lang;ntable.error={errorCode:0,errorMessage:"",errorField:""};ntable.cols=this.cols;ntable.data=this._getDataID();this.ajaxCall(ntable,callback);},ajaxCall:function(ntable,callback){var _self=this;$("div#wliu-wait-id[wliu-wait]").trigger("show");if(callback&&callback.ajaxBefore&&$.isFunction(callback.ajaxBefore))callback.ajaxBefore(table);$.ajax({data:{table:ntable},dataType:"json",contentType:"application/x-www-form-urlencoded",error:function(xhr,tStatus,errorTh){$("div#wliu-wait-id[wliu-wait]").trigger("hide");},success:function(req,tStatus){$("div#wliu-wait-id[wliu-wait]").trigger("hide");if(callback&&callback.ajaxAfter&&$.isFunction(callback.ajaxAfter))callback.ajaxAfter(req.table);if(parseInt(req.table.error.errorCode)==0){if(callback&&callback.ajaxSuccess&&$.isFunction(callback.ajaxSuccess))callback.ajaxSuccess(req.table);}else{if(callback&&callback.ajaxError&&$.isFunction(callback.ajaxError))callback.ajaxError(req.table);}
switch(req.table.action){case"get":_self._syncRow(req.table);break;case"save":switch(parseInt(req.table.rowstate)){case 1:case 2:_self._updateRow(req.table);break;case 3:_self._deleteRow(req.table);break;}
break;case"custom":_self._custRow(req.table);break;}
_self._setError(req.table);if(callback&&callback.ajaxComplete&&$.isFunction(callback.ajaxComplete))callback.ajaxComplete(_self);GCONFIG.errorCall(req.table.error);},type:"post",url:_self.url});},_syncRow:function(ntable){if(ntable.error.errorCode==0){this._clearData();if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];var colVal=ntable.data[theCol.name]?ntable.data[theCol.name]:"";var colVal=(""+colVal).trim();switch(theCol.coltype){case"text":$("span[scope='"+this.scope+"'][name='"+theCol.name+"']").html(colVal);break;case"hidden":case"textbox":case"password":case"date":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val(colVal);break;case"textarea":$("textarea[scope='"+this.scope+"'][name='"+theCol.name+"']").val(colVal);break;case"select":$("select[scope='"+this.scope+"'][name='"+theCol.name+"']").val(colVal);break;case"passpair":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val(colVal);$("input[scope='"+this.scope+"'][name='confirm_"+theCol.name+"']").val(colVal);break;case"radio":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']:checked").attr("checked",false);$("input[scope='"+this.scope+"'][name='"+theCol.name+"'][value='"+colVal+"']").attr("checked",true);break;case"checkbox":$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").attr("checked",false);$.map(colVal.split(","),function(n){$("input[scope='"+this.scope+"'][name='"+theCol.name+"'][value='"+n+"']").attr("checked",true);});break;case"bool":colVal=parseInt(colVal);$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").attr("checked",colVal?true:false);break;}}}}},_updateRow:function(ntable){if(ntable.error.errorCode==0){if(this.cols.length>0){for(var cidx=0;cidx<this.cols.length;cidx++){var theCol=this.cols[cidx];if(parseInt(theCol.key)){var nCol=FCOLLECT.objectByKV(ntable.data,{name:theCol.name});if(nCol&&nCol.errorCode<=0)$("input[scope='"+this.scope+"'][name='"+theCol.name+"']").val(nCol.value);}}}}
GCONFIG.saveSuccess(ntable.error);},_deleteRow:function(ntable){if(ntable.error.errorCode==0){this._clearData();}
GCONFIG.saveSuccess(ntable.error);},_custRow:function(ntable){GCONFIG.saveSuccess(ntable.error);},errorCall:function(){if(this.error.errorCode==990){window.location.href=this.error.errorField;}}}
var WLIU=WLIU||{};WLIU.TREE=function(opts){this.sc=null;this.lang=opts.lang?opts.lang:"cn";this.title=opts.title?opts.title:"";this.treeid=opts.treeid?opts.treeid:0;this.rootid=opts.rootid?opts.rootid:0;this.refid=opts.refid?opts.refid:0;this.scope=opts.scope?opts.scope:"";this.url=opts.url?opts.url:"";this.rootadd=opts.rootadd?opts.rootadd:0;this.pbutton=opts.pbutton?opts.pbutton:["add","save","cancel","delete"],this.sbutton=opts.sbutton?opts.sbutton:["add","save","cancel","delete"],this.mbutton=opts.mbutton?opts.mbutton:["save","cancel","delete"],this.current="";this.action="get";this.error={errorCode:0,errorMessage:""};this.rights={view:1,save:0,cancel:1,clear:1,delete:0,add:1,detail:1,output:0,print:1};this.cols={};this.rows=[];this.filters=[];this.lists={};this.xhr=null;$.extend(this.rights,opts.rights);$.extend(this.cols,opts.cols);$.extend(this.filters,opts.filters);$.extend(this.lists,opts.lists);this._treeName="tree";}
WLIU.TREE.prototype={setScope:function(p_scope,treeName){if(treeName){this._treeName=treeName;p_scope[treeName]=this;}else{p_scope.tree=this;}
this.sc=p_scope;},index:function(guid){return FTABLE.index(this,guid);},indexByRow:function(theRow){return FTABLE.indexByRow(this,theRow);},rowstate:function(theRow,p_rowstate){return FROW.rowstate(theRow,p_rowstate);},keyValue:function(theRow){var keyCol=FCOLLECT.objectByKV(theRow.cols,{key:1});return keyCol.value;},colMeta:function(theRow,col_name){var theCol=this.getCol(theRow,col_name);if(theCol){return FCOLLECT.objectByKV(this.cols[theCol.table],{name:col_name});}else{return undefined;}},colDefault:function(col_name,p_value){return FTABLE.colDefault(this,col_name,p_value);},colList:function(theRow,col_name){var theCol=this.colMeta(theRow,col_name);if(theCol){return this.lists[theCol.list];}else{return undefined;}},getList:function(list_name){return FTABLE.getList(this,list_name);},filterMeta:function(col_name){return FTABLE.filterMeta(this,col_name);},filterClear:function(){return FTABLE.filterClear(this);},filterValue:function(name,val){return FTABLE.filterValue(this,name,val);},filterDefault:function(name,val){return FTABLE.filterDefault(this,name,val);},getRow:function(theRow){return theRow;},getCol:function(theRow,col_name){return FCOLLECT.objectByKV(theRow.cols,{name:col_name});},tableError:function(p_error){return FTABLE.tableError(this,p_error);},rowError:function(theRow,p_error){return FROW.rowerror(theRow,p_error);},colError:function(theRow,col_name,p_error){return FROW.colerror(theRow,col_name,p_error);},changeCol:function(theRow,col_name){return FTABLE.changeCol(this,theRow,col_name);},newRow:function(keyvalues){return FTABLE.newRow(this,keyvalues);},addRow:function(ridx,t_row){return FTABLE.addRow(this,ridx,t_row);},addChild:function(theRows,theRow){if(theRow=="root"){var newRow=new WLIU.ROW(this.cols.p);var keyVal=this.rootid;newRow.rowstate=2;newRow.parent=keyVal;newRow.type="p";this.rows=this.rows?this.rows:[];this.rows.unshift(newRow);}else{var tableLevel=theRow.type;switch(tableLevel){case"p":var newRow=new WLIU.ROW(this.cols.s);var keyVal=this.keyValue(theRow);newRow.rowstate=2;newRow.parent=keyVal;newRow.type="s";theRow.rows=theRow.rows?theRow.rows:[];theRow.rows.unshift(newRow);break;case"s":var newRow=new WLIU.ROW(this.cols.m);var keyVal=this.keyValue(theRow);newRow.rowstate=2;newRow.parent=keyVal;newRow.type="m";theRow.rows=theRow.rows?theRow.rows:[];theRow.rows.unshift(newRow);break;case"m":break;}}},cancelRow:function(theRows,theRow){if(theRow){switch(theRow.rowstate){case 0:break;case 1:FROW.cancel(theRow);break;case 2:this.removeRow(theRows,theRow);break;case 3:FROW.cancel(theRow);break;}
return theRow;}else{return undefined;}},removeRow:function(theRows,theRow){var ridx=FCOLLECT.indexByKV(theRows,{guid:theRow.guid});FCOLLECT.delete(theRows,ridx);},deleteRow:function(theRows,theRow){return FROW.detach(theRow);},saveRow:function(theRows,theRow,callback){var ntable={};ntable.scope=this.scope;ntable.lang=this.lang;ntable.rootid=this.rootid;ntable.refid=this.refid;ntable.action="save";ntable.error={errorCode:0,errorMessage:""};ntable.cols=this.cols;ntable.rows=FROW.getChangeRow(theRow);this.ajaxCall(ntable,callback,theRow,theRows);},getRows:function(callback){var ntable={};ntable.scope=this.scope;ntable.lang=this.lang;ntable.rootid=this.rootid;ntable.refid=this.refid;ntable.action="get";ntable.error={errorCode:0,errorMessage:""};ntable.cols=this.cols;ntable.filters=FTABLE.getFilters(this);ntable.lists=FTABLE.getLists(this);ntable.rows=[];this.ajaxCall(ntable,callback);},getRecords:function(IDKeyValues,callback){if(IDKeyValues){if(IDKeyValues.rootid!=undefined)this.rootid=IDKeyValues.rootid;this.refid=IDKeyValues.refid?IDKeyValues.refid:"";}
this.getRows(callback);},ajaxCall:function(ntable,callback,theRow,theRows){var _self=this;$("div#wliu-wait-id[wliu-wait]").trigger("show");if(callback&&callback.ajaxBefore&&$.isFunction(callback.ajaxBefore))callback.ajaxBefore(table);$.ajax({data:{table:ntable},dataType:"json",contentType:"application/x-www-form-urlencoded",error:function(xhr,tStatus,errorTh){$("div#wliu-wait-id[wliu-wait]").trigger("hide");},success:function(req,tStatus){$("div#wliu-wait-id[wliu-wait]").trigger("hide");if(callback&&callback.ajaxAfter&&$.isFunction(callback.ajaxAfter))callback.ajaxAfter(req.table);_self.tableError(req.table.error);switch(req.table.action){case"get":FTABLE.setLists(_self,req.table.lists);_self.syncRows(req.table);break;case"add":_self.updateRow(req.table,theRow,theRows);break;case"save":_self.updateRow(req.table,theRow,theRows);break;}
if(!_self.sc.$$phase)_self.sc.$apply();if(req.table.action=="get")$("ul[wliu-tree][root]").wliuTree();if(parseInt(req.table.error.errorCode)==0){if(callback&&callback.ajaxSuccess&&$.isFunction(callback.ajaxSuccess))callback.ajaxSuccess(req.table);}else{if(callback&&callback.ajaxError&&$.isFunction(callback.ajaxError))callback.ajaxError(req.table);}
GCONFIG.errorCall(req.table.error);},type:"post",url:_self.url});},syncRows:function(table){this.rights=angular.copy(table.rights);this.rows=[];if(this.cols.p&&this.cols.p.length>0){for(var pidx in table.rows){var _p_row=table.rows[pidx];var prow=new WLIU.ROW(this.cols.p,_p_row,this.scope);var p_keyvalue=this.keyValue(prow);prow.rowstate=0;prow.parent=this.rootid;prow.type="p";if(this.cols.s&&this.cols.s.length>0){prow.rows=[];for(var sidx in _p_row.rows){var _s_row=_p_row.rows[sidx];var srow=new WLIU.ROW(this.cols.s,_s_row,this.scope);var s_keyvalue=this.keyValue(srow);srow.rowstate=0;srow.parent=p_keyvalue;srow.type="s";if(this.cols.m&&this.cols.m.length>0){srow.rows=[];for(var midx in _s_row.rows){var _m_row=_s_row.rows[midx];var mrow=new WLIU.ROW(this.cols.m,_m_row,this.scope);mrow.rowstate=0;mrow.parent=s_keyvalue;mrow.type="m";srow.rows.push(mrow);}}
prow.rows.push(srow);}}
this.rows.push(prow);}}},updateRow:function(table,theRow,theRows){this.rights=angular.copy(table.rights);if(table.rows&&table.rows.length>0){var nrow=table.rows[0];if(nrow.error.errorCode>0){theRow.error.errorCode=nrow.error.errorCode;theRow.error.errorMessage=nrow.error.errorMessage;for(var cidx in nrow.cols){var ncol=nrow.cols[cidx];var theCol=FCOLLECT.objectByKV(theRow.cols,{name:ncol.name});if(theCol){this.colError(theRow,ncol.name,{errorCode:ncol.errorCode,errorMessage:ncol.errorMessage});}}}else{switch(parseInt(theRow.rowstate)){case 0:break;case 1:theRow.error.errorCode=nrow.error.errorCode;theRow.error.errorMessage=nrow.error.errorMessage;theRow.rowstate=0;for(var cidx in nrow.cols){var ncol=nrow.cols[cidx];var theCol=FCOLLECT.objectByKV(theRow.cols,{name:ncol.name});if(theCol){theCol.colstate=0;theCol.current=angular.copy(theCol.value);this.colError(theRow,ncol.name,{errorCode:0,errorMessage:""});}}
break;case 2:theRow.error.errorCode=nrow.error.errorCode;theRow.error.errorMessage=nrow.error.errorMessage;theRow.rowstate=0;for(var cidx in nrow.cols){var ncol=nrow.cols[cidx];var theCol=FCOLLECT.objectByKV(theRow.cols,{name:ncol.name});if(theCol){if(theCol.key){FROW.setColVal(theCol,ncol.value);}
theCol.colstate=0;theCol.current=angular.copy(theCol.value);this.colError(theRow,ncol.name,{errorCode:0,errorMessage:""});}}
break;case 3:theRow.error.errorCode=nrow.error.errorCode;theRow.error.errorMessage=nrow.error.errorMessage;theRow.rowstate=0;if(parseInt(theRow.error.errorCode)<=0){this.removeRow(theRows,theRow);}
break;}}}
GCONFIG.saveSuccess(table.error);}}
var WLIU=WLIU||{};WLIU.FILELIST=function(opts){this.sc=null;this.lang=opts.lang?opts.lang:"cn";this.url=opts.url?opts.url:"";this.autotip=opts.autotip?opts.autotip:"";this.errorShow=opts.errorShow?opts.errorShow:"";this.infoEditor=opts.infoEditor?opts.infoEditor:"";this.action="get";this.keys={key1:"",key2:"",key3:""};this.config={mode:"",scope:"",max_length:0,max_size:0};this.current="";this.errorCode=0;this.errorMessage="";this.rows=[];}
WLIU.FILELIST.prototype={setScope:function(p_scope,fileList){if(fileList){p_scope[fileList]=this;}else{p_scope.fileList=this;}
this.sc=p_scope;},index:function(guid){return FCOLLECT.indexByKV(this.rows,{guid:guid});},currentIndex:function(){var curImg=this.getCurrent();if(curImg)
return this.index(curImg.guid);else
return-1;},getFile:function(guid){var rowidx=this.index(guid);if(rowidx>=0&&rowidx<this.rows.length){return this.rows[rowidx];}else{return undefined;}},getCurrent:function(){return this.getFile(this.current);},saveText:function(oFile,callback){if(oFile){this.errorCode=0;this.errorMessage="";var nfile={};nfile.id=oFile.id;nfile.guid=oFile.guid;nfile.scope=oFile.scope;nfile.title_en=oFile.title_en;nfile.title_cn=oFile.title_cn;nfile.detail_en=oFile.detail_en;nfile.detail_cn=oFile.detail_cn;nfile.orderno=oFile.orderno;nfile.status=oFile.status?1:0;nfile.action="savetext";nfile.errorCode=this.errorCode;nfile.errorMessage=this.errorMessage;this.ajaxCall(nfile,callback);}else{return false;}},printFile:function(oFile,callback){var _self=this;if(oFile){if(oFile.data){callback(oFile);}else{this.errorCode=0;this.errorMessage="";var nfiles={};nfiles.action="print";nfiles.id=oFile.id;nfiles.guid=oFile.guid;nfiles.scope=oFile.scope;nfiles.errorCode=this.errorCode;nfiles.errorMessage=this.errorMessage;this.ajaxCall(nfiles,{ajaxSuccess:function(rfile){oFile.data=rfile.data;_self.sc.$apply();if(callback)if($.isFunction(callback))callback(rfile);}})}}},deleteFile:function(oFile){var _self=this;if(oFile){this.errorCode=0;this.errorMessage="";var nfiles={};nfiles.action="delete";nfiles.id=oFile.id;nfiles.guid=oFile.guid;nfiles.scope=oFile.scope;nfiles.errorCode=this.errorCode;nfiles.errorMessage=this.errorMessage;this.ajaxCall(nfiles,{ajaxSuccess:function(nfiles){var ridx=FCOLLECT.indexByKV(_self.rows,{id:nfiles.id});if(ridx>=0&&ridx<_self.rows.length){_self.rows.splice(ridx,1);_self.sc.$apply();}}})}},addFile:function(fileObj){var _self=this;this.errorCode=0;this.errorMessage="";fileObj.scope=this.config.scope;fileObj.key1=this.keys.key1?this.keys.key1:0;fileObj.key2=this.keys.key2?this.keys.key2:0;fileObj.key3=this.keys.key3?this.keys.key3:0;fileObj.status=1;fileObj.orderno=parseInt(this.rows.length)+1;var nfiles={};nfiles.action="add";nfiles.id=0;nfiles.scope=fileObj.scope;nfiles.key1=fileObj.key1;nfiles.key2=fileObj.key2;nfiles.key3=fileObj.key3;nfiles.full_name=fileObj.full_name;nfiles.short_name=fileObj.short_name;nfiles.ext_name=fileObj.ext_name;nfiles.mime_type=fileObj.mime_type;nfiles.status=fileObj.status;nfiles.orderno=fileObj.orderno;nfiles.data=fileObj.data;nfiles.guid=fileObj.guid;nfiles.token=fileObj.token;nfiles.errorCode=this.errorCode;nfiles.errorMessage=this.errorMessage;this.ajaxCall(nfiles,{ajaxSuccess:function(ofiles){fileObj.id=ofiles.id;fileObj.scope=ofiles.scope;fileObj.access=ofiles.access;fileObj.url=ofiles.url;_self.rows.push(fileObj);_self.sc.$apply();}})},getRecord:function(IDKeyValues,callback){this.keys=IDKeyValues;this.getFiles(callback);},getFiles:function(callback){this.errorCode=0;this.errorMessage="";var nfiles={};nfiles.action="get";nfiles.keys=this.keys;nfiles.config=this.config;nfiles.errorCode=this.errorCode;nfiles.errorMessage=this.errorMessage;nfiles.rows=[];this.ajaxCall(nfiles,callback);},ajaxCall:function(nfiles,callback){var _self=this;$("div#wliu-wait-id[wliu-wait]").trigger("show");if(callback&&callback.ajaxBefore&&$.isFunction(callback.ajaxBefore))callback.ajaxBefore(nfiles);$.ajax({data:{files:nfiles},dataType:"json",contentType:"application/x-www-form-urlencoded",error:function(xhr,tStatus,errorTh){$("div#wliu-wait-id[wliu-wait]").trigger("hide");},success:function(req,tStatus){$("div#wliu-wait-id[wliu-wait]").trigger("hide");if(callback&&callback.ajaxAfter&&$.isFunction(callback.ajaxAfter))callback.ajaxAfter(req.files);switch(req.files.action){case"get":_self.syncRows(req.files);break;case"savetext":_self.syncError(req.files);break;case"saveorder":_self.syncError(req.files);break;case"delete":_self.syncError(req.files);break;case"add":_self.syncError(req.files);break;case"save":_self.syncError(req.files);break;}
if(!_self.sc.$$phase)_self.sc.$apply();if(parseInt(req.files.errorCode)==0){if(callback&&callback.ajaxSuccess&&$.isFunction(callback.ajaxSuccess))callback.ajaxSuccess(req.files);}else{if(callback&&callback.ajaxError&&$.isFunction(callback.ajaxError))callback.ajaxError(req.files);}
$(_self.errorShow).trigger("errorshow");GCONFIG.errorCall({errorCode:req.errorCode,errorMessage:req.errorMessage});},type:"post",url:_self.url});},syncRows:function(nfiles){this.errorCode=nfiles.errorCode;this.errorMessage=nfiles.errorMessage;this.config=angular.copy(nfiles.config);this.rows=[];for(var ridx in nfiles.rows){var theRow=nfiles.rows[ridx];theRow.sn=parseInt(nfiles.rows[ridx].orderno);this.rows.push(new WLIU.FILE(theRow));}},syncError:function(nfiles){this.errorCode=nfiles.errorCode;this.errorMessage=nfiles.errorMessage;}}
var WLIU=WLIU||{};WLIU.IMAGELIST=function(opts){this.sc=null;this.lang=opts.lang?opts.lang:"cn";this.url=opts.url?opts.url:"";this.errorShow=opts.errorShow?opts.errorShow:"";this.infoEditor=opts.infoEditor?opts.infoEditor:"";this.imgViewer=opts.imgViewer?opts.imgViewer:"";this.imgEditor=opts.imgEditor?opts.imgEditor:"";this.action="get";this.keys={key1:"",key2:"",key3:""};this.config={mode:"",scope:"",thumb:opts.thumb?opts.thumb:"tiny",view:opts.view?opts.view:"medium",max_length:0,max_size:0};this.current="";this.errorCode=0;this.errorMessage="";this.rows=[];}
WLIU.IMAGELIST.prototype={setScope:function(p_scope,imgList){if(imgList){p_scope[imgList]=this;}else{p_scope.imgList=this;}
this.sc=p_scope;},index:function(guid){return FCOLLECT.indexByKV(this.rows,{guid:guid});},currentIndex:function(){var curImg=this.getCurrent();if(curImg)
return this.index(curImg.guid);else
return-1;},getImage:function(guid){var rowidx=this.index(guid);if(rowidx>=0&&rowidx<this.rows.length){return this.rows[rowidx];}else{return undefined;}},getCurrent:function(){return this.getImage(this.current);},navLeft:function(callback){var rowidx=this.currentIndex();if(rowidx>0)rowidx--;if(this.rows[rowidx]){this.current=this.rows[rowidx].guid;}else{this.current="";}
if(callback)if($.isFunction(callback))callback(this.rows[rowidx]);},navLeftState:function(){if(this.rows.length<=1)return false;if(this.currentIndex()<=0)return false;return true;},navRight:function(callback){var rowidx=this.currentIndex();if(rowidx<this.rows.length-1)rowidx++;if(this.rows[rowidx]){this.current=this.rows[rowidx].guid;}else{this.current="";}
if(callback)if($.isFunction(callback))callback(this.rows[rowidx]);},navRightState:function(){if(this.rows.length<=1)return false;if(this.currentIndex()>=this.rows.length-1)return false;return true;},thumbImageData:function(oImg){if(oImg)return oImg.resize&&oImg.resize[this.config.thumb]?oImg.resize[this.config.thumb].data:"";},currentThumbData:function(){return this.thumbImageData(this.getCurrent());},viewImageData:function(oImg){if(oImg)return oImg.resize&&oImg.resize[this.config.view]?oImg.resize[this.config.view].data:"";},currentViewData:function(){return this.viewImageData(this.getCurrent());},originImageData:function(oImg){if(oImg)return oImg.resize&&oImg.resize["origin"]?oImg.resize["origin"].data:"";},currentOriginData:function(){return this.originImageData(this.getCurrent());},saveText:function(oImg,callback){if(oImg){this.errorCode=0;this.errorMessage="";var nimage={};nimage.id=oImg.id;nimage.guid=oImg.guid;nimage.scope=oImg.scope;nimage.title_en=oImg.title_en;nimage.title_cn=oImg.title_cn;nimage.detail_en=oImg.detail_en;nimage.detail_cn=oImg.detail_cn;nimage.orderno=oImg.orderno;nimage.status=oImg.status?1:0;nimage.action="savetext";nimage.errorCode=this.errorCode;nimage.errorMessage=this.errorMessage;this.ajaxCall(nimage,callback);}else{return false;}},saveOrder:function(callback){this.errorCode=0;this.errorMessage="";var nimages={};nimages.action="saveorder";nimages.errorCode=this.errorCode;nimages.errorMessage=this.errorMessage;nimages.rows=[];for(var idx in this.rows){var imgobj={};imgobj.id=this.rows[idx].id;imgobj.sn=this.rows[idx].sn;nimages.rows.push(imgobj);}
this.ajaxCall(nimages,callback);},deleteImage:function(oImg){var _self=this;if(oImg){this.errorCode=0;this.errorMessage="";var nimages={};nimages.action="delete";nimages.id=oImg.id;nimages.guid=oImg.guid;nimages.scope=oImg.scope;nimages.errorCode=this.errorCode;nimages.errorMessage=this.errorMessage;this.ajaxCall(nimages,{ajaxSuccess:function(nimages){var ridx=FCOLLECT.indexByKV(_self.rows,{id:nimages.id});if(ridx>=0&&ridx<_self.rows.length){_self.rows.splice(ridx,1);_self.sc.$apply();}}})}},saveImage:function(oImg,callback){var _self=this;this.errorCode=0;this.errorMessage="";var nimages=angular.copy(oImg);oImg.errorCode=this.errorCode;oImg.errorMessage=this.errorMessage;nimages.action="save";nimages.errorCode=oImg.errorCode;nimages.errorMessage=oImg.errorMessage;this.ajaxCall(nimages,{ajaxAfter:function(){if(callback)if($.isFunction(callback))callback();},ajaxSuccess:function(oimages){_self.sc.$apply();}})},addImage:function(oImg){var _self=this;this.errorCode=0;this.errorMessage="";oImg.scope=this.config.scope;oImg.key1=this.keys.key1?this.keys.key1:0;oImg.key2=this.keys.key2?this.keys.key2:0;oImg.key3=this.keys.key3?this.keys.key3:0;oImg.status=1;oImg.orderno=parseInt(this.rows.length)+1;var nimages={};nimages.action="add";nimages.id=0;nimages.guid=oImg.guid;nimages.scope=oImg.scope;nimages.key1=oImg.key1;nimages.key2=oImg.key2;nimages.key3=oImg.key3;nimages.full_name=oImg.full_name;nimages.short_name=oImg.short_name;nimages.ext_name=oImg.ext_name;nimages.mime_type=oImg.mime_type;nimages.status=oImg.status;nimages.orderno=oImg.orderno;nimages.guid=oImg.guid;nimages.token=oImg.token;nimages.resize=angular.copy(oImg.resize);nimages.errorCode=this.errorCode;nimages.errorMessage=this.errorMessage;this.ajaxCall(nimages,{ajaxSuccess:function(oimages){oImg.id=oimages.id;oImg.scope=oimages.scope;oImg.access=oimages.access;oImg.url=oimages.url;_self.rows.push(oImg);_self.sc.$apply();}})},getRecord:function(IDKeyValues,callback){this.keys=IDKeyValues;this.getImages(callback);},getImages:function(callback){this.errorCode=0;this.errorMessage="";var nimages={};nimages.action="get";nimages.keys=this.keys;nimages.config=this.config;nimages.errorCode=this.errorCode;nimages.errorMessage=this.errorMessage;nimages.rows=[];this.ajaxCall(nimages,callback);},ajaxCall:function(nimages,callback){var _self=this;$("div#wliu-wait-id[wliu-wait]").trigger("show");if(callback&&callback.ajaxBefore&&$.isFunction(callback.ajaxBefore))callback.ajaxBefore(nimages);$.ajax({data:{images:nimages},dataType:"json",contentType:"application/x-www-form-urlencoded",error:function(xhr,tStatus,errorTh){$("div#wliu-wait-id[wliu-wait]").trigger("hide");},success:function(req,tStatus){$("div#wliu-wait-id[wliu-wait]").trigger("hide");if(callback&&callback.ajaxAfter&&$.isFunction(callback.ajaxAfter))callback.ajaxAfter(req.images);switch(req.images.action){case"get":_self.syncRows(req.images);break;case"savetext":_self.syncError(req.images);break;case"saveorder":_self.syncError(req.images);break;case"delete":_self.syncError(req.images);break;case"add":_self.syncError(req.images);break;case"save":_self.syncError(req.images);break;}
if(!_self.sc.$$phase)_self.sc.$apply();if(parseInt(req.images.errorCode)==0){if(callback&&callback.ajaxSuccess&&$.isFunction(callback.ajaxSuccess))callback.ajaxSuccess(req.images);}else{if(callback&&callback.ajaxError&&$.isFunction(callback.ajaxError))callback.ajaxError(req.images);}
$(_self.errorShow).trigger("errorshow");GCONFIG.errorCall({errorCode:req.errorCode,errorMessage:req.errorMessage});},type:"post",url:_self.url});},syncRows:function(nimages){this.errorCode=nimages.errorCode;this.errorMessage=nimages.errorMessage;this.config=angular.copy(nimages.config);this.rows=[];for(var ridx in nimages.rows){var theRow=nimages.rows[ridx];theRow.sn=parseInt(nimages.rows[ridx].orderno);this.rows.push(new WLIU.IMAGE(theRow));}},syncError:function(nimages){this.errorCode=nimages.errorCode;this.errorMessage=nimages.errorMessage;}}
var common_scope='scope="{{ table.scope }}" ';var common_ng_hide='ng-hide="table.relationHide(row, name)" ';var common_ng_change='ng-change="table.changeCol(row, name)" ';var common_ng_class='ng-class="{ \'wliuCommon-input-invalid\': table.getCol(row, name).errorCode }" ';var common_ng_disabled='ng-disabled="table.getCol(row, name)==undefined" ';var common_ng_options='ng-model-options="{ updateOn:\'default blur\', debounce:{default: 500, blur:0} }" ';var common_ng=[common_scope,common_ng_change,common_ng_class,common_ng_disabled,common_ng_hide,common_ng_options].join('');var common_tooltip=['popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" ','popup-toggle="hover" ','popup-placement="down" ','popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" '].join('');var wliu_table=angular.module("wliuTable",[]);wliu_table.directive("table.navi",function(){return{restrict:"E",replace:true,scope:{table:"="},template:['<div class="row" style="padding:0px; margin:5px;" ng-show="table.navi.paging==1">','<div class="col-md-12" ng-if="table.navi.paging">','<div class="pull-left" style="padding:0px; margin:0px; white-space:nowrap;">','<span style="vertical-align:middle;">Page: </span>','<input type="text" class="input-tiny" style="height:1.2em;width:30px;font-size:1.2em;text-align:center;" ng-model="table.navi.pageno" ','ng-keypress="keypress($event)" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Page Number" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Page Number\'}}" ','/>','<span style="vertical-align:middle;font-size:1.2em;font-weight:bold"> / </span>','<span style="vertical-align:middle;font-size:1.2em;">{{ table.navi.pagetotal }}</span>','<span style="vertical-align:middle;font-size:1.2em;"> | </span>','<a class="wliu-btn24 wliu-btn24-first"     ng-class="{\'wliu-btn24-first-disabled\':table.firstState()}" ','ng-click="table.firstPage()" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="First Page" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'First Page\'}}" ','>','</a>','<a class="wliu-btn24 wliu-btn24-previous"  ng-class="{\'wliu-btn24-previous-disabled\':table.previousState()}" ','ng-click="table.previousPage()" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Previous Page" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Previous Page\'}}" ','>','</a>','<a class="wliu-btn24 wliu-btn24-next"      ng-class="{\'wliu-btn24-next-disabled\':table.nextState()}" ','ng-click="table.nextPage()" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Next Page" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Next Page\'}}" ','>','</a>','<a class="wliu-btn24 wliu-btn24-last"      ng-class="{\'wliu-btn24-last-disabled\':table.lastState()}" ','ng-click="table.lastPage()" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Last Page" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Last Page\'}}" ','>','</a>','<span style="vertical-align:middle;font-size:1.2em;"> | </span>','<a class="wliu-btn24 wliu-btn24-reload" ','ng-hide="table.navi.loading==1" ','ng-click="table.getRows()" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Reload Data" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Reload Data\'}}" ','></a>','<i class="fa fa-spinner fa-lg fa-pulse fa-fw" aria-hidden="true" ng-show="table.navi.loading==1"></i>','<span style="vertical-align:middle;font-size:1.2em;"> | </span>','<span style="vertical-align:middle; white-space:nowrap;">Total: ','<span style="vertical-align:middle;" ng-bind="table.navi.recordtotal"></span>','</span>','</div>','<div class="pull-right" style="padding:0px; margin:0px;" ng-if="table.navi.pagetotal>0 || table.navi.recordtotal>0">','<span style="vertical-align:middle;">Size: </span>','<input type="text" class="input-tiny" style="height:1.2em;width:40px;font-size:1.2em;text-align:center;" ng-model="table.navi.pagesize" ','ng-keypress="keypress($event)" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Page Size" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Page Size\'}}" ','/>','<a class="wliu-btn24 wliu-btn24-reload" ','ng-hide="table.navi.loading==1" ','ng-click="table.getRows()" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Reload Data" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Reload Data\'}}" ','></a>','<i class="fa fa-spinner fa-lg fa-pulse fa-fw" aria-hidden="true" ng-show="table.navi.loading==1"></i>','<table.order table="table" style="margin-right:10px" xsize="24" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-toggle="hover" popup-body="Sort By" popup-placement="down" ','title="{{table.navi.tooltip? \'\':\'Sort By\'}}" ','><table.order>','</div>','</div>','</div>'].join(''),controller:function($scope){$scope.keypress=function(ev){if(ev.keyCode==13){$scope.table.getRows();}}},link:function(sc,el,attr){}}});wliu_table.directive("table.navi1",function(){return{restrict:"E",replace:true,scope:{table:"="},template:['<div style="display:block; position:relative; padding:0px; margin:5px;" ng-show="table.navi.paging==1">','<div style="padding:0px; margin:0px; white-space:nowrap;">','<a class="wliu-btn16 wliu-btn16-reload" ','ng-hide="table.navi.loading==1" ','ng-click="table.getRows()" ','title="Reload Data" ','></a>','<i class="fa fa-spinner fa-pulse fa-fw" aria-hidden="true" ng-show="table.navi.loading==1"></i>','<span style="vertical-align:middle;font-size:1em;"> | </span>','<a class="wliu-btn16 wliu-btn16-first"     ng-class="{\'wliu-btn16-first-disabled\': table.firstState() }" ','ng-click="table.firstPage()" ','title="First Page"','></a>','<a class="wliu-btn16 wliu-btn16-previous"  ng-class="{\'wliu-btn16-previous-disabled\': table.previousState() }" ','ng-click="table.previousPage()" ','title="Previous Page"','></a>','<a class="wliu-btn16 wliu-btn16-next"      ng-class="{\'wliu-btn16-next-disabled\': table.nextState() }" ','ng-click="table.nextPage()" ','title="Next Page"','></a>','<a class="wliu-btn16 wliu-btn16-last"      ng-class="{\'wliu-btn16-last-disabled\': table.lastState() }" ','ng-click="table.lastPage()" ','title="Last Page"','></a>','<span style="vertical-align:middle;font-size:1em;"> | </span>','<input type="text" class="input-tiny" style="height:1em;width:40px;font-size:1em;text-align:center;" ng-model="table.navi.pageno" ','ng-keypress="keypress($event)" ','title="Page Number"','/>','<span style="vertical-align:middle;font-size:1em;font-weight:bold">/</span>','<span style="vertical-align:middle;font-size:1em;">{{ table.navi.pagetotal }}</span>','<span style="vertical-align:middle;font-size:1em;"> | </span>','<input type="text" class="input-tiny" style="height:1em;width:30px;font-size:1em;text-align:center;" ng-model="table.navi.pagesize" ','ng-keypress="keypress($event)" ','title="Page Size"','/>','</div>','</div>'].join(''),controller:function($scope){$scope.keypress=function(ev){if(ev.keyCode==13){$scope.table.getRows();}}},link:function(sc,el,attr){}}});wliu_table.directive("table.order",function(){return{restrict:"E",replace:true,scope:{table:"=",xsize:"@"},template:['<a class="wliu-btn{{xsize}} wliu-btn{{xsize}}-order">','<div class="wliu-selectlist" style="right:0px;left:auto;">','<div class="wliu-selectlist-title info-color text-center">ORDER</div>','<ul class="wliu-selectlist-content" ng-repeat="colMeta in table.cols" ng-if="colMeta.sort" style="color:#333333;">','<li class="wliu-orderlist" ','ng-class="{\'wliu-orderlist-active\': table.orderState(colMeta.name, \'ASC\')}" ','ng-click="changeOrder(colMeta, \'ASC\')"','>','{{ colMeta.colname }} <i class="fa fa-sort-asc" style="vertical-align:bottom;"></i>','</li>','<li class="wliu-orderlist" ','ng-class="{\'wliu-orderlist-active\':table.orderState(colMeta.name, \'DESC\')}" ','ng-click="changeOrder(colMeta, \'DESC\')"','>','{{ colMeta.colname }} <i class="fa fa-sort-desc" style="vertical-align:top;"></i>','</li>','</ul>','</div>','</a>'].join(''),controller:function($scope){$scope.xsize=$scope.xsize?$scope.xsize:24;$scope.changeOrder=function(colMeta,order){$scope.table.navi.orderby=colMeta.trans?colMeta.col:colMeta.table+"."+colMeta.col;$scope.table.navi.sortby=order;$scope.table.getRows();}},link:function(sc,el,attr){}}});wliu_table.directive("table.head",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<label for="navi_{{table.scope}}_{{name}}" class="wliuCommon-header" scope="{{ table.scope }}" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}" ','title="{{table.colMeta(name).tooltip? \'\':table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}" ','>','<span style="vertival-align:middle;">{{ table.colMeta(name).colname?table.colMeta(name).colname:name }}</span>','<span style="vertival-align:middle;" class="wliuCommon-text-error" ng-if="table.colMeta(name).notnull"> <b>*</b></span> ','<a id="navi_{{table.scope}}_{{name}}" ng-click="changeOrder()" class="wliu-btn16 wliu-btn16-sort" ng-if="table.colMeta(name).sort" ','ng-class="{\'wliu-btn16-sort-asc\': table.orderState(name, \'ASC\') ',',\'wliu-btn16-sort-desc\':table.orderState(name, \'DESC\') }" title="Sort by {{table.colMeta(name).colname}}"','>','</a>','</label>'].join(''),controller:function($scope){$scope.changeOrder=function(){var order_col=$scope.table.colMeta($scope.name).trans?$scope.table.colMeta($scope.name).col:$scope.table.colMeta($scope.name).table+"."+$scope.table.colMeta($scope.name).col;if($scope.table.navi.orderby==order_col){if($scope.table.navi.sortby.toUpperCase()=="ASC"){$scope.table.navi.sortby="DESC";}else{$scope.table.navi.sortby="ASC";}}else{$scope.table.navi.orderby=order_col;$scope.table.navi.sortby=$scope.table.colMeta($scope.name).sort?$scope.table.colMeta($scope.name).sort.toUpperCase():"ASC";}
$scope.table.getRows();}},link:function(sc,el,attr){}}});wliu_table.directive("table.rowstatus",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"="},template:['<span class="wliu-text" scope="{{ table.scope }}" style="vertical-align:middle;padding:0px;" ','ng-disabled="row==undefined" ','>','<a class="wliu-btn16 wliu-btn16-rowstate-save"     ng-if="row.error.errorCode==0 && row.rowstate==1"   title="Changed"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-add"      ng-if="row.error.errorCode==0 && row.rowstate==2"   title="New"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-delete"   ng-if="row.error.errorCode==0 && row.rowstate==3"   title="Deleted"></a>',' <span title="Series Number" style="vertical-align:middle;">{{ table.indexByRow(row) - 0 + 1 }} / {{table.rows.length}}</span>','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.rowno",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"="},template:['<span class="wliu-text" scope="{{ table.scope }}" ','ng-disabled="row==undefined" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" ','popup-body="{{row.error.errorCode?row.error.errorMessage.nl2br():\'\'}}" ','>','<a class="wliu-btn16 wliu-btn16-error-help"    ng-if="row.error.errorCode" ','>','</a>','<span ng-if="row.error.errorCode==0 && row.rowstate==0" title="Series Number">{{ table.indexByRow(row) - 0 + 1 }}</span>','<a class="wliu-btn16 wliu-btn16-rowstate-save" ng-show="row.error.errorCode==0 && row.rowstate==1" ','title="Change!" ','>','</a>','<a class="wliu-btn16 wliu-btn16-rowstate-add" ng-show="row.error.errorCode==0 && row.rowstate==2" ','title="New!" ','>','</a>','<a class="wliu-btn16 wliu-btn16-rowstate-delete" ng-show="row.error.errorCode==0 && row.rowstate==3" ','title="Delete!" ','>','</a>','</span>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("table.fileupload",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",icon:"@",actname:"@"},template:['<div style="display:inline-block;min-width:120px;text-align:left;">','<i ng-if="icon" class="wliu-btn24 wliu-btn24-file-upload" style="overflow:hidden;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Upload File" popup-placement="down" ','>','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" ','ng-disabled="table.getCol(row, name)==undefined" />','</i>','<div ng-if="!icon" class="btn btn-info" style="display:inline-block;position:relative;text-transform:none;overflow:hidden;height:20px;line-height:20px;padding:2px 8px;">','<a class="wliu-btn16 wliu-btn16-upload"></a> ','<input type="file" onchange="angular.element(this).scope().selectFile(event);" style="display:block; position:absolute; opacity:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." />','{{actname}}','</div>','<a class="wliu-btn16 wliu-btn16-img-print" ng-click="printFile()" ng-if="table.getCol(row, name).value" style="margin-left:5px;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Print File" popup-placement="down" ','>','<a class="wliu-btn16 wliu-btn16-dispose" ng-click="deleteFile()" ng-if="table.getCol(row, name).value" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Delete File" popup-placement="down"  ','></a>','<div style="display:block;position:relative;font-size:12px;font-weight:bold;color:red;" ng-if="table.getCol(row, name).errorCode">{{table.getCol(row, name).errorMessage}}</div>','<div style="display:block;text-align:left;" ng-if="table.getCol(row, name).value && !table.getCol(row, name).errorCode">','<a href="javascript:void(0)" style="text-decoration:underline;margin:0px;font-size:12px;" ng-click="downloadFile()">{{theFile.full_name.subName(12)?theFile.full_name.subName(12):table.colMeta(name).coldesc}}</a>','</div>','</div>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.theFile=new WLIU.FILE({guid:guid()});$scope.selectFile=function(event){files=(event.srcElement||event.target).files;FFILE.allowSize=$scope.table.colMeta($scope.name).maxlength>0&&$scope.table.colMeta($scope.name).maxlength<=GCONFIG.max_upload_size?$scope.table.colMeta($scope.name).maxlength:GCONFIG.max_upload_size;FFILE.allowType=$scope.table.colMeta($scope.name).allowtype?$scope.table.colMeta($scope.name).allowtype:GCONFIG.file_allow_type;FFILE.fromFile($scope.theFile,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.table.getCol($scope.row,$scope.name).value=fObj.data?fObj.data:"";$scope.table.changeCol($scope.row,$scope.name);$scope.$apply();}});}
$scope.printFile=function(){if($scope.table.getCol($scope.row,$scope.name).value){FFILE.exportDataURL($scope.table.getCol($scope.row,$scope.name).value);}}
$scope.deleteFile=function(){$scope.table.getCol($scope.row,$scope.name).value="";$scope.table.changeCol($scope.row,$scope.name);}
$scope.downloadFile=function(){if($scope.table.getCol($scope.row,$scope.name).value){FFILE.exportDataURL($scope.table.getCol($scope.row,$scope.name).value);}}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("table.imgupload",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",actname:"@",ww:"@",hh:"@",vw:"@",vh:"@",view:"@",minww:"@",minhh:"@"},template:['<span>','<div style="position:relative;font-size:12px;font-weight:bold;color:red;" ng-if="table.getCol(row, name).errorCode">{{table.getCol(row, name).errorMessage}}</div>','<div style="display:inline-block;position:relative;min-width:{{minww}}px;min-height:{{minhh}}px;width:{{ww}}px;border:1px solid #cccccc;" class="wliu-background-1">','<i class="wliu-btn16 wliu-btn16-image" style="position:absolute; margin-top:3px;margin-left:3px;opacity:0.8; overflow:hidden;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Upload Image" popup-placement="down" ','>','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" ','ng-disabled="table.getCol(row, name)==undefined" />','</i>','<a class="wliu-btn16 wliu-btn16-img-print" ng-click="printImage()" ng-if="table.getCol(row, name).value" style="position:absolute; margin-top:3px;margin-left:24px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Print Image" popup-placement="down" ','>','</a>','<a class="wliu-btn16 wliu-btn16-dispose" ng-click="deleteImage()" ng-if="table.getCol(row, name).value" style="position:absolute; right:0px; margin-top:3px;margin-right:3px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Delete Image" popup-placement="down" ','>','</a>','<span style="position:absolute;top:24px;left:3px;font-size:12px;font-weight:bold;color:#666666;" ng-if="!table.getCol(row, name).value && !table.getCol(row, name).errorCode">{{actname}}</span>','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{ww}}px;height:{{hh}}px;" class="img-content" targetid="{{imgviewerid}}">','<img class="img-responsive" width="100%" style="display:inline-block;" ng-click="clickImage()" onload="imageAutoFix(this)" ww={{ww}} hh="{{hh}}" src="{{table.getCol(row, name).value?table.getCol(row, name).value:\'\'}}" />','</div>','</div>','<input type="hidden" scope="{{ table.scope }}" title="" ','ng-model="table.getCol(row, name).value" ','ng-change="table.changeCol(row, name)" ','ng-disabled="table.getCol(row, name)==undefined" ','/>','</div>','<div id="{{imgviewerid}}" ng-if="view" wliu-diag maskable fade table-diag disposable>','<div wliu-diag-body style="text-align:center;">','<img class="img-responsive" width="100%" ww="{{vw}}" hh="{{vh}}" src="{{ imgobj.resize[view].data?imgobj.resize[view].data:\'\' }}" />','</div>','</div>','</span>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.imgobj=new WLIU.IMAGE({guid:guid(),token:guid()});$scope.imgviewerid=$scope.table.scope+"_"+$scope.name+"_"+$scope.imgobj.guid;$scope.imgviewer="#"+$scope.imgviewerid;$scope.minww=$scope.minww?$scope.minww:"90";$scope.minhh=$scope.minhh?$scope.minhh:"60";$scope.ww=$scope.ww?$scope.ww:$scope.minww;$scope.vw=$scope.vw?$scope.vw:"400";$scope.printImage=function(){if($scope.table.getCol($scope.row,$scope.name).value){FFILE.exportDataURL($scope.table.getCol($scope.row,$scope.name).value);}}
$scope.clickImage=function(){if($scope.view){if($scope.table.getCol($scope.row,$scope.name).value){$scope.imgobj.resize.origin.data=$scope.table.getCol($scope.row,$scope.name).value;FIMAGE.setView($scope.view);FIMAGE.resizeAll($scope.imgobj,function(){$scope.$apply();$($scope.imgviewer).trigger("ishow");});}else{$($scope.imgviewer).trigger("ishow");}}}
$scope.deleteImage=function(){$scope.table.getCol($scope.row,$scope.name).value="";$scope.table.changeCol($scope.row,$scope.name);}
$scope.selectFile=function(event){files=(event.srcElement||event.target).files;var view=$scope.table.colMeta($scope.name).view?$scope.table.colMeta($scope.name).view:"medium";FIMAGE.view=view;FIMAGE.allowSize=$scope.table.colMeta($scope.name).maxlength>0&&$scope.table.colMeta($scope.name).maxlength<=GCONFIG.max_upload_size?$scope.table.colMeta($scope.name).maxlength:GCONFIG.max_upload_size;FIMAGE.allowType=$scope.table.colMeta($scope.name).allowtype?$scope.table.colMeta($scope.name).allowtype:GCONFIG.image_allow_type;FIMAGE.fromFile($scope.imgobj,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.table.getCol($scope.row,$scope.name).value=$scope.imgobj.resize[view].data?$scope.imgobj.resize[view].data:"";$scope.table.changeCol($scope.row,$scope.name);$scope.$apply();}});}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}
$("body > div[table-diag][disposable]").each(function(img_idx,img_viewer){if($("div.img-content[targetid='"+$(img_viewer).attr("id")+"']").length<=0)$(img_viewer).remove();});$("body>"+sc.imgviewer).remove();$(sc.imgviewer).appendTo("body");$(sc.imgviewer).wliuDiag({});$(sc.imgviewer).unbind("ishow").bind("ishow",function(evt){$(sc.imgviewer).trigger("show");var click_flag=true;$("img",sc.imgviewer).unbind("load").bind("load",function(ev){var img=ev.target;var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=400;var c_hh=400;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;if(click_flag){click_flag=false;$(sc.imgviewer).trigger("show");}});});});}}});wliu_table.directive("table.imgupload1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",actname:"@",ww:"@",hh:"@",vw:"@",vh:"@",ratio:"@",view:"@",minww:"@",minhh:"@"},template:['<span>','<div style="position:relative;font-size:12px;font-weight:bold;color:red;" ng-if="table.getCol(row, name).errorCode">{{table.getCol(row, name).errorMessage}}</div>','<div style="display:inline-block;position:relative;min-width:{{minww}}px;min-height:{{minhh}}px;width:{{ww}}px;border:1px solid #cccccc;" class="wliu-background-1">','<i class="wliu-btn16 wliu-btn16-image" style="position:absolute; margin-top:3px;margin-left:3px;opacity:0.8; overflow:hidden;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Upload Image" popup-placement="down" ','>','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" ','ng-disabled="table.getCol(row, name)==undefined" />','</i>','<a class="wliu-btn16 wliu-btn16-img-print" ng-click="printImage()" ng-if="table.getCol(row, name).value" style="position:absolute; margin-top:3px;margin-left:24px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Print Image" popup-placement="down" ','>','</a>','<a class="wliu-btn16 wliu-btn16-dispose" ng-click="deleteImage()" ng-if="table.getCol(row, name).value" style="position:absolute; right:0px; margin-top:3px;margin-right:3px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Delete Image" popup-placement="down" ','>','</a>','<span style="position:absolute;top:24px;left:3px;font-size:12px;font-weight:bold;color:#666666;" ng-if="!table.getCol(row, name).value && !table.getCol(row, name).errorCode">{{actname}}</span>','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{ww}}px;height:{{hh}}px;" class="img-content" targetid="{{imgeditorid}}">','<img class="img-responsive" width="100%" ng-click="clickImage()" style="display:inline-block;" onload="imageAutoFix(this)" ww={{ww}} hh="{{hh}}" style="cursor:pointer;" src="{{table.getCol(row, name).value?table.getCol(row, name).value:\'\'}}" />','</div>','</div>','<input type="hidden" scope="{{ table.scope }}" title="" ','ng-model="table.getCol(row, name).value" ','ng-change="table.changeCol(row, name)" ','ng-disabled="table.getCol(row, name)==undefined" ','/>','</div>','<div id="{{imgeditorid}}" wliu-diag movable maskable fade table-diag disposable>','<div wliu-diag-head>Image Editor</div>','<div wliu-diag-body>','<div ng-if="imgobj.errorCode">','{{imgobj.errorMessage}}','</div>','<div ng-if="!imgobj.errorCode">','<div style="min-height:300px;">','<div class="wliu-image-frame" style="position:relative;">','<img class="img-responsive" width="100%" ww="{{vw}}" hh="{{vh}}" style="cursor:pointer;" src="{{ imgobj.resize[view].data?imgobj.resize[view].data:\'\' }}" />','<div class="wliu-image-crop">','<div class="wliu-image-crop-h"></div>','<div class="wliu-image-crop-v"></div>','</div>','</div>','</div>','<div style="text-align:center;">','<button ng-click="reset()" title="Restore Image" class="btn btn-outline-success waves-effect pull-right {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-restore"></a>',' Reset</button>','<button ng-click="crop()" title="Crop Image" class="btn btn-outline-primary waves-effect pull-right {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-crop"></a>',' Crop</button>','<button ng-click="rotate()" title="Rotate Image" class="btn btn-outline-primary waves-effect pull-right {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-rotate-right"></a>',' Rotate</button>','<button ng-click="save()" title="Upload Image" class="btn btn-outline-secondary pull-left waves-effect {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-okey"></a>',' Save</button>','<button ng-click="dispose()" title="Cancel Upload" class="btn btn-outline-warning pull-left waves-effect" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-dispose"></a>',' Cancel</button>','</div>','</div>','</div>','</div>','</span>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.imgobj=new WLIU.IMAGE({guid:guid(),token:guid()});$scope.imgeditorid=$scope.table.scope+"_"+$scope.name+"_"+$scope.imgobj.guid;$scope.imgeditor="#"+$scope.imgeditorid;$scope.minww=$scope.minww?$scope.minww:"80";$scope.minhh=$scope.minhh?$scope.minhh:"60";$scope.ww=$scope.ww?$scope.ww:$scope.minww;$scope.vw=$scope.vw?$scope.vw:"400";$scope.view=$scope.table.colMeta($scope.name).view?$scope.table.colMeta($scope.name).view:"medium";$scope.clickImage=function(){if(!$scope.imgobj.resize.origin.data){$scope.imgobj.resize.origin.data=$scope.table.getCol($scope.row,$scope.name).value;FIMAGE.setView($scope.view);FIMAGE.resizeAll($scope.imgobj,function(){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}else{$($scope.imgeditor).trigger("ishow");}}
$scope.printImage=function(){if($scope.table.getCol($scope.row,$scope.name).value){FFILE.exportDataURL($scope.table.getCol($scope.row,$scope.name).value);}}
$scope.deleteImage=function(){$scope.table.getCol($scope.row,$scope.name).value="";$scope.table.changeCol($scope.row,$scope.name);}
$scope.selectFile=function(event){files=(event.srcElement||event.target).files;var view=$scope.table.colMeta($scope.name).view?$scope.table.colMeta($scope.name).view:"medium";FIMAGE.view=$scope.view;FIMAGE.allowSize=$scope.table.colMeta($scope.name).maxlength>0&&$scope.table.colMeta($scope.name).maxlength<=GCONFIG.max_upload_size?$scope.table.colMeta($scope.name).maxlength:GCONFIG.max_upload_size;FIMAGE.allowType=$scope.table.colMeta($scope.name).allowtype?$scope.table.colMeta($scope.name).allowtype:GCONFIG.image_allow_type;FIMAGE.fromFile($scope.imgobj,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.table.getCol($scope.row,$scope.name).value=$scope.imgobj.resize[view].data?$scope.imgobj.resize[view].data:"";$scope.table.changeCol($scope.row,$scope.name);$scope.$apply();$($scope.imgeditor).trigger("ishow");}});}
$scope.rotate=function(){FIMAGE.setView($scope.view);FIMAGE.rotate($scope.imgobj,function(oImg){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}
$scope.crop=function(){FIMAGE.setView($scope.view);FIMAGE.cropDiv($scope.imgobj,$("div.wliu-image-frame",$scope.imgeditor),$("div.wliu-image-crop",$scope.imgeditor),function(oImg){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}
$scope.reset=function(){FIMAGE.setView($scope.view);FIMAGE.cropReset($scope.imgobj,function(oImg){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}
$scope.save=function(){if($scope.imgobj.resize.origin.data!=""){$scope.table.setImage($scope.row,$scope.name,$scope.imgobj);$scope.table.changeCol($scope.row,$scope.name);$scope.dispose();}}
$scope.dispose=function(){FIMAGE.cropDivReset($("div.wliu-image-crop",$scope.imgeditor));if(!$scope.$root.$$phase)$scope.$apply();$($scope.imgeditor).trigger("hide");}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}
var ratio=0;if(sc.ww&&sc.hh){var ratio=parseInt(sc.ww)/parseInt(sc.hh);}
$("body > div[table-diag][disposable]").each(function(img_idx,img_editor){if($("div.img-content[targetid='"+$(img_editor).attr("id")+"']").length<=0)$(img_editor).remove();});$("body > "+sc.imgeditor).remove();$(sc.imgeditor).appendTo("body");$(sc.imgeditor).wliuDiag({});$(sc.imgeditor).unbind("ishow").bind("ishow",function(evt){$(sc.imgeditor).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop",sc.imgeditor));var click_flag=true;$("img",sc.imgeditor).unbind("load").bind("load",function(ev){var img=ev.target;var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=400;var c_hh=400;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;if(click_flag){click_flag=false;$(sc.imgeditor).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop",sc.imgeditor));}});});$("div.wliu-image-crop",sc.imgeditor).draggable({containment:"parent"});$("div.wliu-image-crop",sc.imgeditor).resizable({aspectRatio:ratio,containment:"parent"});});}}});wliu_table.directive("table.esign",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",subject:"@",firstname:"@",lastname:"@",ww:"@",hh:"@",minww:"@",minhh:"@"},template:['<span>','<span style="font-size:16px;font-weight:bold;color:red;" ng-if="table.getCol(row, name).errorCode">{{table.getCol(row, name).errorMessage}}</span>','<br ng-if="table.getCol(row, name).errorCode">','<div ng-click="showEsign()" style="display:inline-block;position:relative;min-width:{{minww}}px;min-height:{{minhh}}px;border:1px solid #cccccc;" class="wliu-background-11" >','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{minww}}px;height:{{minhh}}px;" class="esign-content" targetid="{{esignDivid}}">','<img class="img-responsive" width="100%" style="display:inline-block;" onload="imageAutoFix(this)" ww={{minww}} hh={{minhh}} src="{{table.getCol(row, name).value?table.getCol(row, name).value:\'\'}}" />','</div>','<input type="hidden" scope="{{ table.scope }}" title="" ','ng-model="table.getCol(row, name).value" ','ng-change="table.changeCol(row, name)" ','ng-disabled="table.getCol(row, name)==undefined" ','/>','</div>','<div id="{{esignDivid}}" wliu-diag maskable fade esign-diag disposable>','<div wliu-diag-body>','<span style="display:block;color:blue;">Please use mouse or touch screen pen to sign your name:</span>','<canvas id="can" width="{{ww}}" height={{hh}} style="border:2px solid #666666;"></canvas>','<div style="text-align:center;">','<button ng-click="save()" title="Save" class="btn btn-lg btn-outline-success waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Confirm','</button>','<button ng-click="cancel()" title="Be careful. clear signature!" class="btn btn-lg btn-outline-danger waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Clear Signature','</button>','<button ng-click="close()" title="Close" class="btn btn-lg btn-outline-info waves-effect pull-right" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Close','</button>','</div>','</div>','</div>','<span>',].join(''),controller:function($scope){$scope.ww=$scope.ww?$scope.ww:640;$scope.hh=$scope.hh?$scope.hh:320;$scope.minww=$scope.minww?$scope.minww:"100";$scope.minhh=$scope.minhh?$scope.minhh:"50";$scope.esignDivid=$scope.table.scope+"_"+$scope.name+"_"+guid();$scope.esignDiv="#"+$scope.esignDivid;$scope.showEsign=function(){FIMAGE.image2Canvas($scope.esign_canvas.ctx,$scope.table.getCol($scope.row,$scope.name).value);$($scope.esignDiv).trigger("show");}
$scope.save=function(){if($scope.esign_canvas.signed){$scope.esign_canvas.subject=$scope.subject;if($scope.table.getCol($scope.row,$scope.firstname))
$scope.esign_canvas.firstName=$scope.table.getCol($scope.row,$scope.firstname).value;if($scope.table.getCol($scope.row,$scope.lastname))
$scope.esign_canvas.lastName=$scope.table.getCol($scope.row,$scope.lastname).value;$scope.table.getCol($scope.row,$scope.name).value=$scope.esign_canvas.getDataUrl();$scope.table.changeCol($scope.row,$scope.name);$scope.esign_canvas.clear();}
$($scope.esignDiv).trigger("hide");}
$scope.cancel=function(){$scope.table.getCol($scope.row,$scope.name).value="";$scope.table.changeCol($scope.row,$scope.name);$scope.esign_canvas.clear();}
$scope.close=function(){$($scope.esignDiv).trigger("hide");}},link:function(sc,el,attr){$(function(){$("body > div[esign-diag][disposable]").each(function(el_idx,el_esign){if($("div.esign-content[targetid='"+$(el_esign).attr("id")+"']").length<=0)$(el_esign).remove();});$("body>"+sc.esignDiv).remove();$(sc.esignDiv).appendTo("body");$(sc.esignDiv).wliuDiag();sc.esign_canvas=new WLIU.CANVAS({canvas:$("canvas",sc.esignDiv).get(0)});sc.esign_canvas.init();});}}});wliu_table.directive("table.label",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<label class="wliuCommon-label" scope="{{ table.scope }}" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}" ','title="{{table.colMeta(name).tooltip? \'\':table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}" ','>','<span style="vertival-align:middle;">{{ table.colMeta(name).colname?table.colMeta(name).colname:name }}</span>','<span style="vertival-align:middle;" class="wliuCommon-text-error" ng-if="table.colMeta(name).notnull"> <b>*</b></span>','</label>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.html",function($sce){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span scope="{{ table.scope }}" ng-bind-html="getHTML()" ng-hide="table.relationHide(row, name)"></span>'].join(''),controller:function($scope,$sce){$scope.getHTML=function(){if($scope.table.getCol($scope.row,$scope.name))
return $sce.trustAsHtml($scope.table.getCol($scope.row,$scope.name).value);else
return $sce.trustAsHtml("");}},link:function(sc,el,attr){$(function(){});}}});wliu_table.directive("table.text",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label" scope="{{ table.scope }}" ng-hide="table.relationHide(row, name)" ','ng-class="{ \'wliuCommon-input-invalid\': table.getCol(row, name).errorCode }" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{ table.colMeta(name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}"','>','{{ table.getCol(row, name).value }}','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.hidden",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",row:"=",name:"@"},template:['<span><input type="hidden" scope="{{ table.scope }}" ','ng-model="table.getCol(row, name).value" ','ng-change="table.changeCol(row, name)" ','ng-disabled="table.getCol(row, name)==undefined" ','/>','</span>'].join(''),controller:function($scope){}}});wliu_table.directive("table.readonly",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",class:"@"},template:['<span>','<input type="textbox" ng-if="row.rowstate>=2" ','class="{{class}}" ','ng-model="table.getCol(row, name).value" ',common_ng,common_tooltip,'/>','<span class="wliuCommon-label" scope="{{ table.scope }}" ng-hide="table.relationHide(row, name)" ng-if="row.rowstate<2" ','ng-class="{ \'wliuCommon-input-invalid\': table.getCol(row, name).errorCode }" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{ table.colMeta(name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}"','>','{{ table.getCol(row, name).value }}','</span>','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.textbox",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="textbox" ','ng-model="table.getCol(row, name).value" ',common_ng,common_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.password",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",tooltip:"@"},template:['<input type="password" placeholder="Password" ','ng-model="table.getCol(row, name).value" ',common_ng,common_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.passpair",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",class:"@"},template:['<span style="display:inline-block;vertical-align:top;" '+common_ng_hide+'>','<input type="password" style="width:100%;" placeholder="Password" ','ng-model="table.getCol(row, name).value.password" ','ng-change="passChange()" ','class="{{class}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_options,common_tooltip,' />','<input type="password" style="width:100%;" placeholder="Confirm Password" ','ng-model="table.getCol(row, name).value.confirm" ','ng-class="{ \'wliuCommon-input-invalid\': table.getCol(row, name).value.password!=table.getCol(row, name).value.confirm }" ','class="{{class}}" ',common_scope,common_ng_disabled,common_ng_options,'popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).value.password!=table.getCol(row, name).value.confirm ?\'Password not match!\':\'\'}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getCol(row, name).value.password!=table.getCol(row, name).value.confirm?\'Password not match!\':\'\'}}" ',' />','</span>'].join(''),controller:function($scope){$scope.passChange=function(){$scope.table.changeCol($scope.row,$scope.name);}},link:function(sc,el,attr){}}});wliu_table.directive("table.textarea",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<textarea ','ng-model="table.getCol(row, name).value" ',common_ng,common_tooltip,'>','</textarea>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.select",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<select ','ng-model="table.getCol(row, name).value" ','ng-options="sObj.key as sObj.value for sObj in table.colList(name).list" ',common_scope,common_ng_change,common_ng_class,common_ng_disabled,common_ng_hide,common_tooltip,'>','<option value=""></option>','</select>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.relation",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",label:"@"},template:['<span class="checkbox" ',common_scope,common_ng_class,common_tooltip,'>','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}" ','ng-model="table.getCol(row, name).value" ng-value="1"  ','ng-change="table.relationChange(row); table.changeCol(row, name);" ',common_scope,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}" title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}">','{{ label.toLowerCase()=="default"?table.colMeta(name).colname:label?label:"" }}','</label>','</span>',].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.bool",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",label:"@"},template:['<span class="checkbox" ',common_scope,common_ng_class,common_ng_hide,common_tooltip,'>','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}" ','ng-model="table.getCol(row, name).value" ng-value="1"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}" title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}">','{{ label.toLowerCase()=="default"?table.colMeta(name).colname:label?label:"" }}','</label>','</span>',].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.booltext",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",yes:"@",no:"@"},template:['<span ',common_ng_hide,'>','{{ table.getCol(row, name)?(table.getCol(row, name).value?yes?yes:\'Yes\':no?no:\'No\'):\'\' }}','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.datetime",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span  ',common_ng_hide,common_tooltip,'>','<input type="textbox" class="wliuCommon-datepicker" placeholder="yyyy-mm-dd" ','ng-model="table.getCol(row, name).value.date" ',common_scope,common_ng_change,common_ng_class,common_ng_disabled,'/>','<input type="textbox" class="wliuCommon-timepicker" placeholder="hh:mm" ','ng-model="table.getCol(row, name).value.time" ',common_scope,common_ng_change,common_ng_class,common_ng_disabled,'/>','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){var today=new Date();$("input.wliuCommon-datepicker",el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});$("input.wliuCommon-timepicker",el).pickatime({twelvehour:false});});}}});wliu_table.directive("table.date",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="textbox" class="wliuCommon-datepicker" placeholder="yyyy-mm-dd" ','ng-model="table.getCol(row, name).value" ',common_scope,common_ng_change,common_ng_class,common_ng_disabled,common_ng_hide,common_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){var today=new Date();$(el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});});}}});wliu_table.directive("table.time",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="textbox" class="wliuCommon-timepicker" placeholder="hh:mm" ','ng-model="table.getCol(row, name).value" ',common_scope,common_ng_change,common_ng_class,common_ng_hide,common_ng_disabled,common_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){$(el).pickatime({twelvehour:false});});}}});wliu_table.directive("table.intdate",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",row:"=",name:"@",format:"@"},template:['<span class="wliuCommon-label" ',common_ng_hide,'>','{{ table.getCol(row, name).value?(table.getCol(row, name).value>0?(table.getCol(row, name).value * 1000 | date : (format?format:"yyyy-MM-dd HH:mm") ):"") :"" }}','</span>'].join(''),controller:function($scope){}}});wliu_table.directive("table.checkbox",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@"},template:['<div ',common_scope,common_ng_class,common_ng_hide,common_tooltip,'>','<span class="wliuCommon-label" ','ng-repeat="rdObj in table.lists[table.colMeta(name).list].list">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}_{{rdObj.key}}" ','ng-model="table.getCol(row, name).value[rdObj.key]" ng-value="rdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.checkbox1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(name).keys.guid=row.guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var text=$.map($scope.table.colList($scope.name).list,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("table.checktext1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var text=$.map($scope.table.colList($scope.name).list,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.checkdiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable ',common_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all"  ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all"  ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value[rdObj.key]" ng-value="rdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',common_scope,'/>','<label for="{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(guid,name){$scope.table.getColByGuid(guid,name).value=$scope.table.getColByGuid(guid,name).value||{};for(var key in $scope.table.lists[$scope.name].list){$scope.table.getColByGuid(guid,name).value[$scope.table.lists[$scope.name].list[key].key]=true;}
$scope.table.changeColByGuid(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getColByGuid(guid,name).value={};$scope.table.changeColByGuid(guid,name);}
$scope.valueArr=function(guid,name){var valueArr=$.map($scope.table.lists[$scope.name].list,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value[n.key])
return n;else
return null;}else{return null;}});return valueArr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("table.checklist1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px; padding:2px; overflow-y:auto; overflow:visible; text-align:left; min-width:240px;" ',common_scope,common_ng_class,common_ng_hide,common_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.colList(name).list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}_{{rdObj.key}}" ','ng-model="table.getCol(row, name).value[rdObj.key]" ng-value="rdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.checkall=function(){$scope.table.getCol($scope.row,$scope.name).value=$scope.table.getCol($scope.row,$scope.name).value||{};for(var key in $scope.table.colList($scope.name).list){$scope.table.getCol($scope.row,$scope.name).value[$scope.table.colList($scope.name).list[key].key]=true;}
$scope.table.changeCol($scope.row,$scope.name);}
$scope.removeall=function(){$scope.table.getCol($scope.row,$scope.name).value={};$scope.table.changeCol($scope.row,$scope.name);}
$scope.valueArr=function(){var valueArr=$.map($scope.table.colList($scope.name).list,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n;else
return null;}else{return null;}});return valueArr;}},link:function(sc,el,attr){}}});wliu_table.directive("table.checkbox2",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(name).keys.guid=row.guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}
return ret_text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("table.checktext2",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.checkdiag2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable class="container" ',common_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.lists[name].list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value[tdObj.key]" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',common_scope,'/>','<label for="{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(guid,name){$scope.table.getColByGuid(guid,name).value=$scope.table.getColByGuid(guid,name).value||{};for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;for(var dkey in dList){$scope.table.getColByGuid(guid,name).value[dList[dkey].key]=true;}}
$scope.table.changeColByGuid(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getColByGuid(guid,name).value={};$scope.table.changeColByGuid(guid,name);}
$scope.valueArr=function(guid,name){var ret_arr=[];for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("table.checklist2",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;overflow:visible;" ',common_scope,common_ng_hide,common_ng_class,common_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="min-height:250px;min-width:350px;font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.colList(name).list|filter:search"></span>','<div class="col-sm-{{colnum}}" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" ','ng-model="table.getCol(row, name).value[tdObj.key]" ng-value="tdObj.key" ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.checkall=function(){$scope.table.getCol($scope.row,$scope.name).value=$scope.table.getCol($scope.row,$scope.name).value||{};for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;for(var dkey in dList){$scope.table.getCol($scope.row,$scope.name).value[dList[dkey].key]=true;}}
$scope.table.changeCol($scope.row,$scope.name);}
$scope.removeall=function(){$scope.table.getCol($scope.row,$scope.name).value={};$scope.table.changeCol($scope.row,$scope.name);}
$scope.valueArr=function(){var ret_arr=[];for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("table.checkbox3",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(name).keys.guid=row.guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var text=$.map(list3,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}}
return ret_text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("table.checktext3",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var text=$.map(list3,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.checkdiag3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag maskable movable class="container" ',common_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all" ng-show="bar==1"></a>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.lists[name].list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.lists[name].list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<span style="white-space:nowrap;font-weight:700;">{{ rdObj.value }}</span>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name ).value[tdObj.key]" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',common_scope,'/>','<label for="{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.listFilter=$scope.listFilter||{};$scope.checkall=function(guid,name){$scope.table.getColByGuid(guid,name).value=$scope.table.getColByGuid(guid,name).value||{};for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;for(var key3 in list3){$scope.table.getColByGuid(guid,name).value[list3[key3].key]=true;}}}
$scope.table.changeColByGuid(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getColByGuid(guid,name).value={};$scope.table.changeColByGuid(guid,name);}
$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(guid,name){var ret_arr=[];for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("table.checklist3",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;overflow:visible;" ',common_scope,common_ng_hide,common_ng_class,common_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}, ','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.colList(name).list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="min-height:250px;min-width:350px;font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.colList(name).list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<span style="white-space:nowrap;font-weight:700;">{{ rdObj.value }}</span>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" ','ng-model="table.getCol(row, name).value[tdObj.key]" ng-value="tdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.listFilter=$scope.listFilter||{};$scope.checkall=function(){$scope.table.getCol($scope.row,$scope.name).value=$scope.table.getCol($scope.row,$scope.name).value||{};for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;for(var key3 in list3){$scope.table.getCol($scope.row,$scope.name).value[list3[key3].key]=true;}}}
$scope.table.changeCol($scope.row,$scope.name);}
$scope.removeall=function(){$scope.table.getCol($scope.row,$scope.name).value={};$scope.table.changeCol($scope.row,$scope.name);}
$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(){var ret_arr=[];for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radio",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@"},template:['<div class="wliuCommon-label" ',common_scope,common_ng_class,common_ng_hide,common_tooltip,'>','<span ','ng-repeat="rdObj in table.lists[table.colMeta(name).list].list">','<span class="radio">','<input type="radio" id="{{table.scope}}_{{name}}_{{row}}_{{rdObj.key}}" ','ng-model="table.getCol(row, name).value" ng-value="rdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label scope="{{ table.scope }}" for="{{table.scope}}_{{name}}_{{row}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.radio1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input  type="text" readonly class="wliuCommon-radiolist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(name).keys.guid=row.guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var val=$scope.table.getCol($scope.row,$scope.name)?$scope.table.getCol($scope.row,$scope.name).value:"";var valText=FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val})?FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val}).value:"";return valText;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radiotext1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var val=$scope.table.getCol($scope.row,$scope.name)?$scope.table.getCol($scope.row,$scope.name).value:"";var valText=FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val})?FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val}).value:"";return valText;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radiodiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable ',common_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','{{ valueText(table.lists[name].keys.guid, table.lists[name].keys.name) }}','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{rdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="rdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',common_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.valueText=function(guid,name){var val=$scope.table.getColByGuid(guid,name)?$scope.table.getColByGuid(guid,name).value:"";var valueText=FCOLLECT.firstByKV($scope.table.lists[$scope.name].list,{key:val})?FCOLLECT.firstByKV($scope.table.lists[$scope.name].list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("table.radiolist1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px; padding:2px; overflow-y:auto;text-align:left; min-width:240px;" ',common_scope,common_ng_hide,common_ng_class,common_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','{{ valueText() }}','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.colList(name).list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{row.guid}}" id="{{table.scope}}_{{name}}_{{row.guid}}_{{rdObj.key}}" ','ng-model="table.getCol(row, name).value" ng-value="rdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.valueText=function(){var val=$scope.table.getCol($scope.row,$scope.name)?$scope.table.getCol($scope.row,$scope.name).value:"";var valueText=$scope.table.FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val})?$scope.table.FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radio2",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-radiolist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(name).keys.guid=row.guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radiotext2",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radiodiag2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable class="container" ',common_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.lists[name].list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid( table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',common_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.valueArr=function(guid,name){var ret_arr=[];for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("table.radiolist2",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;"',common_scope,common_ng_hide,common_ng_class,common_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.colList(name).list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{row.guid}}" id="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" ','ng-model="table.getCol(row, name).value" ng-value="tdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.valueArr=function(){var ret_arr=[];for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radio3",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-radiolist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',common_scope,common_ng_class,common_ng_disabled,common_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(name).keys.guid=row.guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;for(var pkey in dList){var pList=dList[pkey].list;var text=$.map(pList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radiotext3",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;for(var pkey in dList){var pList=dList[pkey].list;var text=$.map(pList,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("table.radiodiag3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable class="container" ',common_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.lists[name].list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.lists[name].list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',common_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.listFilter=$scope.listFilter||{};$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(guid,name){var ret_arr=[];for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("table.radiolist3",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;" ',common_scope,common_ng_hide,common_ng_class,common_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.colList(name).list" ','ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.colList(name).list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{row.guid}}" id="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" ','ng-model="table.getCol(row, name).value" ng-value="tdObj.key"  ',common_scope,common_ng_change,common_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.listFilter=$scope.listFilter||{};$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(){var ret_arr=[];for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("table.bgroup",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",row:"=",actname:"@"},template:['<div class="dropdown" style="white-space:nowrap;">','<button type="button" data-toggle="dropdown" ','style="font-size:0.8em;" ','ng-class="{\'btn-info\': table.getRow(row).rowstate==0, \'btn-warning\': table.getRow(row).rowstate!=0}" ',common_scope,'>','{{actname}} ','<i class="fa fa-1 fa-caret-down"></i>','</button>','<ul class="dropdown-menu" style="white-space:nowrap;" ng-transclude>','</ul>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("table.next",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",actname:"@",action:"&"},template:['<span>','<button class="btn btn-outline-primary waves-effect" ','ng-click="navRecord()" ','ng-if="table.navRightState()"','>','{{actname?actname:name}}','</button>','</span>'].join(''),controller:function($scope){$scope.navRecord=function(){$scope.table.navRight();$scope.action();}},link:function(sc,el,attr){}}});wliu_table.directive("table.previous",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",actname:"@",action:"&"},template:['<span>','<button class="btn btn-outline-primary waves-effect" ','ng-click="navRecord()" ','ng-if="table.navLeftState()"','>','{{actname}}','</button>','</span>'].join(''),controller:function($scope){$scope.navRecord=function(){$scope.table.navLeft();$scope.action();}},link:function(sc,el,attr){}}});wliu_table.directive("table.blink",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",actname:"@",action:"&"},template:['<span>','<a href="javascript:void(0);" class="wliuCommon-table-btn16" ','ng-click="action1(table.getRow(row))" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ','title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}"',common_scope,'>','<i class="wliu-btn16 wliu-btn16-{{name}}"></i> ','<span style="vertical-align:middle;">{{actname}}</span>','</a>','</span>'].join(''),controller:function($scope){$scope.action1=function(theRow){switch($scope.name.toLowerCase()){case"detail":$scope.table.current=theRow.guid;break;case"save":$scope.table.saveRow(theRow);break;case"cancel":$scope.table.cancelRow(theRow);break;case"add":break;case"delete":$scope.table.deleteRow(theRow);break;}
$scope.action();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.tablebutton",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",outline:"@",action:"&",before:"&",after:"&"},template:['<div class="white-block">','<button class="btn btn{{ outline==1?\'-outline\':\'\'}}-{{ buttonStyle() }} waves-effect" ','style="min-width:60px;" ','title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','ng-click="action1()" ',common_scope,'>','{{actname}}','</button>','</div>'].join(''),controller:function($scope){$scope.buttonStyle=function(){var ret_val="primary";switch($scope.name){case"search":ret_val="secondary";break;case"match":ret_val="secondary";break;case"save":ret_val="secondary";break;case"cancel":ret_val="warning";break;default:ret_val="info";break;}
return ret_val;}
$scope.action1=function(theRow){$scope.before();switch($scope.name.toLowerCase()){case"search":$scope.table.allRows();break;case"match":$scope.table.matchRows();break;case"save":$scope.table.saveRows();break;case"cancel":$scope.table.cancelRows();break;default:break;}
$scope.action();$scope.after();};$scope.buttonState=function(){};},link:function(sc,el,attr){}}});wliu_table.directive("table.singlebutton",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",actname:"@",action:"&",outline:"@",icon:"@",before:"&",after:"&"},template:['<span>','<button class="btn btn{{ outline==1?\'-outline\':\'\'}}-{{ buttonStyle() }} waves-effect" ','style="min-width:60px;" ','title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','ng-disabled="!buttonState(name, table.getRow(row).rowstate)" ','ng-click="action1(table.getRow(row))" ','title="{{ table.getRow(row).error.errorCode ? table.getRow(row).error.errorMessage : \'\' }}" ',common_scope,'>','<span style="vertical-align:middle;">','{{actname}}','</span>','</button>','</span>'].join(''),controller:function($scope){$scope.buttonStyle=function(){var ret_val="primary";switch($scope.name){case"save":ret_val="secondary";break;case"cancel":ret_val="warning";break;}
return ret_val;}
$scope.action1=function(theRow){$scope.before();switch($scope.name.toLowerCase()){case"save":$scope.table.saveRow(theRow);break;case"cancel":if($scope.table.singleKeys)
$scope.table.cancelRow(theRow);else
$scope.table.resetRow(theRow);break;}
$scope.action();$scope.after();};$scope.buttonState=function(name,row){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return row>=0&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.rowbutton",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",actname:"@",action:"&",outline:"@",icon:"@",before:"&",after:"&"},template:['<span>','<button class="btn btn{{ outline==1?\'-outline\':\'\'}}-{{ buttonStyle() }} waves-effect" ','style="min-width:60px;" ','title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','ng-click="action1(table.getRow(row))" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ','title="{{ table.getRow(row).error.errorCode ? table.getRow(row).error.errorMessage : \'\' }}" ',common_scope,'>','<span ng-if="icon==1" style="vertical-align:middle;">','<i class="wliu-btn16 wliu-btn16-rowstate-error"    ng-if="table.getRow(row).error.errorCode" ','title="{{ table.getRow(row).error.errorCode ? table.getRow(row).error.errorMessage : \'\' }}"','></i> ','<i class="wliu-btn16 wliu-btn16-rowstate-save"     ng-if="table.getRow(row).error.errorCode==0 && table.getRow(row).rowstate==1" title="Changed"></i> ','<i class="wliu-btn16 wliu-btn16-rowstate-add"      ng-if="table.getRow(row).error.errorCode==0 && table.getRow(row).rowstate==2" title="New"></i> ','<i class="wliu-btn16 wliu-btn16-rowstate-delete"   ng-if="table.getRow(row).error.errorCode==0 && table.getRow(row).rowstate==3" tilte="Deleted"></i> ','</span>','<span style="vertical-align:middle;">','{{actname}}','</span>','</button>','</span>'].join(''),controller:function($scope){$scope.buttonStyle=function(){var ret_val="primary";switch($scope.name){case"detail":ret_val="info";break;case"add":ret_val="default";break;case"save":ret_val="secondary";break;case"reset":case"cancel":ret_val="warning";break;case"delete":ret_val="danger";break;}
return ret_val;}
$scope.action1=function(theRow){$scope.before();switch($scope.name.toLowerCase()){case"detail":$scope.table.current=theRow.guid;break;case"save":$scope.table.saveRow(theRow);break;case"cancel":$scope.table.cancelRow(theRow);break;case"reset":$scope.table.resetRow(theRow);break;case"add":break;case"delete":$scope.table.deleteRow(theRow);break;}
$scope.action();$scope.after();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;if(name=="add"){if(parseInt($scope.table.rights[name])){rowstate=rowstate?rowstate:0;if(rowstate<1)
return true;else
return false;}else{return false;}}
return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.bicon",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",row:"=",xsize:"@",name:"@",actname:"@",action:"&"},template:['<span>','<a class="wliu-btn{{xsize}} wliu-btn{{xsize}}-{{name}}" ','ng-click="action1(table.getRow(row))" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{actname?actname:name}}" popup-placement="down" ','title="{{table.navi.tooltip?\'\':actname?actname:name}}" ',common_scope,'>','</a>','</span>'].join(''),controller:function($scope){$scope.xsize=$scope.xsize?$scope.xsize:16;$scope.action1=function(theRow){switch($scope.name.toLowerCase()){case"detail":$scope.table.current=theRow.guid;break;case"save":$scope.table.saveRow(theRow);break;case"cancel":$scope.table.cancelRow(theRow);break;case"add":break;case"delete":$scope.table.deleteRow(theRow);break;}
$scope.action();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.btext",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",actname:"@",action:"&"},template:['<span>','<a href="javascript:void(0)" class="wliu-table-button" ','title="{{actname?actname:name}}" ','ng-click="action1(table.getRow(row))" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ',common_scope,'>','{{actname?actname:name.capital()}}','</a>','</span>'].join(''),controller:function($scope){$scope.action1=function(theRow){switch($scope.name.toLowerCase()){case"detail":$scope.table.current=theRow.guid;break;case"save":$scope.table.saveRow(theRow);break;case"cancel":$scope.table.cancelRow(theRow);break;case"add":break;case"delete":$scope.table.deleteRow(theRow);break;}
$scope.action();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.hgroup",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",actname:"@"},template:['<div class="dropdown" style="white-space:nowrap;">','<button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ','style="font-size:0.8em;" ','ng-class="{\'btn-info\':  rowstate()==0, \'btn-warning\':  rowstate()!=0}" ',common_scope,'>','{{actname}} ','<i class="fa fa-1 fa-caret-down"></i>','</button>','<ul class="dropdown-menu" style="white-space:nowrap;" ng-transclude>','</ul>','</div>'].join(''),controller:function($scope){$scope.rowstate=function(){var _state=0;for(var ridx in $scope.table.rows){_state=Math.max(_state,$scope.table.rows[ridx].rowstate);}
return _state;}},link:function(sc,el,attr){}}});wliu_table.directive("table.hlink",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",action:"&"},template:['<span>','<a href="javascript:void(0);" class="wliuCommon-table-btn16" ','title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','ng-click="action1()" ','ng-if="buttonState(name, rowstate())" ',common_scope,'>','<i class="wliu-btn16 wliu-btn16-{{name}}"></i> ','<span style="vertical-align:middle;">{{actname}}</span>','</a>','</span>'].join(''),controller:function($scope){$scope.action1=function(){switch($scope.name.toLowerCase()){case"save":$scope.table.saveRows();break;case"cancel":$scope.table.cancelRows();break;case"add":$scope.table.addRow(0,$scope.table.newRow());break;case"delete":break;}
$scope.action();};$scope.rowstate=function(){var _state=0;for(var ridx in $scope.table.rows){_state=Math.max(_state,$scope.table.rows[ridx].rowstate);}
return _state;};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.hicon",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",xsize:"@",name:"@",actname:"@",action:"&"},template:['<span>','<a class="wliu-btn{{xsize}} wliu-btn{{xsize}}-{{name}}" ','ng-click="action1()" ','ng-if="buttonState(name, rowstate())" ','popup-target="{{table.navi.tooltip?\'#\'+table.navi.tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{actname?actname:name}}" popup-placement="down" ','title="{{table.navi.tooltip?\'\':actname?actname:name}}" ',common_scope,'>','</a>','</span>'].join(''),controller:function($scope){$scope.xsize=$scope.xsize?$scope.xsize:16;$scope.action1=function(){switch($scope.name.toLowerCase()){case"save":$scope.table.saveRows();break;case"cancel":$scope.table.cancelRows();break;case"add":$scope.table.addRow();break;case"delete":break;}
$scope.action();};$scope.rowstate=function(){var _state=0;for(var ridx in $scope.table.rows){_state=Math.max(_state,$scope.table.rows[ridx].rowstate);}
return _state;};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.htext",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",action:"&"},template:['<span>','<a href="javascript:void(0)" class="wliu-table-hbutton" ','title="{{ actname?actname:name }}" ','ng-click="action1()" ','ng-if="buttonState(name, rowstate())" ',common_scope,'>','{{ actname?actname:name.capital() }}','</a>','</span>'].join(''),controller:function($scope){$scope.action1=function(){switch($scope.name.toLowerCase()){case"save":$scope.table.saveRows();break;case"cancel":$scope.table.cancelRows();break;case"add":$scope.table.addRow();break;case"delete":break;}
$scope.action();};$scope.rowstate=function(){var _state=0;for(var ridx in $scope.table.rows){_state=Math.max(_state,$scope.table.rows[ridx].rowstate);}
return _state;};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("table.popup",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"="},template:['<div scope="{{table.scope}}" id="wliu-table-error-popup" wliu-diag movable maskable>','<div wliu-diag-head>Message</div>','<div wliu-diag-body style="font-size:16px;">','<i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true" style="color:red;"></i> <span style="font-size:16px;">We can\'t process submitted data:</span>','<div style="margin-top:5px;" ng-bind-html="getHTML()"></div>','</div>','</div>'].join(''),controller:function($scope,$sce){$scope.getHTML=function(){if($scope.table.error.errorCode||($scope.table.getCurrent()&&$scope.table.getCurrent().error.errorCode)){var errMsg=$scope.table.error.errorMessage.nl2br1();if($scope.table.getCurrent())errMsg+=$scope.table.getCurrent().error.errorMessage.nl2br1();return $sce.trustAsHtml(errMsg);}else{return $sce.trustAsHtml("");}}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();$(el).unbind("ishow").bind("ishow",function(evt){if(parseInt(sc.table.error.errorCode)){$(el).trigger("show");}});});}}});wliu_table.directive("table.message",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"="},template:['<div ng-show="table.error.errorCode>0 || table.getCurrent().error.errorCode>0" class="card card-danger text-center z-depth-2 mb-1 white-text" style="padding:10px;">','<div wliu-diag-body style="font-size:16px;text-align:left;">','<i class="fa fa-exclamation-triangle fa-md" aria-hidden="true" style="color:white;"></i> <span style="font-size:16px;">We can\'t process submitted data:</span>','<div style="margin-top:5px;padding-left:20px;" class="white-text" ng-bind-html="getHTML()"></div>','</div>','</div>'].join(''),controller:function($scope,$sce){$scope.getHTML=function(){if($scope.table.error.errorCode||($scope.table.getCurrent()&&$scope.table.getCurrent().error.errorCode)){var errMsg=$scope.table.error.errorMessage.nl2br1();if($scope.table.getCurrent())errMsg+=$scope.table.getCurrent().error.errorMessage.nl2br1();return $sce.trustAsHtml(errMsg);}else{return $sce.trustAsHtml("");}}},link:function(sc,el,attr){}}});wliu_table.service("wliuTableService",function(){var self=this;self.btnActive={"0":{"detail":1,"save":0,"cancel":0,"reset":0,"add":1,"delete":1,"output":1,"print":1,"email":1},"1":{"detail":0,"save":1,"cancel":1,"reset":1,"add":0,"delete":0,"output":0,"print":0,"email":0},"2":{"detail":0,"save":1,"cancel":1,"reset":1,"add":0,"delete":0,"output":0,"print":0,"email":0},"3":{"detail":0,"save":1,"cancel":1,"reset":0,"add":0,"delete":0,"output":0,"print":0,"email":0}};self.buttonState=function(name,rowstate){return self.btnActive[rowstate]?(self.btnActive[rowstate][name]?true:false):false;}});
var filter_ng_class='ng-class="{\'wliuCommon-input-invalid\':table.filterMeta(name).errorCode}" ';var filter_ng_disabled='ng-disabled="table.filterMeta(name)==undefined" ';var filter_title='title="{{table.filterMeta(name).errorCode?table.filterMeta(name).errorMessage.nl2br():\'\'}}" ';wliu_table.directive("filter.label",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<label class="wliuCommon-label" ','title="{{table.filterMeta(name).coldesc?table.filterMeta(name).coldesc:table.filterMeta(name).colname?table.filterMeta(name).colname:name}}"','>','<span style="vertival-align:middle;">{{ table.filterMeta(name).colname?table.filterMeta(name).colname:name }}</span>','</label>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("filter.textbox",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="textbox" ','ng-keypress="keypress($event)" ','ng-model="table.filterMeta(name).value" ',filter_ng_class,filter_ng_disabled,filter_title,'/>'].join(''),controller:function($scope){$scope.keypress=function(ev){if(ev.keyCode==13){$scope.table.allRows();}}},link:function(sc,el,attr){}}});wliu_table.directive("filter.bind",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<select ','ng-model="table.colMeta(name).defval" ','ng-change="table.allRows()" ','ng-options="sObj.key as sObj.value for sObj in table.lists[table.filterMeta(name).list].list" ',filter_ng_class,filter_ng_disabled,filter_title,'>','<option value=""></option>','</select>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("filter.select",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",action:"&"},template:['<select ','ng-model="table.filterMeta(name).value" ','ng-options="sObj.key as sObj.value for sObj in table.lists[table.filterMeta(name).list].list" ',filter_ng_class,filter_ng_disabled,filter_title,'>','<option value=""></option>','</select>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("filter.bool",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",label:"@"},template:['<span class="checkbox" ',filter_ng_class,filter_title,'>','<input type="checkbox" id="filter_{{table.scope}}_{{name}}" ','ng-model="table.filterMeta(name).value" ng-value="1"  ',filter_ng_disabled,'/>','<label for="filter_{{table.scope}}_{{name}}" title="{{table.filterMeta(name).coldesc?table.filterMeta(name).coldesc:table.filterMeta(name).colname?table.filterMeta(name).colname:name}}">','{{ label.toLowerCase()=="default"?table.filterMeta(name).colname:label?label:"" }}','</label>','</span>',].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("filter.datetime",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span ',filter_title,'>','<input type="textbox" class="wliuCommon-datepicker" placeholder="yyyy-mm-dd" ','ng-model="table.filterMeta(name).value.date" ',filter_ng_class,filter_ng_disabled,'/>','<input type="textbox" class="wliuCommon-timepicker" placeholder="hh:mm" ','ng-model="table.filterMeta(name).value.time" ',filter_ng_class,filter_ng_disabled,'/>','</span>'].join(''),controller:function($scope){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value?$scope.table.filterMeta($scope.name).value:{};},link:function(sc,el,attr){$(function(){var today=new Date();$("input.wliuCommon-datepicker",el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});$("input.wliuCommon-timepicker",el).pickatime({twelvehour:false});});}}});wliu_table.directive("filter.datetimerange",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span>','<span style="vertical-align:middle">From: </span>','<span ',filter_title,'>','<input type="textbox" class="wliuCommon-datepicker" placeholder="yyyy-mm-dd" ','ng-model="table.filterMeta(name).value.from.date" ',filter_ng_class,filter_ng_disabled,'/>','<input type="textbox" class="wliuCommon-timepicker" placeholder="hh:mm" ','ng-model="table.filterMeta(name).value.from.time" ',filter_ng_class,filter_ng_disabled,'/>','</span>','<span style="vertical-align:middle"> To: </span>','<span ',filter_title,'>','<input type="textbox" class="wliuCommon-datepicker" scope="{{ table.scope }}" placeholder="yyyy-mm-dd" ','ng-model="table.filterMeta(name).value.to.date" ',filter_ng_class,filter_ng_disabled,'/>','<input type="textbox" class="wliuCommon-timepicker" scope="{{ table.scope }}" placeholder="hh:mm" ','ng-model="table.filterMeta(name).value.to.time" ',filter_ng_class,filter_ng_disabled,'/>','</span>','</span>'].join(''),controller:function($scope){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value?$scope.table.filterMeta($scope.name).value:{};$scope.table.filterMeta($scope.name).value.from=$scope.table.filterMeta($scope.name).value.from?$scope.table.filterMeta($scope.name).value.from:{};$scope.table.filterMeta($scope.name).value.to=$scope.table.filterMeta($scope.name).value.to?$scope.table.filterMeta($scope.name).value.to:{};},link:function(sc,el,attr){$(function(){var today=new Date();$("input.wliuCommon-datepicker",el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});$("input.wliuCommon-timepicker",el).pickatime({twelvehour:false});});}}});wliu_table.directive("filter.date",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="textbox" class="wliuCommon-datepicker" ','ng-model="table.filterMeta(name).value" ',filter_ng_class,filter_ng_disabled,filter_title,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){var today=new Date();$(el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});});}}});wliu_table.directive("filter.daterange",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span>','<span style="vertical-align:middle">From: </span>','<input type="textbox" class="wliuCommon-datepicker" ','ng-model="table.filterMeta(name).value.from" ',filter_ng_class,filter_ng_disabled,filter_title,'/>','<span style="vertical-align:middle"> To: </span>','<input type="textbox" class="wliuCommon-datepicker" ','ng-model="table.filterMeta(name).value.to" ',filter_ng_class,filter_ng_disabled,filter_title,'/>','</span>'].join(''),controller:function($scope){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value?$scope.table.filterMeta($scope.name).value:{};},link:function(sc,el,attr){$(function(){var today=new Date();$(".wliuCommon-datepicker",el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});});}}});wliu_table.directive("filter.time",function(){return{restrict:"E",replace:true,scope:{table:"=",rowsn:"@",name:"@"},template:['<input type="textbox" class="wliuCommon-timepicker" ','ng-model="table.filterMeta(name).value" ',filter_ng_class,filter_ng_disabled,filter_title,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){var today=new Date();$(el).pickatime({twelvehour:false});});}}});wliu_table.directive("filter.timerange",function(){return{restrict:"E",replace:true,scope:{table:"=",rowsn:"@",name:"@"},template:['<span>','<span style="vertical-align:middle">From: </span>','<input type="textbox" class="wliuCommon-timepicker" ','ng-model="table.filterMeta(name).value.from" ',filter_ng_class,filter_ng_disabled,filter_title,'/>','<span style="vertical-align:middle"> To: </span>','<input type="textbox" class="wliuCommon-timepicker" ','ng-model="table.filterMeta(name).value.to" ',filter_ng_class,filter_ng_disabled,filter_title,'/>','</span>'].join(''),controller:function($scope){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value?$scope.table.filterMeta($scope.name).value:{};},link:function(sc,el,attr){$(function(){var today=new Date();$(".wliuCommon-timepicker",el).pickatime({twelvehour:false});});}}});wliu_table.directive("filter.range",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span>','<span style="vertical-align:middle">From: </span>','<input type="textbox" ','style="width:80px;border-top:0px;border-left:0px;border-right:0px;border-radius:0px" ','ng-keypress="keypress($event)" ','ng-model="table.filterMeta(name).value.from" ',filter_ng_class,filter_ng_disabled,filter_title,'/>','<span style="vertical-align:middle"> To: </span>','<input type="textbox" ','style="width:80px;border-top:0px;border-left:0px;border-right:0px;border-radius:0px" ','ng-keypress="keypress($event)" ','ng-model="table.filterMeta(name).value.to" ',filter_ng_class,filter_ng_disabled,filter_title,'/>','</span>'].join(''),controller:function($scope){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value?$scope.table.filterMeta($scope.name).value:{};$scope.keypress=function(ev){if(ev.keyCode==13){$scope.table.allRows();}}},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkbox",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@"},template:['<div style="display:inline-block;border:0px solid #cccccc;" ',filter_ng_class,'>','<span ','ng-repeat="rdObj in table.lists[table.filterMeta(name).list].list">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.filterMeta(name).value[rdObj.key]" ng-value="rdObj.key"  ',filter_ng_disabled,'/>','<label for="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkbox1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(name)" ','wliu-diag  diag-target="{{targetid}}" diag-toggle="click" ','title="{{table.filterMeta(name).errorCode?table.filterMeta(name).errorMessage.nl2br():valueText()?valueText():\'\'}}" ',filter_ng_class,filter_ng_disabled,'/>'].join(''),controller:function($scope){$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys=$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys||{};$scope.change=function(name){$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys.guid="";$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys.name=name;}
$scope.valueText=function(){var text=$.map($scope.table.lists[$scope.table.filterMeta($scope.name).list].list,function(n){if($scope.table.filterMeta($scope.name)!=undefined){if($scope.table.filterMeta($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;}},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkdiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" class="wliu-diag" ','>','<a class="wliu-btn24 wliu-btn24-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn24 wliu-btn24-checkall" ng-click="checkall(table.lists[name].keys.name)" title="check all"  ng-show="bar==1"></a>','<a class="wliu-btn24 wliu-btn24-removeall" ng-click="removeall(table.lists[name].keys.name)" title="remove all"  ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.filterMeta( table.lists[name].keys.name ).value[rdObj.key]" ng-value="rdObj.key"  ','ng-disabled="table.filterMeta(table.lists[name].keys.name )==undefined" ','/>','<label for="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(name){$scope.table.filterMeta(name).value=$scope.table.filterMeta(name).value||{};for(var key in $scope.table.lists[$scope.name].list){$scope.table.filterMeta(name).value[$scope.table.lists[$scope.name].list[key].key]=true;}}
$scope.removeall=function(name){for(var key in $scope.table.lists[$scope.name].list){$scope.table.filterMeta(name).value={};}}
$scope.valueArr=function(name){var valueArr=$.map($scope.table.lists[$scope.name].list,function(n){if($scope.table.filterMeta(name)!=undefined){if($scope.table.filterMeta(name).value[n.key])
return n;else
return null;}else{return null;}});return valueArr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag({fade:false,movable:true,title:sc.title});});}}});wliu_table.directive("filter.checklist1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",bar:"@",height:"@",title:"@"},template:['<div class="col-md-12">','<a class="wliu-btn24 wliu-btn24-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn24 wliu-btn24-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-model-options="{ updateOn:\'default blur\', debounce:{default: 500, blur:0} }" ng-show="bar==1" />','<div class="wliu-diag-content" style="height:{{height?height:\'auto\'}};min-width:240px;overflow-y:auto;border:1px solid #cccccc;border-radius:5px;overflow-y:auto;">','<span ','ng-repeat="rdObj in table.lists[table.filterMeta(name).list].list|filter:search">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.filterMeta(name).value[rdObj.key]" ng-value="rdObj.key"  ',filter_ng_disabled,'/>','<label for="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.checkall=function(){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value||{};for(var key in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){$scope.table.filterMeta($scope.name).value[$scope.table.lists[$scope.table.filterMeta($scope.name).list].list[key].key]=true;}}
$scope.removeall=function(){for(var key in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){$scope.table.filterMeta($scope.name).value={};}}},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkbox2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(name)" ','wliu-diag  diag-target="{{targetid}}" diag-toggle="click" ','title="{{table.filterMeta(name).errorCode?table.filterMeta(name).errorMessage.nl2br():valueText()?valueText():\'\'}}" ',filter_ng_class,'/>'].join(''),controller:function($scope){$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys=$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys||{};$scope.change=function(name){$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys.guid="";$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){var dList=$scope.table.lists[$scope.table.filterMeta($scope.name).list].list[key].list;var text=$.map(dList,function(n){if($scope.table.filterMeta($scope.name)!=undefined){if($scope.table.filterMeta($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkdiag2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" class="wliu-diag container">','<a class="wliu-btn24 wliu-btn24-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="textbox" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn24 wliu-btn24-checkall" ng-click="checkall(table.lists[name].keys.name)" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn24 wliu-btn24-removeall" ng-click="removeall(table.lists[name].keys.name)" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.lists[name].list|filter:search"></span>{{search}}','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.filterMeta(table.lists[name].keys.name).value[tdObj.key]" ng-value="tdObj.key"  ','ng-disabled="table.filterMeta(table.lists[name].keys.name)==undefined" ','/>','<label for="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(name){$scope.table.filterMeta(name).value=$scope.table.filterMeta(name).value||{};for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;for(var dkey in dList){$scope.table.filterMeta(name).value[dList[dkey].key]=true;}}}
$scope.removeall=function(name){for(var key in $scope.table.lists[$scope.name].list){$scope.table.filterMeta(name).value={};}}
$scope.valueArr=function(name){var ret_arr=[];for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.filterMeta(name)!=undefined){if($scope.table.filterMeta(name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag({fade:false,movable:true,title:sc.title});});}}});wliu_table.directive("filter.checklist2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",height:"@",title:"@"},template:['<div class="col-md-12">','<a class="wliu-btn24 wliu-btn24-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn24 wliu-btn24-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<div class="wliu-diag-content"  style="height:{{height?height:\'auto\'}}; overflow-y:auto; border:1px solid #cccccc;border-radius:5px;overflow-y:auto;">','<span style="display:none;" ng-repeat-start="rdObj in table.lists[table.filterMeta(name).list].list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.filterMeta( name ).value[tdObj.key]" ng-value="tdObj.key"  ',filter_ng_disabled,'/>','<label for="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.checkall=function(){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value||{};for(var key in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){var dList=$scope.table.lists[$scope.table.filterMeta($scope.name).list].list[key].list;for(var dkey in dList){$scope.table.filterMeta($scope.name).value[dList[dkey].key]=true;}}}
$scope.removeall=function(){for(var key in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){$scope.table.filterMeta($scope.name).value={};}}},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkbox3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(name)" ','wliu-diag  diag-target="{{targetid}}" diag-toggle="click" ','title="{{table.filterMeta(name).errorCode?table.filterMeta(name).errorMessage.nl2br():valueText()?valueText():\'\'}}" ',filter_ng_class,'/>'].join(''),controller:function($scope){$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys=$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys||{};$scope.change=function(name){$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys.guid="";$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key1 in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){var list2=$scope.table.lists[$scope.table.filterMeta($scope.name).list].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var text=$.map(list3,function(n){if($scope.table.filterMeta($scope.name)!=undefined){if($scope.table.filterMeta($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("filter.checkdiag3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" class="wliu-diag container">','<a class="wliu-btn24 wliu-btn24-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',common_ng_options,'/>','<a class="wliu-btn24 wliu-btn24-checkall" ng-click="checkall(table.lists[name].keys.name)" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn24 wliu-btn24-removeall" ng-click="removeall(table.lists[name].keys.name)" title="remove all" ng-show="bar==1"></a>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.lists[name].list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.lists[name].list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<span style="white-space:nowrap;font-weight:700;">{{ rdObj.value }}</span>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.filterMeta(table.lists[name].keys.name).value[tdObj.key]" ng-value="tdObj.key"  ','ng-disabled="table.filterMeta(table.lists[name].keys.name)==undefined" ','/>','<label for="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.listFilter=$scope.listFilter||{};$scope.change=function(name){$scope.table.lists[$scope.name].keys.rowsn=-1;$scope.table.lists[$scope.name].keys.name=name;}
$scope.checkall=function(name){$scope.table.filterMeta(name).value=$scope.table.filterMeta(name).value||{};for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;for(var key3 in list3){$scope.table.filterMeta(name).value[list3[key3].key]=true;}}}}
$scope.removeall=function(name){for(var key in $scope.table.lists[$scope.name].list){$scope.table.filterMeta(name).value={};}}
$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(name){var ret_arr=[];for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.filterMeta(name)!=undefined){if($scope.table.filterMeta(name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag({fade:false,movable:true,title:sc.title});});}}});wliu_table.directive("filter.checklist3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",colnum1:"@",height:"@",bar:"@",title:"@"},template:['<div class="col-md-12">','<input type="text" class="wliuCommon-search" ng-model="search" ng-model-options="{ updateOn:\'default blur\', debounce:{default: 500, blur:0} }" ng-show="bar==1" />','<a class="wliu-btn24 wliu-btn24-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn24 wliu-btn24-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.lists[table.filterMeta(name).list].list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-diag-content" style="height:{{height?height:\'auto\'}}; overflow-y:auto; border:1px solid #cccccc;border-radius:5px;overflow-y:auto;">','<span style="display:none;" ng-repeat-start="bbObj in table.lists[table.filterMeta(name).list].list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" scope="{{ table.scope }}" id="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.filterMeta( name ).value[tdObj.key]" ng-value="tdObj.key"  ',filter_ng_disabled,'/>','<label for="filter_{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.search=$scope.search||"";$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys=$scope.table.lists[$scope.table.filterMeta($scope.name).list].keys||{};$scope.listFilter=$scope.listFilter||{};$scope.checkall=function(){$scope.table.filterMeta($scope.name).value=$scope.table.filterMeta($scope.name).value||{};for(var key1 in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){var list2=$scope.table.lists[$scope.table.filterMeta($scope.name).list].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;for(var key3 in list3){$scope.table.filterMeta($scope.name).value[list3[key3].key]=true;}}}}
$scope.removeall=function(){for(var key in $scope.table.lists[$scope.table.filterMeta($scope.name).list].list){$scope.table.filterMeta($scope.name).value={};}}
$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}},link:function(sc,el,attr){}}});wliu_table.directive("filter.radio",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@"},template:['<div ',filter_ng_class,filter_title,'>','<span ','ng-repeat="rdObj in table.lists[table.filterMeta(name).list].list">','<span class="radio">','<input type="radio" id="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.filterMeta(name).value" ng-value="rdObj.key"  ',filter_ng_disabled,'/>','<label scope="{{ table.scope }}" for="filter_{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});
var form_scope='scope="{{ table.scope }}" ';var form_ng_hide='ng-hide="table.relationHideCurrent(name)" ';var form_ng_change='ng-change="table.changeColCurrent(name)" ';var form_ng_class='ng-class="{ \'wliuCommon-input-invalid\': table.getColCurrent(name).errorCode }" ';var form_ng_disabled='ng-disabled="table.getColCurrent(name)==undefined" ';var form_ng_options='ng-model-options="{ updateOn:\'default blur\', debounce:{default: 500, blur:0} }" ';var form_ng=[form_scope,form_ng_change,form_ng_class,form_ng_disabled,form_ng_hide,form_ng_options].join('');var form_tooltip=['popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" ','popup-toggle="hover" ','popup-placement="down" ','popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage:table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" '].join('');wliu_table.directive("form.rowstatus",function(){return{restrict:"E",replace:true,scope:{table:"="},template:['<span class="wliu-text" style="vertical-align:middle;padding:0px;" ','popup-target="#table_rowno_tooltip" ','popup-toggle="hover" popup-placement="down" ','popup-body="{{ table.getCurrent().error.errorCode?table.getCurrent().error.errorMessage.nl2br():\'\' }}" ',form_scope,form_ng_disabled,'>','<span ng-if="table.getCurrent()==undefined" style="color:red;vertical-align:middle;">No record found!</span>','<span ng-if="table.getCurrent().error.errorCode" style="color:red;vertical-align:middle;font-size:16px;">Error : </span>','<a class="wliu-btn16 wliu-btn16-error-help" ','ng-if="table.getCurrent().error.errorCode" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-placement="down" ','popup-body="{{table.getCurrent().error.errorCode?table.getCurrent().error.errorMessage.nl2br():\'\'}}" ','>','</a>','<a class="wliu-btn16 wliu-btn16-rowstate-save"     ng-if="table.getCurrent().error.errorCode==0 && table.getCurrent().rowstate==1" style="padding-left:20px;vertical-align:middle;font-size:14px;" title="Changed"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-add"      ng-if="table.getCurrent().error.errorCode==0 && table.getCurrent().rowstate==2" style="padding-left:20px;vertical-align:middle;font-size:14px;" title="New"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-delete"   ng-if="table.getCurrent().error.errorCode==0 && table.getCurrent().rowstate==3" style="padding-left:20px;vertical-align:middle;font-size:14px;" title="Deleted"></a>','</span>'].join(''),controller:function($scope,$sce){$scope.table.error_tooltip="table_rowno_tooltip";$scope.getHTML=function(){if($scopt.table.getCurrent())
if($scopt.table.getCurrent().error.errorCode)
return $sce.trustAsHtml($scopt.table.getCurrent().error.errorMessage.nl2br());else
return $sce.trustAsHtml("");}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("form.ckeditor",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",hh:"@"},template:['<span ',form_ng_hide,'>','<a class="wliu-btn16 wliu-btn16-rowstate-error" ng-if="table.getColCurrent(name).errorCode"></a>','<span style="color:red; vertical-align:middle;" ng-if="table.getColCurrent(name).errorCode">Error: {{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage:""}}</span>','<textarea id="{{table.scope}}_{{name}}" ','ng-model="table.getColCurrent(name).value" ','title="{{ table.getCurrent().error.errorCode ? table.getCurrent().error.errorMessage : \'\' }}" ',form_scope,'>','</textarea>','</span>'].join(''),controller:function($scope){$scope.modelChange=function(){if($scope.table.getColCurrent($scope.name)){if(CKEDITOR.instances[$scope.table.scope+"_"+$scope.name])
if($scope.table.getColCurrent($scope.name).value!=CKEDITOR.instances[$scope.table.scope+"_"+$scope.name].getData())
CKEDITOR.instances[$scope.table.scope+"_"+$scope.name].setData($scope.table.getColCurrent($scope.name).value);}else{if(CKEDITOR.instances[$scope.table.scope+"_"+$scope.name])
CKEDITOR.instances[$scope.table.scope+"_"+$scope.name].setData("");}}
$scope.$watch("table.getColCurrent(name).value",$scope.modelChange);},link:function(sc,el,attr){$(function(){htmlObj_cn=CKEDITOR.replace(sc.table.scope+"_"+sc.name,{height:sc.hh});htmlObj_cn.on('change',function(evt){if(!sc.$root.$$phase){if(sc.table.getColCurrent(sc.name)){if(sc.table.getColCurrent(sc.name).value!=CKEDITOR.instances[sc.table.scope+"_"+sc.name].getData()){sc.table.getColCurrent(sc.name).value=CKEDITOR.instances[sc.table.scope+"_"+sc.name].getData();sc.table.changeColCurrent(sc.name);sc.$apply();}}}});});}}});wliu_table.directive("form.ckinline",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",hh:"@",minhh:"@"},template:['<span ',form_ng_hide,'>','<a class="wliu-btn16 wliu-btn16-rowstate-error" ng-if="table.getColCurrent(name).errorCode"></a>','<span style="color:red; vertical-align:middle;" ng-if="table.getColCurrent(name).errorCode">Error: {{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage:""}}</span>','<input type="hidden" ng-model="table.getColCurrent(name).value" />','<div scope="{{ table.scope }}" id="{{table.scope}}_{{name}}" contentEditable=true style="display:block;overflow:auto;min-height:{{minhh}}px;height:{{hh}}px;border:1px solid #cccccc;">','{{table.getColCurrent(name).value}}','</div>','</span>'].join(''),controller:function($scope){$scope.minhh=$scope.minhh?$scope.minhh:"80";$scope.initLoad=true;$scope.changeByCK=false;$scope.modelChange=function(){if($scope.changeByCK)return;if($scope.table.getColCurrent($scope.name)){if(CKEDITOR.instances[$scope.table.scope+"_"+$scope.name])
if($scope.table.getColCurrent($scope.name).value!=CKEDITOR.instances[$scope.table.scope+"_"+$scope.name].getData())
CKEDITOR.instances[$scope.table.scope+"_"+$scope.name].setData($scope.table.getColCurrent($scope.name).value);}else{if(CKEDITOR.instances[$scope.table.scope+"_"+$scope.name])
CKEDITOR.instances[$scope.table.scope+"_"+$scope.name].setData("");}}
$scope.$watch("table.getColCurrent(name).value",$scope.modelChange);},link:function(sc,el,attr){$(function(){CKEDITOR.disableAutoInline=true;htmlObj_cn=CKEDITOR.inline(sc.table.scope+"_"+sc.name);htmlObj_cn.on('change',function(evt){sc.changeByCK=true;if(!sc.$root.$$phase){if(sc.initLoad){sc.initLoad=false;return;}
if(sc.table.getColCurrent(sc.name)){if(sc.table.getColCurrent(sc.name).value!=CKEDITOR.instances[sc.table.scope+"_"+sc.name].getData()){sc.table.getColCurrent(sc.name).value=CKEDITOR.instances[sc.table.scope+"_"+sc.name].getData();sc.table.changeColCurrent(sc.name);sc.$apply();}}}
sc.changeByCK=false;});});}}});wliu_table.directive("form.fileupload",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",icon:"@",actname:"@",filename:"@"},template:['<div style="display:inline-block;">','<i ng-if="icon" class="wliu-btn24 wliu-btn24-file-upload" style="overflow:hidden;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Upload File" popup-placement="down" ','>','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" ',form_ng_disabled,'>','</i>','<div ng-if="!icon" class="btn btn-info" style="display:inline-block;position:relative;text-transform:none;overflow:hidden;height:20px;line-height:20px;padding:2px 8px;">','<a class="wliu-btn16 wliu-btn16-upload"></a>','<input type="file" onchange="angular.element(this).scope().selectFile(event);" style="display:block; position:absolute; opacity:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." />',' {{actname}}','</div>','<div style="display:inline-block;position:relative;margin-left:5px;font-size:12px;font-weight:bold;color:red;" ng-if="table.getColCurrent(name).errorCode">{{table.getColCurrent(name).errorMessage}}</div>','<div style="display:inline-block;margin-left:5px;" ng-if="table.getColCurrent(name).value && !table.getColCurrent(name).errorCode">','<a class="wliu-btn16 wliu-btn16-dispose" ng-click="deleteFile()" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Delete File" popup-placement="down" ','>','<a href="javascript:void(0)" style="vertical-align:middle;margin-left:2px;font-size:12px;text-decoration:underline;" ng-click="downloadFile()">{{theFile.full_name.subName(12)?theFile.full_name.subName(12):filename}}</a>','</div>','</div>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.theFile=new WLIU.FILE();$scope.selectFile=function(event){files=(event.srcElement||event.target).files;FFILE.allowSize=$scope.table.colMeta($scope.name).maxlength>0&&$scope.table.colMeta($scope.name).maxlength<=GCONFIG.max_upload_size?$scope.table.colMeta($scope.name).maxlength:GCONFIG.max_upload_size;FFILE.allowType=$scope.table.colMeta($scope.name).allowtype?$scope.table.colMeta($scope.name).allowtype:GCONFIG.file_allow_type;FFILE.fromFile($scope.theFile,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.table.getColCurrent($scope.name).value=fObj.data?fObj.data:"";$scope.table.changeColCurrent($scope.name);$scope.$apply();}});}
$scope.deleteFile=function(){$scope.table.getColCurrent($scope.name).value="";$scope.table.changeColCurrent($scope.name);}
$scope.downloadFile=function(){if($scope.table.getColCurrent($scope.name).value){FFILE.exportDataURL($scope.table.getColCurrent($scope.name).value);}}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("form.imgupload",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",ww:"@",hh:"@",vw:"@",vh:"@",view:"@",minww:"@",minhh:"@"},template:['<span>','<div style="position:relative;font-size:16px;font-weight:bold;color:red;" ng-if="table.getColCurrent(name).errorCode">{{table.getColCurrent(name).errorMessage}}</div>','<div style="display:inline-block;position:relative;min-width:{{minww}}px;min-height:{{minhh}}px;border:1px solid #cccccc;" class="wliu-background-1" >','<i class="wliu-btn24 wliu-btn24-image" style="position:absolute; margin-top:3px;margin-left:3px;opacity:0.8; overflow:hidden;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Upload Image" popup-placement="down" ','>','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" ',form_ng_disabled,'>','</i>','<a class="wliu-btn24 wliu-btn24-img-print" ng-click="printImage()" ng-if="table.getColCurrent(name).value" style="position:absolute; margin-top:3px;margin-left:30px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Print Image" popup-placement="down" ','>','</a>','<a class="wliu-btn24 wliu-btn24-dispose" ng-click="deleteImage()" ng-if="table.getColCurrent(name).value" style="position:absolute; right:0px; margin-top:3px;margin-right:3px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Delete Image" popup-placement="down" ','>','</a>','<span style="position:absolute;top:32px;left:3px;font-size:16px;font-weight:bold;color:#666666;" ng-if="!table.getColCurrent(name).value && !table.getColCurrent(name).errorCode">{{actname}}</span>','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{ww}}px;height:{{hh}}px;" class="img-content" targetid="{{imgviewerid}}">','<img class="img-responsive" width="100%" style="display:inline-block;" ng-click="clickImage()" onload="imageAutoFix(this)" ww={{ww}} hh={{hh}} src="{{table.getColCurrent(name).value?table.getColCurrent(name).value:\'\'}}" />','</div>','<div>','<input type="hidden" ','ng-model="table.getColCurrent(name).value" ',form_scope,form_ng_disabled,form_ng_change,'/>','</div>','<div id="{{imgviewerid}}" ng-if="view" wliu-diag maskable fade form-diag disposable>','<div wliu-diag-body style="text-align:center;">','<img class="img-responsive" width="100%" ww="{{vw}}" hh="{{vh}}" src="{{ imgobj.resize[view].data?imgobj.resize[view].data:\'\' }}" />','</div>','</div>','</span>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.imgobj=new WLIU.IMAGE({guid:guid()});$scope.imgviewerid=$scope.table.scope+"_"+$scope.name+"_"+$scope.imgobj.guid;$scope.imgviewer="#"+$scope.imgviewerid;$scope.minww=$scope.minww?$scope.minww:"100";$scope.minhh=$scope.minhh?$scope.minhh:"80";$scope.vw=$scope.vw?$scope.vw:"400";$scope.printImage=function(){if($scope.table.getColCurrent($scope.name).value){FFILE.exportDataURL($scope.table.getColCurrent($scope.name).value);}}
$scope.clickImage=function(){if($scope.view){if($scope.table.getColCurrent($scope.name).value){$scope.imgobj.resize.origin.data=$scope.table.getColCurrent($scope.name).value;FIMAGE.setView($scope.view);FIMAGE.resizeAll($scope.imgobj,function(){$scope.$apply();$($scope.imgviewer).trigger("ishow");});}else{$($scope.imgviewer).trigger("ishow");}}}
$scope.deleteImage=function(){$scope.table.getColCurrent($scope.name).value="";$scope.table.changeColCurrent($scope.name);}
$scope.selectFile=function(event){files=(event.srcElement||event.target).files;var view=$scope.table.colMeta($scope.name).view?$scope.table.colMeta($scope.name).view:"medium";FIMAGE.view=view;FIMAGE.allowSize=$scope.table.colMeta($scope.name).maxlength>0&&$scope.table.colMeta($scope.name).maxlength<=GCONFIG.max_upload_size?$scope.table.colMeta($scope.name).maxlength:GCONFIG.max_upload_size;FIMAGE.allowType=$scope.table.colMeta($scope.name).allowtype?$scope.table.colMeta($scope.name).allowtype:GCONFIG.image_allow_type;FIMAGE.fromFile($scope.imgobj,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.table.getColCurrent($scope.name).value=$scope.imgobj.resize[view].data?$scope.imgobj.resize[view].data:"";$scope.table.changeColCurrent($scope.name);$scope.$apply();}});}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}
$("body > div[form-diag][disposable]").each(function(img_idx,img_viewer){if($("div.img-content[targetid='"+$(img_viewer).attr("id")+"']").length<=0)$(img_viewer).remove();});$("body>"+sc.imgviewer).remove();$(sc.imgviewer).appendTo("body");$(sc.imgviewer).wliuDiag({});$(sc.imgviewer).unbind("ishow").bind("ishow",function(evt){$(sc.imgviewer).trigger("show");var click_flag=true;$("img",sc.imgviewer).unbind("load").bind("load",function(ev){var img=ev.target;var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=400;var c_hh=400;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;if(click_flag){click_flag=false;$(sc.imgviewer).trigger("show");}});});});}}});wliu_table.directive("form.imgupload1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",ww:"@",hh:"@",vw:"@",vh:"@",view:"@",minww:"@",minhh:"@"},template:['<span>','<div style="position:relative;font-size:16px;font-weight:bold;color:red;" ng-if="table.getColCurrent(name).errorCode">{{table.getColCurrent(name).errorMessage}}</div>','<div style="display:inline-block;position:relative;min-width:{{minww}}px;min-height:{{minhh}}px;border:1px solid #cccccc;"  class="wliu-background-1">','<i class="wliu-btn24 wliu-btn24-image" style="position:absolute; margin-top:3px;margin-left:3px;opacity:0.8; overflow:hidden;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Upload Image" popup-placement="down" ','>','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" ',form_ng_disabled,'/>','</i>','<a class="wliu-btn24 wliu-btn24-img-print" ng-click="printImage()" ng-if="table.getColCurrent(name).value" style="position:absolute; margin-top:3px;margin-left:30px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Print Image" popup-placement="down" ','>','</a>','<a class="wliu-btn24 wliu-btn24-dispose" ng-click="deleteImage()" ng-if="table.getColCurrent(name).value" style="position:absolute; right:0px; margin-top:3px;margin-right:3px;opacity:0.8;" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" popup-body="Delete Image" popup-placement="down" ','>','</a>','<span style="position:absolute;top:32px;left:3px;font-size:16px;font-weight:bold;color:#666666;" ng-if="!table.getColCurrent(name).value && !table.getColCurrent(name).errorCode">{{actname}}</span>','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{ww}}px;height:{{hh}}px;" class="img-content" targetid="{{imgeditorid}}">','<img class="img-responsive" width="100%" style="display:inline-block;" ng-click="clickImage()" onload="imageAutoFix(this)" ww={{ww}} hh="{{hh}}" style="cursor:pointer;" src="{{table.getColCurrent(name).value?table.getColCurrent(name).value:\'\'}}" />','</div>','</div>','<input type="hidden" title="" ','ng-model="table.getColCurrent(name).value" ',form_scope,form_ng_change,form_ng_disabled,'/>','</div>','<div id="{{imgeditorid}}" wliu-diag movable maskable fade form-diag disposable>','<div wliu-diag-head>Image Editor</div>','<div wliu-diag-body>','<div ng-if="imgobj.errorCode">','{{imgobj.errorMessage}}','</div>','<div ng-if="!imgobj.errorCode">','<div style="min-height:300px;">','<div class="wliu-image-frame" style="position:relative;">','<img class="img-responsive" width="100%" ww="{{vw}}" hh="{{vh}}" src="{{ imgobj.resize[view].data?imgobj.resize[view].data:\'\' }}" />','<div class="wliu-image-crop">','<div class="wliu-image-crop-h"></div>','<div class="wliu-image-crop-v"></div>','</div>','</div>','</div>','<div style="text-align:center;">','<button ng-click="reset()" title="Restore Image" class="btn btn-outline-success waves-effect pull-right {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-restore"></a>',' Reset</button>','<button ng-click="crop()" title="Crop Image" class="btn btn-outline-primary waves-effect pull-right {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-crop"></a>',' Crop</button>','<button ng-click="rotate()" title="Rotate Image" class="btn btn-outline-primary waves-effect pull-right {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-rotate-right"></a>',' Rotate</button>','<button ng-click="save()" title="Upload Image" class="btn btn-outline-secondary pull-left waves-effect {{ imgobj.resize[view].data?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-okey"></a>',' Save</button>','<button ng-click="dispose()" title="Cancel Upload" class="btn btn-outline-warning pull-left waves-effect" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-dispose"></a>',' Cancel</button>','</div>','</div>','</div>','</div>','</span>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.imgobj=new WLIU.IMAGE({guid:guid()});$scope.imgeditorid=$scope.table.scope+"_"+$scope.name+"_"+$scope.imgobj.guid;$scope.imgeditor="#"+$scope.imgeditorid;$scope.minww=$scope.minww?$scope.minww:"120";$scope.minhh=$scope.minhh?$scope.minhh:"80";$scope.vw=$scope.vw?$scope.vw:"400";$scope.view=$scope.table.colMeta($scope.name).view?$scope.table.colMeta($scope.name).view:"medium";$scope.clickImage=function(){if(!$scope.imgobj.resize.origin.data){$scope.imgobj.resize.origin.data=$scope.table.getColCurrent($scope.name).value;FIMAGE.setView($scope.view);FIMAGE.resizeAll($scope.imgobj,function(){$($scope.imgeditor).trigger("ishow");$scope.$apply();});}else{$($scope.imgeditor).trigger("ishow");FIMAGE.cropDivReset($("div.wliu-image-crop",$scope.imgeditor));}}
$scope.printImage=function(){if($scope.table.getColCurrent($scope.name).value){FFILE.exportDataURL($scope.table.getColCurrent($scope.name).value);}}
$scope.deleteImage=function(){$scope.table.getColCurrent($scope.name).value="";$scope.table.changeColCurrent($scope.name);}
$scope.selectFile=function(event){files=(event.srcElement||event.target).files;var view=$scope.table.colMeta($scope.name).view?$scope.table.colMeta($scope.name).view:"medium";FIMAGE.view=$scope.view;FIMAGE.allowSize=$scope.table.colMeta($scope.name).maxlength>0&&$scope.table.colMeta($scope.name).maxlength<=GCONFIG.max_upload_size?$scope.table.colMeta($scope.name).maxlength:GCONFIG.max_upload_size;FIMAGE.allowType=$scope.table.colMeta($scope.name).allowtype?$scope.table.colMeta($scope.name).allowtype:GCONFIG.image_allow_type;FIMAGE.fromFile($scope.imgobj,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.table.getColCurrent($scope.name).value=$scope.imgobj.resize[view].data?$scope.imgobj.resize[view].data:"";$scope.table.changeColCurrent($scope.name);$scope.$apply();$($scope.imgeditor).trigger("ishow");}});}
$scope.rotate=function(){FIMAGE.rotate($scope.imgobj,function(oImg){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}
$scope.crop=function(){FIMAGE.cropDiv($scope.imgobj,$("div.wliu-image-frame",$scope.imgeditor),$("div.wliu-image-crop",$scope.imgeditor),function(oImg){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}
$scope.reset=function(){FIMAGE.cropReset($scope.imgobj,function(oImg){$scope.$apply();$($scope.imgeditor).trigger("ishow");});}
$scope.save=function(){if($scope.imgobj.resize.origin.data!=""){$scope.table.setImageCurrent($scope.name,$scope.imgobj);$scope.table.changeColCurrent($scope.name);$scope.dispose();}}
$scope.dispose=function(){FIMAGE.cropDivReset($("div.wliu-image-crop",$scope.imgeditor));if(!$scope.$root.$$phase)$scope.$apply();$($scope.imgeditor).trigger("hide");}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}
var ratio=0;if(sc.ww&&sc.hh){var ratio=parseInt(sc.ww)/parseInt(sc.hh);}
$("body > div[form-diag][disposable]").each(function(img_idx,img_editor){if($("div.img-content[targetid='"+$(img_editor).attr("id")+"']").length<=0)$(img_editor).remove();});$("body>"+sc.imgeditor).remove();$(sc.imgeditor).appendTo("body");$(sc.imgeditor).wliuDiag({});$(sc.imgeditor).unbind("ishow").bind("ishow",function(evt){$(sc.imgeditor).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop",sc.imgeditor));var click_flag=true;$("img",sc.imgeditor).unbind("load").bind("load",function(ev){var img=ev.target;var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=400;var c_hh=400;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;if(click_flag){click_flag=false;$(sc.imgeditor).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop",sc.imgeditor));}});});$("div.wliu-image-crop",sc.imgeditor).draggable({containment:"parent"});$("div.wliu-image-crop",sc.imgeditor).resizable({aspectRatio:ratio,containment:"parent"});});}}});wliu_table.directive("form.esign",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",subject:"@",firstname:"@",lastname:"@",ww:"@",hh:"@",minww:"@",minhh:"@"},template:['<span>','<span style="font-size:16px;font-weight:bold;color:red;" ng-if="table.getColCurrent(name).errorCode">{{table.getColCurrent(name).errorMessage}}</span>','<br ng-if="table.getColCurrent(name).errorCode">','<div ng-click="showEsign()" style="display:inline-block;position:relative;min-width:{{minww}}px;min-height:{{minhh}}px;border:1px solid #cccccc;" class="wliu-background-11" >','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{minww}}px;height:{{minhh}}px;" class="esign-content" targetid="{{esignDivid}}">','<img class="img-responsive" width="100%" style="display:inline-block;" onload="imageAutoFix(this)" ww={{minww}} hh={{minhh}} src="{{table.getColCurrent(name).value?table.getColCurrent(name).value:\'\'}}" />','</div>','<input type="hidden" ','ng-model="table.getColCurrent(name).value" ',form_scope,form_ng_change,form_ng_disabled,'/>','</div>','<div id="{{esignDivid}}" wliu-diag maskable fade esign-diag disposable>','<div wliu-diag-body>','<span style="display:block;color:blue;">Please use mouse or touch screen pen to sign your name:</span>','<canvas id="can" width="{{ww}}" height={{hh}} style="border:2px solid #666666;"></canvas>','<div style="text-align:center;">','<button ng-click="save()" title="Save" class="btn btn-lg btn-outline-success waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Confirm','</button>','<button ng-click="cancel()" title="Be careful. clear signature" class="btn btn-lg btn-outline-danger waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Clear Signature','</button>','<button ng-click="close()" title="Close" class="btn btn-lg btn-outline-info waves-effect pull-right" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Close','</button>','</div>','</div>','</div>','<span>',].join(''),controller:function($scope){$scope.ww=$scope.ww?$scope.ww:640;$scope.hh=$scope.hh?$scope.hh:320;$scope.minww=$scope.minww?$scope.minww:"100";$scope.minhh=$scope.minhh?$scope.minhh:"50";$scope.esignDivid=$scope.table.scope+"_"+$scope.name+"_"+guid();$scope.esignDiv="#"+$scope.esignDivid;$scope.showEsign=function(){FIMAGE.image2Canvas($scope.esign_canvas.ctx,$scope.table.getColCurrent($scope.name).value);$($scope.esignDiv).trigger("show");}
$scope.save=function(){if($scope.esign_canvas.signed){$scope.esign_canvas.subject=$scope.subject;if($scope.table.getColCurrent($scope.firstname))
$scope.esign_canvas.firstName=$scope.table.getColCurrent($scope.firstname).value;if($scope.table.getColCurrent($scope.lastname))
$scope.esign_canvas.lastName=$scope.table.getColCurrent($scope.lastname).value;$scope.table.getColCurrent($scope.name).value=$scope.esign_canvas.getDataUrl();$scope.table.changeColCurrent($scope.name);$scope.esign_canvas.clear();}
$($scope.esignDiv).trigger("hide");}
$scope.cancel=function(){$scope.table.getColCurrent($scope.name).value="";$scope.table.changeColCurrent($scope.name);$scope.esign_canvas.clear();}
$scope.close=function(){$($scope.esignDiv).trigger("hide");}},link:function(sc,el,attr){$(function(){$("body > div[esign-diag][disposable]").each(function(el_idx,el_esign){if($("div.esign-content[targetid='"+$(el_esign).attr("id")+"']").length<=0)$(el_esign).remove();});$("body>"+sc.esignDiv).remove();$(sc.esignDiv).appendTo("body");$(sc.esignDiv).wliuDiag();sc.esign_canvas=new WLIU.CANVAS({canvas:$("canvas",sc.esignDiv).get(0)});sc.esign_canvas.init();});}}});wliu_table.directive("form.label",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<label class="wliuCommon-label" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}" ','title="{{table.colMeta(name).tooltip? \'\':table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}" ',form_scope,'>','<span style="vertival-align:middle;">{{ table.colMeta(name).colname?table.colMeta(name).colname:name }}</span>','<span style="vertival-align:middle;" class="wliuCommon-text-error" ng-if="table.colMeta(name).notnull"> <b>*</b></span>','</label>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.html",function($sce){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span ng-bind-html="getHTML()" ',form_scope,form_ng_hide,'>','</span>'].join(''),controller:function($scope,$sce){$scope.getHTML=function(){if($scope.table.getColCurrent($scope.name))
return $sce.trustAsHtml($scope.table.getColCurrent($scope.name).value);else
return $sce.trustAsHtml("");}},link:function(sc,el,attr){$(function(){});}}});wliu_table.directive("form.text",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span class="wliuCommon-label" ',form_scope,form_ng_hide,form_ng_class,form_tooltip,'>','{{ table.getColCurrent(name).value }}','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.hidden",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",name:"@"},template:['<span>','<input type="hidden" ','ng-model="table.getColCurrent(name).value" ',form_scope,form_ng_change,form_ng_disabled,'/>','</span>'].join(''),controller:function($scope){}}});wliu_table.directive("form.readonly",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",class:"@"},template:['<span>','<input type="textbox" ng-if="table.getCurrent().rowstate>=2" ','class="{{class}}" ','ng-model="table.getColCurrent(name).value" ',form_ng,form_tooltip,'/>','<span class="wliuCommon-label" ng-if="table.getCurrent().rowstate<2" ',form_scope,form_ng_hide,form_ng_class,form_tooltip,'>','{{ table.getColCurrent(name).value }}','</span>','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.textbox",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="textbox" ','ng-model="table.getColCurrent(name).value" ',form_ng,form_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.password",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="password" placeholder="Password" ','ng-model="table.getColCurrent(name).value" ',form_ng,form_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.passpair",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span style="display:inline-block;vertical-align:top;" ',form_ng_hide,'>','<input type="password" style="width:100%;" placeholder="Password" ','ng-model="table.getColCurrent(name).value.password" ','ng-change="passChange()" ',form_scope,form_ng_class,form_ng_options,form_ng_disabled,form_tooltip,'/>','<input type="password" style="width:100%;" placeholder="Confirm Password" ','ng-class="{ \'wliuCommon-input-invalid\': table.getColCurrent(name).value.password!=table.getColCurrent(name).value.confirm }" ','ng-model="table.getColCurrent(name).value.confirm" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).value.password!=table.getColCurrent(name).value.confirm ?\'Password not match!\':\'\'}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getColCurrent(name).value.password!=table.getColCurrent(name).value.confirm?\'Password not match!\':\'\'}}" ',form_scope,form_ng_disabled,form_ng_options,'/>','</span>'].join(''),controller:function($scope){$scope.passChange=function(){$scope.table.changeColCurrent($scope.name);}},link:function(sc,el,attr){}}});wliu_table.directive("form.textarea",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<textarea ','ng-model="table.getColCurrent(name).value" ',form_ng,form_tooltip,'>','</textarea>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.select",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<select ','ng-model="table.getColCurrent(name).value" ','ng-options="sObj.key as sObj.value for sObj in table.colList(name).list" ',form_scope,form_ng_class,form_ng_disabled,form_ng_change,form_ng_hide,form_tooltip,'>','<option value=""></option>','</select>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.relation",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",label:"@"},template:['<span class="checkbox" ',form_scope,form_ng_class,form_tooltip,'>','<input type="checkbox" id="{{table.scope}}_{{name}}_current" ','ng-model="table.getColCurrent(name).value" ng-value="1"  ','ng-change="table.relationChange(name); table.changeColCurrent(name);" ',form_scope,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current" title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}">','{{ label.toLowerCase()=="default"?table.colMeta(name).colname:label?label:"" }}','</label>','</span>',].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.bool",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",label:"@"},template:['<span class="checkbox" ',form_scope,form_ng_hide,form_ng_class,form_tooltip,'>','<input type="checkbox" id="{{table.scope}}_{{name}}_current" ','ng-model="table.getColCurrent(name).value" ng-value="1"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current" title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname?table.colMeta(name).colname:name}}">','{{ label.toLowerCase()=="default"?table.colMeta(name).colname:label?label:"" }}','</label>','</span>',].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.booltext",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",yes:"@",no:"@"},template:['<span ',form_ng_hide,'>','{{  table.getColCurrent(name)?( table.getColCurrent(name).value?yes?yes:\'Yes\':no?no:\'No\'):\'\' }}','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.datetime",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span ',form_ng_hide,form_tooltip,'>','<input type="textbox" class="wliuCommon-datepicker" placeholder="yyyy-mm-dd" ','ng-model="table.getColCurrent(name).value.date" ',form_scope,form_ng_class,form_ng_change,form_ng_disabled,'/>','<input type="textbox" class="wliuCommon-timepicker" placeholder="hh:mm" ','ng-model="table.getColCurrent(name).value.time" ',form_scope,form_ng_class,form_ng_change,form_ng_disabled,'/>','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){var today=new Date();$("input.wliuCommon-datepicker",el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,disable:[{from:[2016,9,1],to:[2016,9,10]},[2016,10,5]],selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});$("input.wliuCommon-timepicker",el).pickatime({twelvehour:false});});}}});wliu_table.directive("form.date",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="textbox" class="wliuCommon-datepicker" placeholder="yyyy-mm-dd" ','ng-model="table.getColCurrent(name).value" ',form_scope,form_ng_hide,form_ng_class,form_ng_change,form_ng_disabled,form_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){var today=new Date();$(el).pickadate({format:"yyyy-mm-dd",formatSubmit:"yyyy-mm-dd",closeOnSelect:true,disable:[{from:[2016,9,1],to:[2016,9,10]},[2016,10,5]],selectYears:100,min:new Date(today.getFullYear()-90,1,1),max:new Date(today.getFullYear()+10,12,31)});});}}});wliu_table.directive("form.time",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="textbox" class="wliuCommon-timepicker" placeholder="hh:mm" ','ng-model="table.getColCurrent(name).value" ',form_scope,form_ng_class,form_ng_change,form_ng_disabled,form_ng_hide,form_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){$(function(){$(el).pickatime({twelvehour:false});});}}});wliu_table.directive("form.intdate",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",name:"@",format:"@"},template:['<span class="wliuCommon-label" ',form_ng_hide,'>','{{ table.getColCurrent(name).value?(table.getColCurrent(name).value>0?(table.getColCurrent(name).value * 1000 | date : (format?format:"yyyy-MM-dd HH:mm") ):"") :"" }}','</span>'].join(''),controller:function($scope){}}});wliu_table.directive("form.checkbox",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@"},template:['<div class="wliuCommon-label" ',form_scope,form_ng_class,form_ng_hide,form_tooltip,'>','<span ng-repeat-start="rdObj in table.colList(name).list"></span>','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_current_{{rdObj.key}}" ','ng-model="table.getColCurrent(name).value[rdObj.key]" ng-value="rdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','<span ng-repeat-end></span>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.checkbox1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',form_scope,form_ng_hide,form_ng_class,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList($scope.name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList($scope.name).keys.name=name;}
$scope.valueText=function(){var text=$.map($scope.table.colList($scope.name).list,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("form.checktext1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var text=$.map($scope.table.colList($scope.name).list,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.checkdiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable ',form_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn24 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all"  ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all"  ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value[rdObj.key]" ng-value="rdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',form_scope,'/>','<label for="{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(guid,name){$scope.table.getColByGuid(guid,name).value=$scope.table.getColByGuid(guid,name).value||{};for(var key in $scope.table.lists[$scope.name].list){$scope.table.getColByGuid(guid,name).value[$scope.table.lists[$scope.name].list[key].key]=true;}
$scope.table.changeColByGuid(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getColByGuid(guid,name).value={};$scope.table.changeColByGuid(guid,name);}
$scope.valueArr=function(guid,name){var valueArr=$.map($scope.table.lists[$scope.name].list,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value[n.key])
return n;else
return null;}else{return null;}});return valueArr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("form.checklist1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px; padding:2px; overflow-y:auto; overflow:visible; text-align:left; min-width:240px;" ',form_scope,form_ng_class,form_ng_hide,form_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" style="z-index:99;" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.colList(name).list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_current_{{rdObj.key}}" ','ng-model="table.getColCurrent(name).value[rdObj.key]" ng-value="rdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.checkall=function(){$scope.table.getColCurrent($scope.name).value=$scope.table.getColCurrent($scope.name).value||{};for(var key in $scope.table.colList($scope.name).list){$scope.table.getColCurrent($scope.name).value[$scope.table.colList($scope.name).list[key].key]=true;}
$scope.table.changeColCurrent($scope.name);}
$scope.removeall=function(){$scope.table.getColCurrent($scope.name).value={};$scope.table.changeColCurrent($scope.name);}
$scope.valueArr=function(){var valueArr=$.map($scope.table.colList($scope.name).list,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n;else
return null;}else{return null;}});return valueArr;}},link:function(sc,el,attr){}}});wliu_table.directive("form.checkbox2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',form_scope,form_ng_hide,form_ng_class,'/>',].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}
return ret_text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("form.checktext2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>',].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.checkdiag2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable class="container" ',form_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.lists[name].list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value[tdObj.key]" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',form_scope,'/>','<label for="{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(guid,name){$scope.table.getColByGuid(guid,name).value=$scope.table.getColByGuid(guid,name).value||{};for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;for(var dkey in dList){$scope.table.getColByGuid(guid,name).value[dList[dkey].key]=true;}}
$scope.table.changeColByGuid(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getColByGuid(guid,name).value={};$scope.table.changeColByGuid(guid,name);}
$scope.valueArr=function(guid,name){var ret_arr=[];for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("form.checklist2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;overflow:visible;" ',form_scope,form_ng_hide,form_ng_class,form_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="min-height:250px;min-width:350px;font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.colList(name).list|filter:search"></span>','<div class="col-sm-{{colnum}}" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_current_{{tdObj.key}}" ','ng-model="table.getColCurrent(name).value[tdObj.key]" ng-value="tdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.checkall=function(){$scope.table.getColCurrent($scope.name).value=$scope.table.getColCurrent($scope.name).value||{};for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;for(var dkey in dList){$scope.table.getColCurrent($scope.name).value[dList[dkey].key]=true;}}
$scope.table.changeColCurrent($scope.name);}
$scope.removeall=function(){for(var key in $scope.table.colList($scope.name).list){$scope.table.getColCurrent($scope.name).value={};}
$scope.table.changeColCurrent($scope.name);}
$scope.valueArr=function(){var ret_arr=[];for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("form.checkbox3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist" value="{{ valueText() }}" ','ng-click="change(name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',form_scope,form_ng_class,form_ng_hide,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var text=$.map(list3,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}}
return ret_text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("form.checktext3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var text=$.map(list3,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text&&text?"; ":"")+text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.checkdiag3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag maskable movable class="container" ',form_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all" ng-show="bar==1"></a>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.lists[name].list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.lists[name].list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<span style="white-space:nowrap;font-weight:700;">{{ rdObj.value }}</span>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name ).value[tdObj.key]" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',form_scope,'/>','<label for="{{table.scope}}_{{name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.listFilter=$scope.listFilter||{};$scope.checkall=function(guid,name){$scope.table.getColByGuid(guid,name).value=$scope.table.getColByGuid(guid,name).value||{};for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;for(var key3 in list3){$scope.table.getColByGuid(guid,name).value[list3[key3].key]=true;}}}
$scope.table.changeColByGuid(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getColByGuid(guid,name).value={};$scope.table.changeColByGuid(guid,name);}
$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(guid,name){var ret_arr=[];for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("form.checklist3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;overflow:visible;" ',form_scope,form_ng_class,form_ng_hide,form_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}, ','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall()" title="check all" ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall()" title="remove all" ng-show="bar==1"></a>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.colList(name).list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="min-height:250px;min-width:350px;font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.colList(name).list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<span style="white-space:nowrap;font-weight:700;">{{ rdObj.value }}</span>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_current_{{tdObj.key}}" ','ng-model="table.getColCurrent(name).value[tdObj.key]" ng-value="tdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.listFilter=$scope.listFilter||{};$scope.checkall=function(){$scope.table.getColCurrent($scope.name).value=$scope.table.getColCurrent($scope.name).value||{};for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;for(var key3 in list3){$scope.table.getColCurrent($scope.name).value[list3[key3].key]=true;}}}
$scope.table.changeColCurrent($scope.name);}
$scope.removeall=function(){$scope.table.getColCurrent($scope.name).value={};$scope.table.changeColCurrent($scope.name);}
$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(){var ret_arr=[];for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value[n.key])
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radio",function(){return{restrict:"E",replace:true,scope:{table:"=",colnum:"@",name:"@"},template:['<div class="wliuCommon-label" ',form_scope,form_ng_class,form_ng_hide,form_tooltip,'>','<span ng-repeat="rdObj in table.colList(name).list">','<span class="radio">','<input type="radio" id="{{table.scope}}_{{name}}_current_{{rdObj.key}}" ','ng-model="table.getColCurrent(name).value" ng-value="rdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label scope="{{ table.scope }}" for="{{table.scope}}_{{name}}_current_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("form.radio1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input  type="text" readonly class="wliuCommon-radiolist" value="{{valueText()}}" ','ng-click="change(name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage:valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',form_scope,form_ng_class,form_ng_hide,'/>',].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var val=$scope.table.getColCurrent($scope.name)?$scope.table.getColCurrent($scope.name).value:"";var valueText=FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val})?FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radiotext1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>',].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var val=$scope.table.getColCurrent($scope.name)?$scope.table.getColCurrent($scope.name).value:"";var valueText=FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val})?FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radiodiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable ',form_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','{{ valueText(table.lists[name].keys.guid, table.lists[name].keys.name) }}','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{rdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="rdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',form_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.valueText=function(guid,name){var val=$scope.table.getColByGuid(guid,name)?$scope.table.getColByGuid(guid,name).value:"";var valueText=FCOLLECT.firstByKV($scope.table.lists[$scope.name].list,{key:val})?FCOLLECT.firstByKV($scope.table.lists[$scope.name].list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("form.radiolist1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px; padding:2px; overflow-y:auto; overflow:visible; text-align:left; min-width:240px;" ',form_scope,form_ng_hide,form_ng_class,form_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','{{ valueText() }}','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.colList(name).list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_current" id="{{table.scope}}_{{name}}_current_{{rdObj.key}}" ','ng-model="table.getColCurrent(name).value" ng-value="rdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.valueText=function(){var val=$scope.table.getColCurrent($scope.name)?$scope.table.getColCurrent($scope.name).value:"";var valueText=FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val})?FCOLLECT.firstByKV($scope.table.colList($scope.name).list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radio2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-radiolist" value="{{ valueText() }}" ','ng-click="change(name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage:valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',form_scope,form_ng_class,form_ng_hide,form_ng_disabled,'/>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radiotext2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radiodiag2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable class="container" ',form_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.lists[name].list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid( table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',form_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.valueArr=function(guid,name){var ret_arr=[];for(var key in $scope.table.lists[$scope.name].list){var dList=$scope.table.lists[$scope.name].list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("form.radiolist2",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;" ',form_scope,form_ng_class,form_ng_hide,form_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="rdObj in table.colList(name).list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_current" id="{{table.scope}}_{{name}}_current_{{tdObj.key}}" ','ng-model="table.getColCurrent(name).value" ng-value="tdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none;" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.valueArr=function(){var ret_arr=[];for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;var valueArr=$.map(dList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radio3",function(){return{restrict:"E",replace:true,scope:{table:"=",rowsn:"@",name:"@"},template:['<input type="text" readonly class="wliuCommon-radiolist" value="{{ valueText() }}" ','ng-click="change(name)" ','diag-target="#{{table.colMeta(name).targetid}}" diag-toggle="click" ','popup-target="{{table.colMeta(name).tooltip?\'#\'+table.colMeta(name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage.nl2br():valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ','title="{{table.colMeta(name).tooltip?\'\':table.getColCurrent(name).errorCode?table.getColCurrent(name).errorMessage:valueText()?valueText():table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}" ',form_scope,form_ng_hide,form_ng_class,form_ng_disabled,'/>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;for(var pkey in dList){var pList=dList[pkey].list;var text=$.map(pList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radiotext3",function(){return{restrict:"E",replace:true,scope:{table:"=",rowsn:"@",name:"@"},template:['<span class="wliuCommon-label">{{ valueText() }}</span>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.change=function(name){$scope.table.colList(name).keys.guid=$scope.table.getCurrent().guid;$scope.table.colList(name).keys.name=name;}
$scope.valueText=function(){var ret_text="";for(var key in $scope.table.colList($scope.name).list){var dList=$scope.table.colList($scope.name).list[key].list;for(var pkey in dList){var pList=dList[pkey].list;var text=$.map(pList,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=text;}}
return ret_text;}},link:function(sc,el,attr){}}});wliu_table.directive("form.radiodiag3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable class="container" ',form_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.lists[name].list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.lists[name].list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" ','ng-model="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="tdObj.key"  ','ng-change="table.changeColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getColByGuid(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',form_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.listFilter=$scope.listFilter||{};$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(guid,name){var ret_arr=[];for(var key1 in $scope.table.lists[$scope.name].list){var list2=$scope.table.lists[$scope.name].list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getColByGuid(guid,name)!=undefined){if($scope.table.getColByGuid(guid,name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("form.radiolist3",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",colnum:"@",colnum1:"@",bar:"@",title:"@"},template:['<div class="col-md-12" style="border:1px dotted #666666;border-radius:5px;overflow-y:auto;" ',form_scope,form_ng_hide,form_ng_class,form_tooltip,'>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr()">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',form_ng_options,'/>','<select class="wliuCommon-filter" ','ng-model="listFilter.key" ','ng-options="sObj.key as sObj.value for sObj in table.colList(name).list" ',' ng-show="bar==1">','<option value=""></option>','</select>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-content" style="font-size:14px;">','<span style="display:none;" ng-repeat-start="bbObj in table.colList(name).list|filter:getListFilter()"></span>','<span style="display:none;" ng-repeat-start="rdObj in bbObj.list|filter:search"></span>','<div class="col-md-{{colnum}} col-sm-{{colnum}} col-xs-12" ng-if="rdObj.list && rdObj.list.length>0">','<ul>','<li title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','<b>{{ rdObj.value }}</b>','<ul style="border-top:1px solid #cccccc;">','<span ng-repeat="tdObj in rdObj.list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_current" id="{{table.scope}}_{{name}}_current_{{tdObj.key}}" ','ng-model="table.getColCurrent(name).value" ng-value="tdObj.key"  ',form_scope,form_ng_change,form_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_current_{{tdObj.key}}" title="{{tdObj.desc?tdObj.desc:tdObj.value}}">','{{ tdObj.value }}','</label>','</span>','<br ng-if="colnum1>0?(($index+1)%colnum1)==0:false" />','</span>','</ul>','</li>','</ul>','</div>','<span style="display:none" ng-repeat-end></span>','<span style="display:none" ng-repeat-end></span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.colList($scope.name).keys=$scope.table.colList($scope.name).keys||{};$scope.listFilter=$scope.listFilter||{};$scope.getListFilter=function(){$scope.listFilter.key=$scope.listFilter.key?$scope.listFilter.key:"";return $scope.listFilter;}
$scope.valueArr=function(){var ret_arr=[];for(var key1 in $scope.table.colList($scope.name).list){var list2=$scope.table.colList($scope.name).list[key1].list;for(var key2 in list2){var list3=list2[key2].list;var valueArr=$.map(list3,function(n){if($scope.table.getColCurrent($scope.name)!=undefined){if($scope.table.getColCurrent($scope.name).value==n.key)
return n;else
return null;}else{return null;}});$.merge(ret_arr,valueArr);}}
return ret_arr;}},link:function(sc,el,attr){}}});wliu_table.directive("form.button",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",action:"&",outline:"@",icon:"@",before:"&",after:"&",success:"&"},template:['<div style="display:inline-block;position:relative;background-color:#ffffff;vertical-align:middle;">','<button class="btn btn{{ outline==1?\'-outline\':\'\'}}-{{ buttonStyle() }} waves-effect" ','style="min-width:60px;{{!buttonState(name, table.getCurrent().rowstate)?\'border-color:grey;\':\'\'}}" ','title="{{table.colMeta(name).coldesc?table.colMeta(name).coldesc:table.colMeta(name).colname}}"','ng-disabled="!buttonState(name, table.getCurrent().rowstate)" ','ng-click="action1(table.getCurrent())" ','popup-target="{{table.tooltip?\'#\'+table.tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" ','popup-body="{{table.getCurrent().error.errorCode?table.getCurrent().error.errorMessage.nl2br():\'\'}}"','title="{{ table.tooltip?\'\':(table.getCurrent().error.errorCode? table.getCurrent().error.errorMessage : \'\') }}"',form_scope,'>','<span style="vertical-align:middle;{{!buttonState(name, table.getCurrent().rowstate)?\'color:#666666;\':\'\'}}">','{{actname}}','</span>','</button>','</div>'].join(''),controller:function($scope,wliuTableService){$scope.buttonStyle=function(){var ret_val="primary";switch($scope.name){case"add":ret_val="default";break;case"save":ret_val="secondary";break;case"cancel":ret_val="warning";case"reset":ret_val="warning";break;case"delete":ret_val="danger";break;}
return ret_val;}
$scope.action1=function(theRow){$scope.before();switch($scope.name.toLowerCase()){case"add":$scope.table.addRow();break;case"save":$scope.table.saveRow(theRow,{ajaxSuccess:function(){$scope.success();}});break;case"cancel":$scope.table.cancelRow(theRow);break;case"reset":switch(theRow.rowstate){case 0:break;case 1:$scope.table.cancelRow(theRow);break;case 2:$scope.table.resetRow(theRow);break;case 3:$scope.table.cancelRow(theRow);break;}
break;case"delete":$scope.table.deleteRow(theRow);break;}
$scope.action();$scope.after();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;if(name=="add"){if(parseInt($scope.table.rights[name])){rowstate=rowstate?rowstate:0;if(rowstate<1)
return true;else
return false;}else{return false;}}
return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("form.linkbutton",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",name:"@",actname:"@",action:"&",icon:"@",before:"&",after:"&"},template:['<span>','<a href="javascript:void(0)" ','class="btn btn-{{ buttonStyle() }} waves-effect {{!buttonState(name, table.getCurrent().rowstate)?\'grey\':\'\'}} {{!buttonState(name, table.getCurrent().rowstate)?\'disabled\':\'\'}}" ','style="min-width:60px;" ','ng-click="action1(table.getCurrent())" ','popup-target="{{table.tooltip?\'#\'+table.tooltip:\'\'}}" popup-toggle="hover" popup-placement="down" ','popup-body="{{table.getCurrent().error.errorCode?table.getCurrent().error.errorMessage.nl2br():\'\'}}"','title="{{ table.tooltip?\'\':(table.getCurrent().error.errorCode? table.getCurrent().error.errorMessage : \'\') }}"',form_scope,'>','{{actname?actname:name.capital()}}','</a>','</span>'].join(''),controller:function($scope){$scope.buttonStyle=function(){var ret_val="primary";switch($scope.name){case"add":ret_val="default";break;case"save":ret_val="secondary";break;case"cancel":ret_val="warning";break;case"delete":ret_val="danger";break;}
return ret_val;}
$scope.action1=function(theRow){$scope.before();switch($scope.name.toLowerCase()){case"add":$scope.table.addRow();break;case"save":$scope.table.saveRow(theRow);break;case"cancel":switch(theRow.rowstate){case 0:break;case 1:$scope.table.cancelRow(theRow);break;case 2:$scope.table.resetRow(theRow);break;case 3:$scope.table.cancelRow(theRow);break;}
break;case"delete":$scope.table.deleteRow(theRow);break;}
$scope.action();$scope.after();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;if(name=="add"){if(parseInt($scope.table.rights[name])){rowstate=rowstate?rowstate:0;if(rowstate<1)
return true;else
return false;}else{return false;}}
return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});
var tree_scope='scope="{{ table.scope }}" ';var tree_ng_change='ng-change="table.changeCol(row, name)" ';var tree_ng_class='ng-class="{ \'wliuCommon-input-invalid\': table.getCol(row, name).errorCode }" ';var tree_ng_disabled='ng-disabled="table.getCol(row, name)==undefined" ';var tree_ng_options='ng-model-options="{ updateOn:\'default blur\', debounce:{default: 500, blur:0} }" ';var tree_ng=[tree_scope,tree_ng_change,tree_ng_class,tree_ng_disabled,tree_ng_options].join('');var tree_tooltip=['popup-target="{{table.colMeta(row, name).tooltip?\'#\'+table.colMeta(row, name).tooltip:\'\'}}" ','popup-toggle="hover" ','popup-placement="down" ','popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname}}" ','title="{{table.colMeta(row, name).tooltip?\'\':table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage:table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname}}" '].join('');wliu_table.directive("table.tree",function(){return{restrict:"E",replace:true,scope:{table:"=",label:"@"},template:['<ul id="tree_{{table.treeid}}" wliu-tree root>','<li nodes open><s folder></s>','{{table.title?table.title:\'Tree Root\'}} ','<tree.hicon table="table" rows="table.rows" row="root" name="add" actname="Add" ng-if="table.rootadd"></tree.hicon>','<ul wliu-tree>','<li nodes open ng-repeat="prow in table.rows" name="meme">','<tree.rowstatus table="table" row="prow"></tree.rowstatus>','<span style="display:none;" ng-repeat-start="pcol in prow.cols"></span>','<span ng-switch on="pcol.coltype">','<tree.text     ng-switch-when="text"       table="table" row="prow" name="{{pcol.name}}"></tree.text>','<tree.custom   ng-switch-when="custom"     table="table" row="prow" name="{{pcol.name}}"></tree.custom>','<tree.label   ng-switch-when="textbox" ng-if="label" table="table" row="prow" name="{{pcol.name}}"></tree.label>','<tree.textbox ng-switch-when="textbox" table="table" row="prow" name="{{pcol.name}}" class="{{table.colMeta(prow, pcol.name).css}}" style="{{table.colMeta(prow, pcol.name).style}}"></tree.textbox>','<tree.label ng-switch-when="select"    ng-if="label"   table="table" row="prow" name="{{pcol.name}}"></tree.label>','<tree.select ng-switch-when="select"   table="table"   row="prow" name="{{pcol.name}}" class="{{table.colMeta(prow, pcol.name).css}}" style="{{table.colMeta(prow, pcol.name).style}}"></tree.select>','<tree.label ng-switch-when="bool"      ng-if="label"   table="table" row="prow" name="{{pcol.name}}"></tree.label>','<tree.bool ng-switch-when="bool"       table="table"   row="prow" name="{{pcol.name}}"></tree.bool>','<tree.label ng-switch-when="checkbox1" ng-if="label"       table="table" row="prow" name="{{pcol.name}}"></tree.label>','<tree.checkbox1 ng-switch-when="checkbox1" table="table"   row="prow" name="{{pcol.name}}" class="{{table.colMeta(prow, pcol.name).css}}" style="{{table.colMeta(prow, pcol.name).style}}"></tree.checkbox1>','<tree.label   ng-switch-when="radio1"   ng-if="label"      table="table" row="prow" name="{{pcol.name}}"></tree.label>','<tree.radio1  ng-switch-when="radio1"   table="table"      row="prow" name="{{pcol.name}}" class="{{table.colMeta(prow, pcol.name).css}}" style="{{table.colMeta(prow, pcol.name).style}}"></tree.radio1>','</span>','<span style="display:none;" ng-repeat-end></span>','<tree.bicon ng-repeat="actname in table.pbutton" table="table" rows="table.rows" row="prow" name="{{actname}}"></tree.bicon>','<ul wliu-tree>','<li ng-if="table.cols.m" nodes open ng-repeat="srow in prow.rows">','<tree.rowstatus table="table" row="srow"></tree.rowstatus>','<span style="display:none;" ng-repeat-start="scol in srow.cols"></span>','<span ng-switch on="scol.coltype">','<tree.text     ng-switch-when="text"       table="table" row="srow" name="{{scol.name}}"></tree.text>','<tree.custom   ng-switch-when="custom"     table="table" row="srow" name="{{scol.name}}"></tree.custom>','<tree.label ng-switch-when="textbox"    ng-if="label"  table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.textbox ng-switch-when="textbox" table="table" row="srow" name="{{scol.name}}" class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.textbox>','<tree.label ng-switch-when="select"     ng-if="label"  table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.select ng-switch-when="select"   table="table" row="srow" name="{{scol.name}}"   class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.select>','<tree.label ng-switch-when="bool"       ng-if="label"  table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.bool ng-switch-when="bool"       table="table" row="srow" name="{{scol.name}}"></tree.bool>','<tree.label ng-switch-when="checkbox1"  ng-if="label"  table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.checkbox1 ng-switch-when="checkbox1" table="table" row="srow" name="{{scol.name}}"   class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.checkbox1>','<tree.label   ng-switch-when="radio1"   ng-if="label"  table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.radio1  ng-switch-when="radio1"  table="table" row="srow" name="{{scol.name}}"   class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.radio1>','</span>','<span style="display:none;" ng-repeat-end></span>','<tree.bicon ng-repeat="actname in table.sbutton" table="table" rows="prow.rows" row="srow" name="{{actname}}"></tree.bicon>','<ul wliu-tree>','<li node ng-repeat="mrow in srow.rows">','<tree.rowstatus table="table" row="mrow"></tree.rowstatus>','<span style="display:none;" ng-repeat-start="mcol in mrow.cols"></span>','<span ng-switch on="mcol.coltype">','<tree.text ng-switch-when="text"       table="table"   row="mrow" name="{{mcol.name}}"></tree.text>','<tree.custom ng-switch-when="custom"   table="table"   row="mrow" name="{{mcol.name}}"></tree.custom>','<tree.label ng-switch-when="textbox"    ng-if="label"  table="table" row="mrow" name="{{mcol.name}}"></tree.label>','<tree.textbox ng-switch-when="textbox" table="table"   row="mrow" name="{{mcol.name}}" class="{{table.colMeta(mrow, mcol.name).css}}" style="{{table.colMeta(mrow, mcol.name).style}}"></tree.textbox>','<tree.label ng-switch-when="select"     ng-if="label"  table="table" row="mrow" name="{{mcol.name}}"></tree.label>','<tree.select ng-switch-when="select"   table="table"   row="mrow" name="{{mcol.name}}" class="{{table.colMeta(mrow, mcol.name).css}}" style="{{table.colMeta(mrow, mcol.name).style}}"></tree.select>','<tree.label ng-switch-when="bool"      ng-if="label"   table="table" row="mrow" name="{{mcol.name}}"></tree.label>','<tree.bool ng-switch-when="bool"       table="table"   row="mrow" name="{{mcol.name}}"></tree.bool>','<tree.label ng-switch-when="checkbox1" ng-if="label"       table="table" row="mrow" name="{{mcol.name}}"></tree.label>','<tree.checkbox1 ng-switch-when="checkbox1" table="table"   row="mrow" name="{{mcol.name}}" class="{{table.colMeta(mrow, mcol.name).css}}" style="{{table.colMeta(mrow, mcol.name).style}}"></tree.checkbox1>','<tree.label   ng-switch-when="radio1"  ng-if="label"   table="table" row="mrow" name="{{mcol.name}}"></tree.label>','<tree.radio1  ng-switch-when="radio1"  table="table"   row="mrow" name="{{mcol.name}}" class="{{table.colMeta(mrow, mcol.name).css}}" style="{{table.colMeta(mrow, mcol.name).style}}"></tree.radio1>','</span>','<span style="display:none;" ng-repeat-end></span>','<tree.bicon ng-repeat="actname in table.mbutton" table="table" rows="srow.rows" row="mrow" name="{{actname}}"></tree.bicon>','</li>','</ul>','</li>','<li ng-if="!table.cols.m" node ng-repeat="srow in prow.rows">','<tree.rowstatus table="table" row="srow"></tree.rowstatus>','<span style="display:none;" ng-repeat-start="scol in srow.cols"></span>','<span ng-switch on="scol.coltype">','<tree.text     ng-switch-when="text"       table="table" row="srow" name="{{scol.name}}"></tree.text>','<tree.custom   ng-switch-when="custom"     table="table" row="srow" name="{{scol.name}}"></tree.custom>','<tree.label ng-switch-when="textbox"   ng-if="label"   table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.textbox ng-switch-when="textbox" table="table"   row="srow" name="{{scol.name}}" class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.textbox>','<tree.label ng-switch-when="select"    ng-if="label"   table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.select ng-switch-when="select"   table="table"   row="srow" name="{{scol.name}}" class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.select>','<tree.label ng-switch-when="bool"      ng-if="label"   table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.bool ng-switch-when="bool"       table="table"   row="srow" name="{{scol.name}}"></tree.bool>','<tree.label ng-switch-when="checkbox1" ng-if="label"   table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.checkbox1 ng-switch-when="checkbox1" table="table" row="srow" name="{{scol.name}}" class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.checkbox1>','<tree.label   ng-switch-when="radio1"  ng-if="label"   table="table" row="srow" name="{{scol.name}}"></tree.label>','<tree.radio1  ng-switch-when="radio1"  table="table"   row="srow" name="{{scol.name}}" class="{{table.colMeta(srow, scol.name).css}}" style="{{table.colMeta(srow, scol.name).style}}"></tree.radio1>','</span>','<span style="display:none;" ng-repeat-end></span>','<tree.bicon ng-repeat="actname in table.sbutton" table="table" rows="prow.rows" row="srow" name="{{actname}}"></tree.bicon>','</li>','</ul>','</li>','</ul>','</li>','</ul>'].join(''),controller:function($scope){},link:function(sc,el,attr){var count=0;$(function(){$(document).off("click.treebutton",$("a[treebutton][name='add']",el)).on("click.treebutton","a[treebutton][name='add']",function(evt){$(this).parents("li").removeAttr("close").addAttr("open");});})}}});wliu_table.directive("tree.rowstatus",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"="},template:['<s folder style="vertical-align:middle;padding:0px;" ','ng-disabled="row==undefined" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" ','popup-body="{{row.error.errorCode?row.error.errorMessage.nl2br():\'\'}}"',tree_scope,'>','<a class="wliu-btn16 wliu-btn16-error-help"  ng-if="row.error.errorCode" style="background-color:#ffffff;" ','>','</a>','<a class="wliu-btn16 wliu-btn16-rowstate-save"     ng-if="row.error.errorCode==0 && row.rowstate==1"   title="Changed" style="background-color:#ffffff;"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-add"      ng-if="row.error.errorCode==0 && row.rowstate==2"   title="New" style="background-color:#ffffff;"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-delete"   ng-if="row.error.errorCode==0 && row.rowstate==3"   title="Deleted" style="background-color:#ffffff;"></a>','</s>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("tree.label",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<label class="wliuCommon-label" ','popup-target="{{table.colMeta(row, name).tooltip?\'#\'+table.colMeta(row, name).tooltip:\'\'}}" popup-placement="down" popup-toggle="hover" popup-body="{{table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname?table.colMeta(row, name).colname:name}}" ','title="{{table.colMeta(row, name).tooltip? \'\':table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname?table.colMeta(row, name).colname:name}}" ',tree_scope,'>','<span style="vertival-align:middle;" class="wliuCommon-text-error" ng-if="table.colMeta(row, name).notnull">*</span>','<span style="vertival-align:middle;">{{ table.colMeta(row, name).colname?table.colMeta(row, name).colname:name }}</span>','</label>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("tree.text",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span class="wliu-text" ',tree_scope,tree_ng_class,tree_tooltip,'>','{{ table.getCol(row, name).value }}','</span>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("tree.custom",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span ng-bind-html="valueText()"></span>'].join(''),controller:function($scope,$sce){$scope.valueText=function(){var ret_val=FCOM.colreplace($scope.table.colMeta($scope.row,$scope.name).colname,$scope.row.cols);return $sce.trustAsHtml(ret_val);}},link:function(sc,el,attr){}}});wliu_table.directive("tree.hidden",function(){return{restrict:"E",replace:true,transclude:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="hidden" ','ng-model="table.getCol(row, name).value" ',tree_scope,tree_ng_disabled,tree_ng_change,'/>'].join(''),controller:function($scope){}}});wliu_table.directive("tree.textbox",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="textbox" ','ng-model="table.getCol(row, name).value" ',tree_ng,tree_tooltip,'/>'].join(''),controller:function($scope){},link:function(sc,el,attr){}}});wliu_table.directive("tree.select",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<select ','ng-model="table.getCol(row, name).value" ','ng-options="sObj.key as sObj.value for sObj in table.colList(row, name).list" ',tree_scope,tree_ng_change,tree_ng_class,tree_ng_disabled,tree_tooltip,'>','<option value=""></option>','</select>'].join(''),controller:function($scope){$scope.css=$scope.css?$scope.css:"input-short";},link:function(sc,el,attr){}}});wliu_table.directive("tree.bool",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@",label:"@"},template:['<span class="checkbox" ',tree_scope,tree_ng_class,tree_tooltip,'>','<input type="checkbox" id="{{table.scope}}_{{name}}_{{row.guid}}" ','ng-click="checkme()" ','ng-model="table.getCol(row, name).value" ng-value="1"  ',tree_scope,tree_ng_change,tree_ng_disabled,'/>','<label for="{{table.scope}}_{{name}}_{{row.guid}}" title="{{table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname?table.colMeta(row, name).colname:name}}">','{{ label.toLowerCase()=="default"?table.colMeta(row, name).colname:label?label:"" }}','</label>','</span>',].join(''),controller:function($scope){},link:function(sc,el,attr){$(el).unbind("click.treeBool").bind("click.treeBool",function(){sc.table.getCol(sc.row,sc.name).value=!sc.table.getCol(sc.row,sc.name).value;sc.table.changeCol(sc.row,sc.name);sc.$apply();})}}});wliu_table.directive("tree.checkbox1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input type="text" readonly class="wliuCommon-checklist input-long" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(row, name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname}}" ','ng-disabled="table.getCol(row, name)==undefined || table.refid<=0" ',tree_scope,tree_ng_class,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.row,$scope.name).keys=$scope.table.colList($scope.row,$scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(row,name).keys.guid=row;$scope.table.colList(row,name).keys.name=name;}
$scope.valueText=function(){var text=$.map($scope.table.colList($scope.row,$scope.name).list,function(n){if($scope.table.getCol($scope.row,$scope.name)!=undefined){if($scope.table.getCol($scope.row,$scope.name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("tree.checkdiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag maskable ',tree_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','<li ng-repeat="vObj in valueArr(table.lists[name].keys.guid, table.lists[name].keys.name)">','{{ vObj.value }}','</li>','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',tree_ng_options,'/>','<a class="wliu-btn16 wliu-btn16-checkall" ng-click="checkall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="check all"  ng-show="bar==1"></a>','<a class="wliu-btn16 wliu-btn16-removeall" ng-click="removeall(table.lists[name].keys.guid, table.lists[name].keys.name)" title="remove all"  ng-show="bar==1"></a>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="checkbox">','<input type="checkbox" id="{{table.scope}}_{{name}}_{{rdObj.key}}" ','ng-model="table.getCol(table.lists[name].keys.guid, table.lists[name].keys.name).value[rdObj.key]" ng-value="rdObj.key"  ','ng-change="table.changeCol(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getCol(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',tree_scope,'/>','<label for="{{table.scope}}_{{name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.checkall=function(guid,name){$scope.table.getCol(guid,name).value=$scope.table.getCol(guid,name).value||{};for(var key in $scope.table.lists[$scope.name].list){$scope.table.getCol(guid,name).value[$scope.table.lists[$scope.name].list[key].key]=true;}
$scope.table.changeCol(guid,name);}
$scope.removeall=function(guid,name){$scope.table.getCol(guid,name).value={};$scope.table.changeCol(guid,name);}
$scope.valueArr=function(guid,name){var valueArr=$.map($scope.table.lists[$scope.name].list,function(n){if($scope.table.getCol(guid,name)!=undefined){if($scope.table.getCol(guid,name).value[n.key])
return n;else
return null;}else{return null;}});return valueArr;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("tree.radio1",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<input  type="text" readonly class="wliuCommon-radiolist" value="{{ valueText() }}" ','ng-click="change(row, name)" ','diag-target="#{{table.colMeta(row, name).targetid}}" diag-toggle="click" ','popup-target="#table_rowno_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{table.getCol(row, name).errorCode?table.getCol(row, name).errorMessage.nl2br():valueText()?valueText():table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname}}" ',tree_scope,tree_ng_class,tree_ng_disabled,'/>'].join(''),controller:function($scope){$scope.table.error_tooltip="table_rowno_tooltip";$scope.table.colList($scope.row,$scope.name).keys=$scope.table.colList($scope.row,$scope.name).keys||{};$scope.change=function(row,name){$scope.table.colList(row,name).keys.guid=row;$scope.table.colList(row,name).keys.name=name;}
$scope.valueText=function(){var val=$scope.table.getCol($scope.row,$scope.name)?$scope.table.getCol($scope.row,$scope.name).value:"";var valText=FCOLLECT.firstByKV($scope.table.colList($scope.row,$scope.name).list,{key:val})?FCOLLECT.firstByKV($scope.table.colList($scope.row,$scope.name).list,{key:val}).value:"";return valText;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("tree.radiodiag1",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",colnum:"@",bar:"@",title:"@"},template:['<div id="{{targetid}}" wliu-diag maskable ',tree_scope,'>','<div wliu-diag-head>{{ title }}</div>','<a class="wliu-btn16 wliu-btn16-selectlist" ng-show="bar==1">','<div class="wliu-selectlist">','<div class="wliu-selectlist-title info-color text-center">SELECTED</div>','<ul class="wliu-selectlist-content">','{{ valueText(table.lists[name].keys.guid, table.lists[name].keys.name) }}','</ul>','</div>','</a>','<input type="text" class="wliuCommon-search" ng-model="search" ng-show="bar==1" ',tree_ng_options,'/>','<div class="wliu-underline" ng-show="bar==1"></div>','<div class="wliu-diag-body" style="font-size:14px;">','<span ','ng-repeat="rdObj in table.lists[name].list|filter:search">','<span class="radio">','<input type="radio" name="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}" id="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{rdObj.key}}" ','ng-model="table.getCol(table.lists[name].keys.guid, table.lists[name].keys.name).value" ng-value="rdObj.key"  ','ng-change="table.changeCol(table.lists[name].keys.guid, table.lists[name].keys.name)" ','ng-disabled="table.getCol(table.lists[name].keys.guid, table.lists[name].keys.name)==undefined" ',tree_scope,'/>','<label for="{{table.scope}}_{{name}}_{{table.lists[name].keys.name}}_{{rdObj.key}}" title="{{rdObj.desc?rdObj.desc:rdObj.value}}">','{{ rdObj.value }}','</label>','</span>','<br ng-if="colnum>0?(($index+1)%colnum)==0:false" />','</span>','</div>','</div>'].join(''),controller:function($scope){$scope.table.lists[$scope.name].keys=$scope.table.lists[$scope.name].keys||{};$scope.valueText=function(guid,name){var val=$scope.table.getCol(guid,name)?$scope.table.getCol(guid,name).value:"";var valueText=FCOLLECT.firstByKV($scope.table.lists[$scope.name].list,{key:val})?FCOLLECT.firstByKV($scope.table.lists[$scope.name].list,{key:val}).value:"";return valueText;}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_table.directive("tree.hicon",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",rows:"=",row:"@",name:"@",xsize:"@",actname:"@",action:"&"},template:['<span>','<a name="{{name}}" treebutton class="wliu-btn{{xsize}} wliu-btn{{xsize}}-{{name}}" ','ng-click="action1()" ','popup-target="{{table.tooltip?\'#\'+table.tooltip:\'\'}}" popup-toggle="hover" popup-body="{{actname?actname:name}}" popup-placement="down" ','title="{{table.tooltip?\'\':actname?actname:name}}" ',tree_scope,'>','</a>','</span>'].join(''),controller:function($scope){$scope.xsize=$scope.xsize?$scope.xsize:16;$scope.action1=function(){switch($scope.name.toLowerCase()){case"add":$scope.table.addChild($scope.rows,$scope.row);break;}
$scope.action();};},link:function(sc,el,attr){}}});wliu_table.directive("tree.blink",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",rows:"=",row:"=",name:"@",actname:"@",action:"&"},template:['<span>','<a name="{{name}}" treebutton href="javascript:void(0);" class="wliuCommon-table-btn16" ','ng-click="action1()" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ','title="{{table.colMeta(row, name).coldesc?table.colMeta(row, name).coldesc:table.colMeta(row, name).colname}}"',tree_scope,'>','<i class="wliu-btn16 wliu-btn16-{{name}}"></i> ','<span style="vertical-align:middle;">{{actname}}</span>','</a>','</span>'].join(''),controller:function($scope){$scope.action1=function(){switch($scope.name.toLowerCase()){case"detail":$scope.table.current=theRow;break;case"save":$scope.table.saveRow($scope.rows,$scope.row);break;case"cancel":$scope.table.cancelRow($scope.rows,$scope.row);break;case"add":$scope.table.addChild($scope.rows,$scope.row);break;case"delete":$scope.table.deleteRow($scope.rows,$scope.row);break;}
$scope.action();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;var rightDelete=$scope.name.toLowerCase()=="delete"?($scope.row.rows?($scope.row.rows.length>0?false:true):true):true;right=right&&rightDelete;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("tree.bicon",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",rows:"=",row:"=",name:"@",xsize:"@",actname:"@",action:"&"},template:['<span>','<a name="{{name}}" treebutton class="wliu-btn{{xsize}} wliu-btn{{xsize}}-{{name}}" ','ng-click="action1()" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ','popup-target="{{table.tooltip?\'#\'+table.tooltip:\'\'}}" popup-toggle="hover" popup-body="{{actname?actname:name}}" popup-placement="down" ','title="{{table.tooltip?\'\':actname?actname:name}}" ',tree_scope,'>','</a>','</span>'].join(''),controller:function($scope){$scope.xsize=$scope.xsize?$scope.xsize:16;$scope.action1=function(){switch($scope.name.toLowerCase()){case"detail":$scope.table.current=$scope.row;break;case"save":$scope.table.saveRow($scope.rows,$scope.row);break;case"cancel":$scope.table.cancelRow($scope.rows,$scope.row);break;case"add":$scope.table.addChild($scope.rows,$scope.row);break;case"delete":$scope.table.deleteRow($scope.rows,$scope.row);break;}
$scope.action();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;var rightDelete=$scope.name.toLowerCase()=="delete"?($scope.row.rows?($scope.row.rows.length>0?false:true):true):true;right=right&&rightDelete;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});wliu_table.directive("tree.btext",function(wliuTableService){return{restrict:"E",replace:true,scope:{table:"=",rows:"=",row:"=",name:"@",actname:"@",action:"&"},template:['<span>','<a name="{{name}}" treebutton href="javascript:void(0)" class="wliu-table-button" ','title="{{actname?actname:name}}" ','ng-click="action1()" ','ng-if="buttonState(name, table.getRow(row).rowstate)" ',tree_scope,'>','{{actname?actname:name.capital()}}','</a>','</span>'].join(''),controller:function($scope){$scope.action1=function(){switch($scope.name.toLowerCase()){case"detail":$scope.table.current=$scope.row;break;case"save":$scope.table.saveRow($scope.rows,$scope.row);break;case"cancel":$scope.table.cancelRow($scope.rows,$scope.row);break;case"add":$scope.table.addChild($scope.rows,$scope.row);break;case"delete":$scope.table.deleteRow($scope.rows,$scope.row);break;}
$scope.action();};$scope.buttonState=function(name,rowstate){var right=$scope.table.rights?(parseInt($scope.table.rights[name])?true:false):false;var rightDelete=$scope.name.toLowerCase()=="delete"?($scope.row.rows?($scope.row.rows.length>0?false:true):true):true;right=right&&rightDelete;return wliuTableService.buttonState(name,rowstate)&&right;};},link:function(sc,el,attr){}}});
wliu_table.directive("table.list",function(){return{restrict:"E",replace:true,scope:{table:"=",action:"&",searchcol:"@",displaycol:"@",title:"@"},template:['<div class="card z-depth-1" style="min-width:260px;">','<div class="card-header info-color text-center white-text">','<strong>{{title}}</strong>','</div>','<div class="card-header text-left" style="padding:0px; background-color:#ffffff;">','<div style="padding:2px 5px;">','<filter.textbox class="input-medium" table="table" name="list_search" ng-if="searchcol"></filter.textbox>','<table.order table="table" class="pull-right" xsize="24"><table.order>','</div>','<div style="padding:0px 5px;">','<table.navi1 table="table"></table.navi1>','</div>','</div>','<div class="card-block" style="padding:0px;">','<ul class="list-group wliuCommon-list-group">','<li class="list-group-item" ','ng-class="{\'active\': table.getCurrent().guid==row.guid}" ','ng-repeat="row in table.rows" ','ng-click="action1(row)" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" ','popup-body="{{ tipText(row) }}"','>','<a class="wliu-btn16 wliu-btn16-error-help"  ng-if="row.error.errorCode" ','popup-target="#table_rowno_tooltip" popup-toggle="hover" ','popup-body="{{row.error.errorCode?row.error.errorMessage.nl2br():\'\'}}" ','>','</a>','<span ng-if="row.error.errorCode==0 && row.rowstate==0" title="Series Number">{{ ($index-0) + 1 }}.</span>','<a class="wliu-btn16 wliu-btn16-rowstate-save"     ng-if="row.error.errorCode==0 && row.rowstate==1"   title="Changed"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-add"      ng-if="row.error.errorCode==0 && row.rowstate==2"   title="New"></a>','<a class="wliu-btn16 wliu-btn16-rowstate-delete"   ng-if="row.error.errorCode==0 && row.rowstate==3"   title="Deleted"></a>','&nbsp;','<span style="display:none;" ng-repeat-start="pcol in table.cols"></span>','<span ng-switch on="pcol.coltype">','<table.custom   ng-switch-when="custom"  table="table" row="row" name="{{pcol.name}}"></tree.table>','</span>','<span style="display:none;" ng-repeat-end></span>','</li>','</ul>','</div>','</div>'].join(''),controller:function($scope,$sce){$scope.table.error_tooltip="table_rowno_tooltip";if($scope.searchcol){var filter1=new WLIU.FILTER({name:"list_search",coltype:"textbox",cols:$scope.searchcol,colname:"list_search",coldesc:"Search"});var filters=[];filters.push(filter1);$scope.table.filters=filters;}
$scope.keypress=function(ev){if(ev.keyCode==13){$scope.table.getRows();}}
$scope.action1=function(theRow){$scope.table.current=theRow.guid;$scope.action();}
$scope.tipText=function(row){var ret_val='';if($scope.displaycol&&$scope.displaycol!=""){var cols=$scope.displaycol.split(",");for(var cidx in cols){var colName=(''+cols[cidx]).trim();var colMeta=$scope.table.colMeta(colName);if(colMeta){ret_val+='<label title="'+colMeta.coldesc+'" style="font-size:0.8em;color:blue;">'+colMeta.colname+'</label>: ';switch((""+colMeta.coltype).toLowerCase()){case"select":ret_val+='<span style="color:#000000;">';ret_val+=$scope.selectText(row,colName);ret_val+='</span>';ret_val+="<br>";break;case"checkbox":case"checkbox1":ret_val+='<span style="color:#000000;">';ret_val+=$scope.checkText1(row,colName);ret_val+='</span>';ret_val+="<br>";break;case"checkbox2":ret_val+='<span style="color:#000000;">';ret_val+=$scope.checkText2(row,colName);ret_val+='</span>';ret_val+="<br>";break;case"checkbox3":ret_val+='<span style="color:#000000;">';ret_val+=$scope.checkText3(row,colName);ret_val+='</span>';ret_val+="<br>";break;case"datetime":ret_val+='<span style="color:#000000;">';ret_val+=FCOM.array2Datetime($scope.table.getCol(row,colName).value);ret_val+='</span>';ret_val+="<br>";break;case"intdate":ret_val+='<span style="color:#000000;">';if($scope.table.getCol(row,colName).value)ret_val+=(''+$scope.table.getCol(row,colName).value).intDate();ret_val+='</span>';ret_val+="<br>";break;case"password":case"passpair":ret_val+='';ret_val+="<br>";break;case"bool":ret_val+='<span style="color:#000000;">';ret_val+=$scope.table.getCol(row,colName).value?"Yes":"No";ret_val+='</span>';ret_val+="<br>";break;default:ret_val+='<span style="color:#000000;">';ret_val+=$scope.table.getCol(row,colName).value;ret_val+='</span>';ret_val+="<br>";break;}}}}
return ret_val;}
$scope.selectText=function(row,name){var text=$.map($scope.table.colList(name).list,function(n){if($scope.table.getCol(row,name)!=undefined){if($scope.table.getCol(row,name).value==n.key)
return n.value;else
return null;}else{return null;}}).join("; ");return text;},$scope.checkText1=function(row,name){var text=$.map($scope.table.colList(name).list,function(n){if($scope.table.getCol(row,name)!=undefined){if($scope.table.getCol(row,name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");return text;},$scope.checkText2=function(row,name){var ret_text="";for(var key in $scope.table.colList(name).list){var dList=$scope.table.colList(name).list[key].list;var text=$.map(dList,function(n){if($scope.table.getCol(row,name)!=undefined){if($scope.table.getCol(row,name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text?";":"")+text;}
return ret_text;}
$scope.checkText3=function(row,name){var ret_text="";for(var key in $scope.table.colList(name).list){var dList=$scope.table.colList(name).list[key].list;for(var pkey in dList){var pList=dList[pkey].list;var text=$.map(pList,function(n){if($scope.table.getCol(row,name)!=undefined){if($scope.table.getCol(row,name).value[n.key])
return n.value;else
return null;}else{return null;}}).join("; ");ret_text+=(ret_text?";":"")+text;}}
return ret_text;}},link:function(sc,el,attr){$(function(){if($("#"+sc.table.error_tooltip).length<=0){$("body").append('<div id="'+sc.table.error_tooltip+'" wliu-popup></div>');$("#"+sc.table.error_tooltip).wliuPopup();}})}}});wliu_table.directive("table.custom",function(){return{restrict:"E",replace:true,scope:{table:"=",row:"=",name:"@"},template:['<span ng-bind-html="valueText()"></span>'].join(''),controller:function($scope,$sce){$scope.valueText=function(){var ret_val=FCOM.colreplace($scope.table.colMeta($scope.name).colname,$scope.row.cols);return $sce.trustAsHtml(ret_val);}},link:function(sc,el,attr){}}});
var wliu_file=angular.module("wliuFile",[]);wliu_file.directive("file.list",function(){return{restrict:"E",replace:true,scope:{filelist:"=",tooltip:"@",actname:"@",namemax:"@"},template:['<ul style="display:inline-block;">','<li ng-repeat="fileObj in filelist.rows" style="text-decoration:underline;">','<a href="{{fileObj.url?fileObj.url:\'javascript:void(0);\'}}" target="_blank" ','popup-target="#filelist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="{{ fileObj.title_en.join(\'<br>\',fileObj.detail_en).join(\'<br>\',fileObj.title_cn).join(\'<br>\',fileObj.detail_cn)  }}" ','>','{{$index+1}}. {{(\'\'+fileObj.full_name).subName(namemax)}}','</a>','<a class="wliu-btn16 wliu-btn16-notes" ng-click="textFile(fileObj)" style="margin-left:10px;" ','popup-target="#filelist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="File Comments" ','>','</a>','<a class="wliu-btn16 wliu-btn16-img-print" ng-click="printFile(fileObj)" style="margin-left:2px;" ','popup-target="#filelist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="Print File" ','>','<a class="wliu-btn16 wliu-btn16-dispose" ng-click="deleteFile(fileObj)" style="margin-left:2px;" ','popup-target="#filelist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="Delete File" ','>','</a>','</li>','<li ng-if="filelist.rows.length<filelist.config.max_length && filelist.config.mode==\'edit\'">','<div class="btn btn-default" style="display:inline-block;position:relative;text-transform:none;overflow:hidden;height:20px;line-height:20px;padding:2px 8px;">','<a class="wliu-btn16 wliu-btn16-upload"></a>','<input type="file" onchange="angular.element(this).scope().selectFile(event);" style="display:block; position:absolute; opacity:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." />',' {{actname}}','</div>','</li>','</ul>'].join(''),controller:function($scope){$scope.filelist.common_tooltip="filelist_common_tooltip";$scope.actname=$scope.actname?$scope.actname:"Upload File";$scope.namemax=$scope.namemax?parseInt($scope.namemax):20;$scope.selectFile=function(event){var newFile=new WLIU.FILE({guid:guid(),token:guid()});files=(event.srcElement||event.target).files;FFILE.allowSize=parseInt($scope.filelist.config.max_size)>0&&($scope.filelist.config.max_size)<GCONFIG.max_upload_size?parseInt($scope.filelist.config.max_size):GCONFIG.max_upload_size;FFILE.allowType=(""+$scope.filelist.config.allow_type).toArray(",","upper");FFILE.fromFile(newFile,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.filelist.addFile(newFile);}});}
$scope.printFile=function(fileObj){$scope.filelist.printFile(fileObj,function(oFile){if(oFile.data)FFILE.exportDataURL(oFile.data);});}
$scope.textFile=function(fileObj){$scope.filelist.current=fileObj.guid;fileObj.status=fileObj.status=="1"?true:false;$($scope.filelist.infoEditor).trigger("show");}
$scope.deleteFile=function(fileObj){if(confirm("Delete file, are you sure?"))
$scope.filelist.deleteFile(fileObj);}},link:function(sc,el,attr){$(function(){if($("#"+sc.filelist.common_tooltip).length<=0){$("body").append('<div id="'+sc.filelist.common_tooltip+'" wliu-popup></div>');$("#"+sc.filelist.common_tooltip).wliuPopup();}});}}});wliu_file.directive("file.info",function(){return{restrict:"E",replace:true,scope:{filelist:"=",targetid:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable fade>','<div wliu-diag-head>Image Information</div>','<div wliu-diag-body style="width:400px;">','<div class="row">','<div class="col-md-3 text-md-right">','<span class="wliuCommon-label">Title-EN</span>','</div>','<div class="col-md-9 text-md-left">','<input type="textbox" ng-model="filelist.getCurrent().title_en" style="width:100%;" />','</div>','</div>','<div class="row">','<div class="col-md-3 text-md-right">','<span class="wliuCommon-label">Title-CN</span>','</div>','<div class="col-md-9 text-md-left">','<input type="textbox" ng-model="filelist.getCurrent().title_cn" style="width:100%;" />','</div>','</div>','<div class="row">','<div class="col-md-12">','<span class="wliuCommon-label">Description-EN</span><br>','<textarea ng-model="filelist.getCurrent().detail_en" style="width:100%;height:60px;"></textarea>','</div>','</div>','<div class="row">','<div class="col-md-12">','<span class="wliuCommon-label">Description-CN</span><br>','<textarea ng-model="filelist.getCurrent().detail_cn" style="width:100%;height:60px;"></textarea>','</div>','</div>','<div class="row">','<div class="col-md-2 text-md-right">','<span class="wliuCommon-label">Status</span>','</div>','<div class="col-md-4 text-md-left">','<input id="{{targetid}}_status" type="checkbox" ng-model="filelist.getCurrent().status" /> <label for="{{targetid}}_status">Active</label>','</div>','<div class="col-md-4 text-md-right">','<span class="wliuCommon-label">Order</span>','</div>','<div class="col-md-2 text-md-left">','<input type="textbox" ng-model="filelist.getCurrent().orderno" style="width:100%;text-align:center;" />','</div>','</div>','<center>','<button ng-click="save()" title="Save" class="btn btn-lg btn-outline-success waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Save','</button>','<button ng-click="close()" title="Close" class="btn btn-lg btn-outline-info waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Close','</button>','</center>','</div>','</div>'].join(''),controller:function($scope){$scope.save=function(rowidx){$scope.filelist.saveText($scope.filelist.getCurrent(),{ajaxAfter:function(ofiles){$("#"+$scope.targetid).trigger("hide");}});}
$scope.close=function(){$("#"+$scope.targetid).trigger("hide");}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_file.directive("file.error",function(){return{restrict:"E",replace:true,scope:{filelist:"=",targetid:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable>','<div wliu-diag-head>Message</div>','<div wliu-diag-body style="font-size:16px;">','<i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true" style="color:red;"></i> <span style="font-size:16px;">We can\'t process submitted data:</span>','<div style="margin-top:12px;" ng-bind-html="getHTML()"></div>','</div>','</div>'].join(''),controller:function($scope,$sce){$scope.getHTML=function(){if($scope.filelist.errorCode)
return $sce.trustAsHtml($scope.filelist.errorMessage.nl2br());else
return $sce.trustAsHtml("");}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();$(el).unbind("errorshow").bind("errorshow",function(evt){if(parseInt(sc.filelist.errorCode)){$(el).trigger("show");}});});}}});
var wliu_image=angular.module("wliuImage",[]);wliu_image.directive("image.pickup",function(){return{restrict:"E",replace:true,scope:{imgobj:"=",targetid:"@",xsize:"@",actname:"@",action:"&",tooltip:"@",view:"@"},template:['<div class="btn btn-outline-info waves-effect" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;">','<a class="wliu-btn{{xsize}} wliu-btn{{xsize}}-upload"></a>','<input type="file" onchange="angular.element(this).scope().selectFile(event);" style="display:block; position:absolute; opacity:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." />',' {{actname}}</div>'].join(''),controller:function($scope){$scope.xsize=$scope.xsize?$scope.xsize:16;$scope.view=$scope.view?$scope.view:"medium";$scope.selectFile=function(event){files=(event.srcElement||event.target).files;FIMAGE.view=$scope.view;FIMAGE.fromFile($scope.imgobj,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.action();if($scope.targetid)$("#"+$scope.targetid).trigger("show");$scope.$apply();}});}},link:function(sc,el,attr){}}});wliu_image.directive("image.upload",function(){return{restrict:"E",replace:true,scope:{imgobj:"=",targetid:"@",xsize:"@",actname:"@",action:"&",tooltip:"@",view:"@",ww:"@",hh:"@"},template:['<div style="display:inline-block;text-align:center;border:1px solid #cccccc;border-radius:5px;">','<div class="btn btn-outline-info waves-effect" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;">','<a class="wliu-btn{{xsize}} wliu-btn{{xsize}}-upload"></a>','<input type="file" onchange="angular.element(this).scope().selectFile(event);" style="display:block; position:absolute; opacity:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." />',' {{actname}}','</div>','<div style="display:block;width:{{ww}}px;min-height:{{hh}}px;text-align:center;border-top:1px solid #cccccc;">','<img class="img-responsive" width="100%" src="{{ imgobj.resize[view].data?imgobj.resize[view].data:\'\' }}" />','</div>','</div>'].join(''),controller:function($scope){$scope.ww=$scope.ww?$scope.ww:200;$scope.hh=$scope.hh?$scope.hh:120;$scope.xsize=$scope.xsize?$scope.xsize:16;$scope.view=$scope.view?$scope.view:"medium";$scope.selectFile=function(event){files=(event.srcElement||event.target).files;FIMAGE.view=$scope.view;FIMAGE.fromFile($scope.imgobj,files[0],function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.action();if($scope.targetid){$("#"+$scope.targetid).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop","#"+$scope.targetid));}
$scope.$apply();}});}},link:function(sc,el,attr){}}});wliu_image.directive("image.list",function(){return{restrict:"E",replace:true,scope:{imglist:"=",ww:"@",hh:"@",view:"@",text:"@",tooltip:"@"},template:['<div style="display:block;position:relative;padding:2px;" imglist targetid="{{targetid}}" viewerid="{{viewerid}}">','<!---- img box ------------------------------------------------------------------------------------------------>','<div style="display:inline-block;position:relative;margin:2px 4px;overflow:hidden;" imgid="{{imgObj.id}}" class="image-item" ','ng-repeat="imgObj in imglist.rows"','>','<span ng-if="imglist.config.mode==\'edit\'">','<span style="position:absolute;color:red;margin-top:3px;margin-left:60px">{{imgObj.orderno}}</span>','<a class="wliu-btn24 wliu-btn24-img-print" ng-click="printImage(imgObj)" style="position:absolute; margin-top:3px;margin-left:3px;opacity:0.8;" ','popup-target="#imglist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="Print Image" ','>','</a>','<a class="wliu-btn24 wliu-btn24-comments" ng-click="textImage(imgObj)" style="position:absolute; margin-top:3px;margin-left:30px;opacity:0.8;" ','popup-target="#imglist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="Image Comments" ','>','</a>','<a class="wliu-btn24 wliu-btn24-download" ng-if="imgObj.url" href="{{imgObj.url}}" style="position:absolute; margin-top:3px;margin-left:56px;opacity:0.8;" target="_blank" ','popup-target="#imglist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="Download Image" ','>','</a>','<a class="wliu-btn24 wliu-btn24-dispose" ng-click="deleteImage(imgObj)" style="position:absolute; right:0px; margin-top:3px;margin-right:3px;opacity:0.8;" ','popup-target="#imglist_common_tooltip" popup-placement="down" popup-toggle="hover" popup-body="Delete Image" ','>','</a>','</span>','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{ww}}px;height:{{hh}}px;box-sizing:content-box;border:1px solid #cccccc;border-radius:5px;" class="img-content wliu-background-1">','<img class="img-responsive" width="100%" ng-click="clickImage(imgObj)" onload="imageAutoFix(this)" ww="{{ww}}" hh="{{hh}}" style="cursor:pointer;" src="{{imglist.thumbImageData(imgObj)}}" title="click to view image" />','</div>','</div>','<div ng-if="text" style="display:block;text-align:center;width:{{ww}}px;padding-top:6px;height:16px;line-height:16px;box-sizing:content-box;font-size:14px;cursor:pointer;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;" class="image-detail-tooltips" ','popup-target="{{detailTips}}" popup-placement="up" popup-toggle="hover" popup-body="{{displayDetail(imgObj)}}" targetid="{{detailTipsID}}" ','>','{{displayTitle(imgObj)}}','</div>','</div>','<div ng-if="imglist.rows.length<imglist.config.max_length && imglist.config.mode==\'edit\'" style="display:inline-block;position:relative;margin:2px 4px;overflow:hidden;">','<div style="display:table;">','<div style="display:table-cell;vertical-align:middle;text-align:center;width:{{ww}}px;height:{{hh}}px;box-sizing:content-box;border:1px solid #cccccc;border-radius:5px;font-size:18px;font-weight:700;color:#666666" class="wliu-background-1">','<input type="file" style="display:block; position:absolute; opacity:0;top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" value="Browse..." ','onchange="angular.element(this).scope().selectFile(event);" />','Add Image','</div>','</div>','<div ng-if="text" style="display:block;text-align:center;height:20px;">&nbsp;</div>','</div>','<!---// img box ---------------------------------------------------------------------------------------------->','<div ng-if="text" id="{{detailTipsID}}" wliu-popup image-popup disposable></div>','</div>'].join(''),controller:function($scope){$scope.imglist.common_tooltip="imglist_common_tooltip";$scope.detailTipsID=$scope.imglist.scope+"_"+guid();$scope.detailTips="#"+$scope.detailTipsID;$scope.ww=$scope.ww?$scope.ww:"100";$scope.hh=$scope.hh?$scope.hh:"100";$scope.displayTitle=function(imgObj){return imgObj["title_"+$scope.imglist.lang];}
$scope.displayDetail=function(imgObj){var detail_str=imgObj["title_"+$scope.imglist.lang]?"<center>"+imgObj["title_"+$scope.imglist.lang]+"</center>":"";detail_str=detail_str.join("<hr>",imgObj["detail_"+$scope.imglist.lang]?imgObj["detail_"+$scope.imglist.lang].nl2br():"");return detail_str;}
$scope.selectFile=function(event){var newImg=new WLIU.IMAGE({guid:guid(),token:guid()});files=(event.srcElement||event.target).files;var view=$scope.imglist.config.thumb?$scope.imglist.config.thumb:"tiny";FIMAGE.view=view;FIMAGE.allowSize=parseInt($scope.imglist.config.max_size)>0&&($scope.imglist.config.max_size)<GCONFIG.max_upload_size?parseInt($scope.imglist.config.max_size):GCONFIG.max_upload_size;FIMAGE.allowType=(""+$scope.imglist.config.allow_type).toArray(",","upper");FIMAGE.fromFile(newImg,files[0],null,function(fObj){if(fObj.errorCode){alert(fObj.errorMessage);}else{$scope.imglist.addImage(newImg);}});}
$scope.printImage=function(imgObj){FFILE.exportDataURL($scope.imglist.viewImageData(imgObj));}
$scope.clickImage=function(imgObj){if($scope.view){$scope.imglist.current=imgObj.guid;if($scope.imglist.config.mode=="edit"){$($scope.imglist.imgEditor).trigger("ishow");}else{$($scope.imglist.imgViewer).trigger("ishow");}}}
$scope.textImage=function(imgObj){$scope.imglist.current=imgObj.guid;imgObj.status=imgObj.status=="1"?true:false;$($scope.imglist.infoEditor).trigger("show");}
$scope.deleteImage=function(imgObj){if(confirm("Delete image, are you sure?"))
$scope.imglist.deleteImage(imgObj);}},link:function(sc,el,attr){$(function(){if($("#"+sc.imglist.common_tooltip).length<=0){$("body").append('<div id="'+sc.imglist.common_tooltip+'" wliu-popup></div>');$("#"+sc.imglist.common_tooltip).wliuPopup();}
$("body > div[image-popup][disposable]").each(function(img_idx,img_detail){if($("div.image-detail-tooltips[targetid='"+$(img_detail).attr("id")+"']").length<=0)$(img_detail).remove();});$("body>"+sc.detailTips).remove();$(sc.detailTips).appendTo("body");$(sc.detailTips).wliuPopup({});});}}});wliu_image.directive("image.editor",function(){return{restrict:"E",replace:true,scope:{imglist:"=",targetid:"@",title:"@",view:"@",ww:"@",hh:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable fade>','<div wliu-diag-head>{{title}}</div>','<div wliu-diag-body>','<div ng-if="imglist.getCurrent().errorCode">','{{imglist.getCurrent().errorMessage}}','</div>','<div ng-if="!imglist.getCurrent().errorCode">','<div style="min-height:300px;">','<div class="wliu-image-frame" style="position:relative;">','<img class="img-responsive" width="100%" ww="{{ww}}" hh="{{hh}}" style="cursor:pointer;" src="{{ imglist.currentViewData() }}" />','<div class="wliu-image-crop">','<div class="wliu-image-crop-h"></div>','<div class="wliu-image-crop-v"></div>','</div>','</div>','</div>','<div style="text-align:center;">','<button ng-click="reset()" title="Restore Image" class="btn btn-outline-success waves-effect pull-right {{ imglist.currentViewData()?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-restore"></a>',' Reset</button>','<button ng-click="crop()" title="Crop Image" class="btn btn-outline-primary waves-effect pull-right {{ imglist.currentViewData()?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-crop"></a>',' Crop</button>','<button ng-click="rotate()" title="Rotate Image" class="btn btn-outline-primary waves-effect pull-right {{ imglist.currentViewData()?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-rotate-right"></a>',' Rotate</button>','<button ng-click="save()" title="Upload Image" class="btn btn-outline-secondary pull-left waves-effect {{ imglist.currentViewData()?\'\':\'disabled\' }}" style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">','<a class="wliu-btn16 wliu-btn16-okey"></a>',' Save</button>','</div>','</div>','</div>','</div>'].join(''),controller:function($scope){$scope.title=$scope.title?$scope.title:"Image Editor";$scope.ww=$scope.ww?$scope.ww:"400";$scope.rotate=function(){var view=$scope.imglist.config.view?$scope.imglist.config.view:"medium";FIMAGE.view=view;FIMAGE.rotate($scope.imglist.getCurrent(),null,function(oImg){$scope.$apply();$scope.imglist.sc.$apply();$("#"+$scope.targetid).trigger("ishow");});}
$scope.crop=function(){var view=$scope.imglist.config.view?$scope.imglist.config.view:"medium";FIMAGE.view=view;FIMAGE.cropDiv($scope.imglist.getCurrent(),$("div.wliu-image-frame","#"+$scope.targetid),$("div.wliu-image-crop","#"+$scope.targetid),null,function(oImg){$scope.$apply();$scope.imglist.sc.$apply();$("#"+$scope.targetid).trigger("ishow");});}
$scope.reset=function(){var view=$scope.imglist.config.view?$scope.imglist.config.view:"medium";FIMAGE.view=view;FIMAGE.cropReset($scope.imglist.getCurrent(),null,function(oImg){$scope.$apply();$scope.imglist.sc.$apply();$("#"+$scope.targetid).trigger("ishow");});}
$scope.save=function(){$scope.imglist.saveImage($scope.imglist.getCurrent(),function(){$("#"+$scope.targetid).trigger("hide");});}
$scope.dispose=function(){$scope.reset();$("#"+$scope.targetid).trigger("hide");}},link:function(sc,el,attr){$(function(){$(el).wliuDiag({});$(el).unbind("ishow").bind("ishow",function(evt){$(el).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop",el));var click_flag=true;$("img",el).unbind("load").bind("load",function(ev){var img=ev.target;var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=400;var c_hh=400;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;if(click_flag){click_flag=false;$(el).trigger("show");FIMAGE.cropDivReset($("div.wliu-image-crop",el));}});});var ratio=0;if(sc.ww&&sc.hh){var ratio=parseInt(sc.ww)/parseInt(sc.hh);}
$("div.wliu-image-crop",el).draggable({containment:"parent"});$("div.wliu-image-crop",el).resizable({aspectRatio:ratio,containment:"parent"});});}}});wliu_image.directive("image.info",function(){return{restrict:"E",replace:true,scope:{imglist:"=",targetid:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable fade>','<div wliu-diag-head>Image Information</div>','<div wliu-diag-body border style="width:400px;">','<div class="row">','<div class="col-md-12">','<span class="wliuCommon-label">Title-EN</span><br>','<input type="textbox" ng-model="imglist.getCurrent().title_en" style="width:100%;" />','</div>','</div>','<div class="row">','<div class="col-md-12">','<span class="wliuCommon-label">Description-EN</span><br>','<textarea ng-model="imglist.getCurrent().detail_en" style="width:100%;height:60px;"></textarea>','</div>','</div>','<div class="row">','<div class="col-md-12">','<span class="wliuCommon-label">Title-CN</span><br>','<input type="textbox" ng-model="imglist.getCurrent().title_cn" style="width:100%;" />','</div>','</div>','<div class="row">','<div class="col-md-12">','<span class="wliuCommon-label">Description-CN</span><br>','<textarea ng-model="imglist.getCurrent().detail_cn" style="width:100%;height:60px;"></textarea>','</div>','</div>','<div class="row">','<div class="col-md-2 text-md-right">','<span class="wliuCommon-label">Status</span>','</div>','<div class="col-md-4 text-md-left">','<input id="{{targetid}}_status" type="checkbox" ng-model="imglist.getCurrent().status" /> <label for="{{targetid}}_status">Active</label>','</div>','<div class="col-md-4 text-md-right">','<span class="wliuCommon-label">Order</span>','</div>','<div class="col-md-2 text-md-left">','<input type="textbox" ng-model="imglist.getCurrent().orderno" style="width:100%;text-align:center;" />','</div>','</div>','<center>','<button ng-click="save()" title="Save" class="btn btn-lg btn-outline-success waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Save','</button>','<button ng-click="close()" title="Close" class="btn btn-lg btn-outline-info waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Close','</button>','</center>','</div>','</div>'].join(''),controller:function($scope){$scope.save=function(){$scope.imglist.saveText($scope.imglist.getCurrent(),{ajaxAfter:function(oImg){$("#"+$scope.targetid).trigger("hide");}});}
$scope.close=function(){$("#"+$scope.targetid).trigger("hide");}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();});}}});wliu_image.directive("image.viewer",function(){return{restrict:"E",replace:true,scope:{imglist:"=",targetid:"@",ww:"@",hh:"@"},template:['<div id="{{targetid}}" wliu-diag maskable fade>','<a class="wliu-btn24 wliu-btn24-nav-left" ng-click="navLeft()" ng-show="imglist.navLeftState()" style="position:absolute;left:2px;opacity:0.6;top:45%;z-index:99;"></a>','<div wliu-diag-body style="text-align:center;">','<img class="img-responsive" width="100%" ww="{{ww}}" hh="{{hh}}" src="{{imglist.currentViewData()}}" />','</div>','<a class="wliu-btn24 wliu-btn24-nav-right" ng-click="navRight()" ng-show="imglist.navRightState()" style="position:absolute;right:2px;opacity:0.6;top:45%;z-index:99;"></a>','</div>'].join(''),controller:function($scope){$scope.ww=$scope.ww?$scope.ww:600;$scope.hh=$scope.hh?$scope.hh:600;$scope.navLeft=function(){$scope.imglist.navLeft(function(oImg){$("#"+$scope.targetid).trigger("ishow");});}
$scope.navRight=function(){$scope.imglist.navRight(function(oImg){$("#"+$scope.targetid).trigger("ishow");});}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();$(el).unbind("ishow").bind("ishow",function(evt){$(el).trigger("show");var click_flag=true;$("img",el).unbind("load").bind("load",function(ev){var img=ev.target;var i_ww=img.naturalWidth;var i_hh=img.naturalHeight;var img_rate=i_hh/i_ww;var c_ww=100;var c_hh=100;if(parseInt($(img).attr("ww"))&&parseInt($(img).attr("hh"))){c_ww=parseInt($(img).attr("ww"));c_hh=parseInt($(img).attr("hh"));}else if(parseInt($(img).attr("ww"))){c_ww=parseInt($(img).attr("ww"));c_hh=c_ww*img_rate;}else if(parseInt($(img).attr("hh"))){c_hh=parseInt($(img).attr("hh"));c_ww=c_hh/img_rate;}
if(!c_ww&&!c_hh){$(img).css("width","100%");}else{$(img).css("width","");if(c_ww&&c_hh){var rate_ww=1;var rate_hh=1;rate_ww=c_ww/img.naturalWidth;rate_hh=c_hh/img.naturalHeight;var rate=Math.min(rate_ww,rate_hh);if(rate<1){if(rate_ww<rate_hh){i_ww=c_ww;i_hh=c_ww*img_rate;}else{i_hh=c_hh;i_ww=c_hh/img_rate;}}}else if(sc.ww){i_ww=c_ww;i_hh=c_ww*img_rate;}else if(sc.hh){i_hh=c_hh;i_ww=c_hh/img_rate;img.width=i_ww;img.height=i_hh;}}
img.width=i_ww;img.height=i_hh;if(click_flag){click_flag=false;$(el).trigger("show");}});});});}}});wliu_image.directive("image.error",function(){return{restrict:"E",replace:true,scope:{imglist:"=",targetid:"@"},template:['<div id="{{targetid}}" wliu-diag movable maskable>','<div wliu-diag-head>Message</div>','<div wliu-diag-body style="font-size:16px;">','<i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true" style="color:red;"></i> <span style="font-size:16px;">We can\'t process submitted data:</span>','<div style="margin-top:12px;" ng-bind-html="getHTML()"></div>','</div>','</div>'].join(''),controller:function($scope,$sce){$scope.getHTML=function(){if($scope.imglist.errorCode)
return $sce.trustAsHtml($scope.imglist.errorMessage.nl2br());else
return $sce.trustAsHtml("");}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();$(el).unbind("errorshow").bind("errorshow",function(evt){if(parseInt(sc.imglist.errorCode)){$(el).trigger("show");}});});}}});wliu_image.directive("image.esign",function(){return{restrict:"E",replace:true,scope:{table:"=",name:"@",targetid:"@",ww:"@",hh:"@"},template:['<div id="{{targetid}}" wliu-diag maskable fade>','<div wliu-diag-body>','<span style="display:block;color:blue;">Please Sign Your Name</span>','<canvas id="can" width="{{ww}}" height={{hh}} style="border:2px solid #666666;"></canvas>','<div style="text-align:center;">','<button ng-click="save()" title="Save" class="btn btn-lg btn-outline-success waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Confirm','</button>','<button ng-click="clear()" title="Close" class="btn btn-lg btn-outline-danger waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Clear','</button>','<button ng-click="cancel()" title="Close" class="btn btn-lg btn-outline-info waves-effect" ','style="display:inline-block;position:relative;text-transform:none;height:20px;line-height:20px;padding:2px 8px;margin:0px 2px;">',' Cancel','</button>','</div>','</div>','</div>'].join(''),controller:function($scope){$scope.ww=$scope.ww?$scope.ww:640;$scope.hh=$scope.hh?$scope.hh:480;$scope.save=function(){$scope.mycan.save();}
$scope.clear=function(){$scope.mycan.clear();}
$scope.cancel=function(){$scope.clear();$("#"+$scope.targetid).trigger("hide");}},link:function(sc,el,attr){$(function(){$(el).wliuDiag();sc.mycan=new WLIU.CANVAS({canvas:$("canvas",el).get(0)});sc.mycan.init();});}}});
$.fn.extend({wliuDiag:function(opts){var def_settings={offsetto:"",offsetww:0,offsethh:0,top:0,left:0,height:0,width:0,title:"",titleAlign:"center",titleColor:"#33b5e5",maskable:false,movable:false,border:false,fade:false,zIndex:8000};$.extend(def_settings,opts);var mask_ifrm="iframe[wliu-diag-mask]";var mask_div="div[wliu-diag-mask]";var midx=parseInt(def_settings.zIndex);if($(mask_ifrm).length<=0){$("body").append('<iframe wliu-diag-mask style="z-index:'+(midx+1000-2)+';"></iframe>');}
if($(mask_div).length<=0){$("body").append('<div wliu-diag-mask style="z-index:'+(midx+1000-1)+';"></div>');$(mask_div).unbind("click").bind("click",function(evt){if($("*[wliu-diag]:visible").length<=0){$(mask_ifrm).hide();$(mask_div).hide();}else{var max=0;var maxObj=null;$("*[wliu-diag]:visible").filter(function(idx){if(parseInt($(this).css("z-index"))>=max){max=parseInt($(this).css("z-index"));maxObj=$(this)[0];}});$(maxObj).trigger("hide");}});}
return this.each(function(idx,el){if(!$(el).hasAttr("wliu-diag"))$(el).addAttr("wliu-diag");$(el).data("default_settings",def_settings);$(el).data("order",midx);if(def_settings.maskable)$(el).addAttr("maskable",1);if(def_settings.movable)$(el).addAttr("movable",1);if(def_settings.border)$(el).addAttr("border",1);if(def_settings.fade)$(el).addAttr("fade",1);$(el).removeAttr("park");$(el).data("parkTop",0);$(el).data("parkLeft",0);if($(el).hasAttr("border"))$("div[wliu-diag-body]",el).css("border-width","1px");if(def_settings.width>0)$("div[wliu-diag-body]",el).css("width",def_settings.width);if(def_settings.height>0)$("div[wliu-diag-body]",el).css("height",def_settings.height);if(def_settings.top>0)$(el).css("top",def_settings.top);if(def_settings.left>0)$(el).css("left",def_settings.left);if($(el).has("a.wliu-btn16-close").length<=0)$(el).prepend('<a class="wliu-btn16 wliu-btn16-close"></a>');if(def_settings.title!=""){if($(el).has("div[wliu-diag-head]").length<=0)$(el).prepend('<div wliu-diag-head"></div>');$("div[wliu-diag-head]",el).html(def_settings.title);$(el).attr("title","");}
if($("div[wliu-diag-head]",el).length>0){if(def_settings.titleAlign!="")$("div[wliu-diag-head]",el).css("text-align",def_settings.titleAlign);if(def_settings.titleColor!="")$("div[wliu-diag-head]",el).css("background-color",def_settings.titleColor);if(def_settings.width>0)$("div[wliu-diag-head]",el).css("width",def_settings.width);$("a.wliu-btn16-close",el).addClass("wliu-diag-title-close");}
$("a.wliu-btn16-close, input.wliu-diag-close, button.wliu-diag-close, *[wliu-diag-close]",el).unbind("click").bind("click",function(evt){$(el).trigger("hide");evt.preventDefault();evt.stopPropagation();return false;});if($(el).hasAttr("movable")){if($(el).has("div[wliu-diag-head]").length<=0){$(el).prepend('<div wliu-diag-head"></div>');$("a.wliu-btn16-close",el).addClass("wliu-diag-title-close");}
$("div[wliu-diag-head]",el).css("cursor","move");$(el).draggable({handle:$("div[wliu-diag-head]",el),start:function(){},stop:function(){$(el).addAttr("park",1);$(el).data("parkTop",$(el).offset().top);$(el).data("parkLeft",$(el).offset().left);if($(el).offset().top<=0)$(el).offset({top:5});if($(el).offset().left<=0)$(el).offset({left:5});if($(el).offset().top+$(el).outerHeight()>=$(window).scrollTop()+window.innerHeight||$(el).offset().left+$(el).outerWidth()>=$(window).scrollLeft()+window.innerWidth||$(el).data("parkTop")<$(window).scrollTop()||$(el).data("parkLeft")<$(window).scrollLeft()){var el_top=$(window).scrollTop()+(window.innerHeight-20-$(el).outerHeight())/2;var el_left=$(window).scrollLeft()+(window.innerWidth-20-$(el).outerWidth())/2;if(el_top<0)el_top=5;if(el_left<0)el_left=5;if(def_settings.top>0)el_top=def_settings.top;if(def_settings.left>0)el_left=def_settings.left;$(el).css({left:el_left,top:el_top});$(el).data("parkTop",$(el).offset().top);$(el).data("parkLeft",$(el).offset().left);}}});}
$(el).unbind("click").bind("click",function(evt){if(parseInt($(el).css("z-index"))<midx+1000)
if($(el).is(":visible"))$(el).trigger("show");});$(el).unbind("hide").bind("hide",function(evt){var def_settings=$(el).data("default_settings");$(this).css("z-index",$(this).data("order")).fadeOut(0,function(){if($("*[wliu-diag][maskable]:visible").length<=0){$(mask_ifrm).hide();$(mask_div).hide();}
var max=0;var maxObj=null;$("*[wliu-diag]:visible").filter(function(idx){$(this).css("z-index",parseInt($(this).css("z-index"))+1);if(parseInt($(this).css("z-index"))>=max){max=parseInt($(this).css("z-index"));maxObj=$(this)[0];}});$(maxObj).css("z-index",midx+1000);$(maxObj).fadeIn(($(el).hasAttr("fade")?"slow":0),function(){if($(maxObj).hasAttr("maskable")){$(mask_ifrm).show();$(mask_div).show();}else{$(mask_ifrm).hide();$(mask_div).hide();}});eval($(el).attr("after"));});});$(el).unbind("show").bind("show",function(evt,callback){var def_settings=$(el).data("default_settings");if(def_settings.before)if($.isFunction(def_settings.before))def_settings.before(el);$("*[wliu-diag]:visible").not(el).each(function(idx1,el1){if(parseInt($(el1).css("z-index"))>=(midx+1000)){$(el1).css("z-index",(midx+1000)-3);}else{$(el1).css("z-index",parseInt($(el1).css("z-index"))-1);}});$(el).css("z-index",midx+1000);if($(el).hasAttr("park")){if($(el).data("parkTop")+$(el).outerHeight()>=$(window).scrollTop()+window.innerHeight||$(el).data("parkLeft")+$(el).outerWidth()>=$(window).scrollLeft()+window.innerWidth||$(el).data("parkTop")<$(window).scrollTop()||$(el).data("parkLeft")<$(window).scrollLeft()){var el_top=$(window).scrollTop()+(window.innerHeight-20-$(el).outerHeight())/2;var el_left=$(window).scrollLeft()+(window.innerWidth-20-$(el).outerWidth())/2;if(el_top<0)el_top=5;if(el_left<0)el_left=5;if(def_settings.top>0)el_top=def_settings.top;if(def_settings.left>0)el_left=def_settings.left;$(el).css({left:el_left,top:el_top});}}else{if(def_settings.offsetto!=""&&$(def_settings.offsetto).length>0){var el_top=$(def_settings.offsetto).offset().top+def_settings.offsethh;var el_left=$(def_settings.offsetto).offset().left+def_settings.offsetww;$(el).css({left:el_left,top:el_top});}else{var el_top=$(window).scrollTop()+(window.innerHeight-20-$(el).outerHeight())/2;var el_left=$(window).scrollLeft()+(window.innerWidth-20-$(el).outerWidth())/2;if(el_top<0)el_top=5;if(el_left<0)el_left=5;if(def_settings.top>0)el_top=def_settings.top;if(def_settings.left>0)el_left=def_settings.left;$(this).css({left:el_left,top:el_top});}}
if(!$(el).is(":visible"))eval($(el).attr("before"));$(el).fadeIn(($(el).hasAttr("fade")?"slow":0),function(){if($(this).hasAttr("maskable")){$(mask_ifrm).show();$(mask_div).show();}});});$(el).unbind("title").bind("title",function(evt,title){$("*[wliu-diag-head]",el).html(title);});});}});$(function(){$("div[wliu-diag]").wliuDiag({});$(document).off("click","*[diag-toggle='click']").on("click","*[diag-toggle='click']",function(evt){$($(this).attr("diag-target")).trigger("show");});$(document).off("mouseover","*[diag-toggle='hover']").on("mouseover","*[diag-toggle='hover']",function(evt){$($(this).attr("diag-target")).trigger("show");});$(window).unbind("resize.wliuDiag").bind("resize.wliuDiag",function(){$("div[wliu-diag]:visible").each(function(idx,el){var def_settings=$(this).data("default_settings");if($(this).hasAttr("park")){if($(this).data("parkTop")+$(this).outerHeight()>=$(window).scrollTop()+window.innerHeight||$(this).data("parkLeft")+$(this).outerWidth()>=$(window).scrollLeft()+window.innerWidth||$(el).data("parkTop")<$(window).scrollTop()||$(el).data("parkLeft")<$(window).scrollLeft()){var el_top=$(window).scrollTop()+(window.innerHeight-20-$(this).outerHeight())/2;var el_left=$(window).scrollLeft()+(window.innerWidth-20-$(this).outerWidth())/2;if(el_top<0)el_top=5;if(el_left<0)el_left=5;if(def_settings.top>0)el_top=def_settings.top;if(def_settings.left>0)el_left=def_settings.left;$(this).css({left:el_left,top:el_top});}}else{if(def_settings.offsetto!=""&&$(def_settings.offsetto).length>0){var el_top=$(def_settings.offsetto).offset().top+def_settings.offsethh;var el_left=$(def_settings.offsetto).offset().left+def_settings.offsetww;$(this).css({left:el_left,top:el_top});}else{var el_top=$(window).scrollTop()+(window.innerHeight-20-$(this).outerHeight())/2;var el_left=$(window).scrollLeft()+(window.innerWidth-20-$(this).outerWidth())/2;if(el_top<0)el_top=5;if(el_left<0)el_left=5;if(def_settings.top>0)el_top=def_settings.top;if(def_settings.left>0)el_left=def_settings.left;$(this).css({left:el_left,top:el_top});}}});});});
$.fn.extend({wliuPopup:function(opts){var def_settings={};$.extend(def_settings,opts);return this.each(function(idx,el){if(!$(el).hasAttr("wliu-popup"))$(el).addAttr("wliu-popup");if($(el).has("s[arrow][left]").length<=0)$(el).prepend('<s arrow left></s>');if($(el).has("s[arrow][right]").length<=0)$(el).prepend('<s arrow right></s>');if($(el).has("s[arrow][up]").length<=0)$(el).prepend('<s arrow up></s>');if($(el).has("s[arrow][head-up]").length<=0)$(el).prepend('<s arrow head-up></s>');if($(el).has("s[arrow][down]").length<=0)$(el).prepend('<s arrow down></s>');if($(el).has("div[wliu-popup-body]").length<=0)$(el).append('<div wliu-popup-body></div>');});},wliuColError:function(opts){var def_settings={};$.extend(def_settings,opts);if($("#wliu_form_tooltip").length<=0){$("body").append('<div id="wliu_form_tooltip" wliu-popup></div>');}
return this.each(function(idx,el){if(!$(el).hasClass("wliu-btn16"))$(el).addClass("wliu-btn16");if(!$(el).hasClass("wliu-btn16-error-help"))$(el).addClass("wliu-btn16-error-help");if(!$(el).hasAttr("popup-target"))$(el).attr("popup-target","#wliu_form_tooltip");if(!$(el).hasAttr("popup-toggle"))$(el).attr("popup-toggle","hover");if(!$(el).hasAttr("popup-placement"))$(el).attr("popup-placement","down");if(!$(el).hasAttr("popup-body"))$(el).attr("popup-body","");});},wliuFormMessage:function(opts){var def_settings={};$.extend(def_settings,opts);return this.each(function(idx,el){$(el).attr("id","wliu-form-message-id");$(el).addClass("card card-danger text-center z-depth-2 mb-1 white-text").css("padding","10px");var htmlContent=['<div style="font-size:16px;text-align:left;">','<i class="fa fa-exclamation-triangle fa-md" aria-hidden="true" style="color:white;"></i> <span style="font-size:16px;">We can\'t process submitted data:</span>','<div id="wliu-form-message-body" style="margin-top:5px;padding-left:20px;" class="white-text"></div>','</div>'].join("");$(el).append(htmlContent);});},wliuFormPopup:function(opts){var def_settings={};$.extend(def_settings,opts);return this.each(function(idx,el){$(el).attr("id","wliu-form-popup-id");$(el).attr("wliu-diag","").attr("movable","").attr("maskable","");var htmlContent=['<div wliu-diag-head>Message</div>','<div wliu-diag-body style="font-size:16px;">','<i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true" style="color:red;"></i> <span style="font-size:16px;">We can\'t process submitted data:</span>','<div id="wliu-form-popup-body" style="margin-top:5px;"></div>','</div>',].join("");$(el).append(htmlContent);});},wliuAutoTip:function(opts){var def_settings={};$.extend(def_settings,opts);return this.each(function(idx,el){$(el).attr("id","wliu-autotip-id");});},wliuWait:function(opts){var def_settings={};$.extend(def_settings,opts);return this.each(function(idx,el){$(el).attr("id","wliu-wait-id");});}});$(function(){$("a[wliu-form-col-error]").wliuColError({});$("div[wliu-form-message]").wliuFormMessage({});$("div[wliu-form-popup]").wliuFormPopup({});$("div[wliu-form-popup]").wliuDiag({});$("div[wliu-autotip]").wliuAutoTip({});$("div[wliu-autotip]").wliuTips({});$("div[wliu-wait]").wliuWait({});$("div[wliu-wait]").wliuLoad({});$("div[wliu-popup]").wliuPopup({});$(document).off("click","*[popup-toggle='click']").on("click","*[popup-toggle='click']",function(evt){var target_el=$(this).attr("popup-target");var target_content=$(this).attr("popup-body");if($(target_el).is(":hidden")){if(target_content){var target_pl=$(this).attr("popup-placement");var target_tt=$(this).attr("popup-head");if(target_tt){if($(target_el).has("div[wliu-popup-head]").length<=0)
$(target_el).prepend('<div wliu-popup-head>'+target_tt+'</div>');else
$("div[wliu-popup-head]",$(target_el)).html(target_tt);}else{$("div[wliu-popup-head]",$(target_el)).remove();}
$("div[wliu-popup-body]",$(target_el)).html(target_content);$(target_el).addAttr("active");var nleft=-900;var ntop=-900;switch((""+target_pl).toLowerCase()){case"left":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][left]",$(target_el)).addAttr("active");nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;break;case"right":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][right]",$(target_el)).addAttr("active");nleft=$(this).offset().left-$(target_el).outerWidth()-12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;break;case"up":$("s[arrow]",$(target_el)).removeAttr("active");if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;break;case"down":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][down]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top-$(target_el).outerHeight()-12;break;default:$("s[arrow]",$(target_el)).removeAttr("active");var nplace="left";nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;var cleft=$(this).offset().left+$(this).outerWidth()+$(target_el).outerWidth()+12;if(ntop>0){if(cleft<=$(window).scrollLeft()+window.innerWidth){nplace="left";$("s[arrow][left]",$(target_el)).addAttr("active");nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;}else{cleft=$(this).offset().left-$(target_el).outerWidth()-12;if(cleft>=0){nplace="right";$("s[arrow][right]",$(target_el)).addAttr("active");nleft=$(this).offset().left-$(target_el).outerWidth()-12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;}else{nplace="up";if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;}}}else{nplace="up";if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;}
break;}
$(target_el).offset({left:nleft,top:ntop});}else{$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();}}else{$(target_el).removeAttr("active");$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();}});$(document).off("focus","*[popup-toggle='focus']").on("focus","*[popup-toggle='focus']",function(evt){var target_el=$(this).attr("popup-target");var target_content=$(this).attr("popup-body");if($(target_el).is(":hidden")){if(target_content){var target_pl=$(this).attr("popup-placement");var target_tt=$(this).attr("popup-head");if(target_tt){if($(target_el).has("div[wliu-popup-head]").length<=0)
$(target_el).prepend('<div wliu-popup-head>'+target_tt+'</div>');else
$("div[wliu-popup-head]",$(target_el)).html(target_tt);}else{$("div[wliu-popup-head]",$(target_el)).remove();}
$("div[wliu-popup-body]",$(target_el)).html(target_content);$(target_el).addAttr("active");var nleft=-900;var ntop=-900;switch((""+target_pl).toLowerCase()){case"left":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][left]",$(target_el)).addAttr("active");nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;break;case"right":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][right]",$(target_el)).addAttr("active");nleft=$(this).offset().left-$(target_el).outerWidth()-12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;break;case"up":$("s[arrow]",$(target_el)).removeAttr("active");if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;break;case"down":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][down]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top-$(target_el).outerHeight()-12;break;default:$("s[arrow]",$(target_el)).removeAttr("active");var nplace="left";nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;var cleft=$(this).offset().left+$(this).outerWidth()+$(target_el).outerWidth()+12;if(ntop>0){if(cleft<=$(window).scrollLeft()+window.innerWidth){nplace="left";$("s[arrow][left]",$(target_el)).addAttr("active");nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;}else{cleft=$(this).offset().left-$(target_el).outerWidth()-12;if(cleft>=0){nplace="right";$("s[arrow][right]",$(target_el)).addAttr("active");nleft=$(this).offset().left-$(target_el).outerWidth()-12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;}else{nplace="up";if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;}}}else{nplace="up";if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;}
break;}
$(target_el).offset({left:nleft,top:ntop});}else{$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();}}else{$(target_el).removeAttr("active");$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();}});$(document).off("mouseover","*[popup-toggle='hover']").on("mouseover","*[popup-toggle='hover']",function(evt){var target_el=$(this).attr("popup-target");var target_content=$(this).attr("popup-body");if(target_content){var target_pl=$(this).attr("popup-placement");var target_tt=$(this).attr("popup-head");if(target_tt){if($(target_el).has("div[wliu-popup-head]").length<=0)
$(target_el).prepend('<div wliu-popup-head>'+target_tt+'</div>');else
$("div[wliu-popup-head]",$(target_el)).html(target_tt);}else{$("div[wliu-popup-head]",$(target_el)).remove();}
$("div[wliu-popup-body]",$(target_el)).html(target_content);$(target_el).addAttr("active");var nleft=-900;var ntop=-900;switch((""+target_pl).toLowerCase()){case"left":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][left]",$(target_el)).addAttr("active");nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;break;case"right":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][right]",$(target_el)).addAttr("active");nleft=$(this).offset().left-$(target_el).outerWidth()-12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;break;case"up":$("s[arrow]",$(target_el)).removeAttr("active");if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;break;case"down":$("s[arrow]",$(target_el)).removeAttr("active");$("s[arrow][down]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top-$(target_el).outerHeight()-12;break;default:$("s[arrow]",$(target_el)).removeAttr("active");var nplace="left";nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;var cleft=$(this).offset().left+$(this).outerWidth()+$(target_el).outerWidth()+12;if(ntop>0){if(cleft<=$(window).scrollLeft()+window.innerWidth){nplace="left";$("s[arrow][left]",$(target_el)).addAttr("active");nleft=$(this).offset().left+$(this).outerWidth()+12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;}else{cleft=$(this).offset().left-$(target_el).outerWidth()-12;if(cleft>=0){nplace="right";$("s[arrow][right]",$(target_el)).addAttr("active");nleft=$(this).offset().left-$(target_el).outerWidth()-12;ntop=$(this).offset().top+$(this).outerHeight()/2-$(target_el).outerHeight()/2;}else{nplace="up";if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;}}}else{nplace="up";if($(target_el).has("div[wliu-popup-head]").length<=0)
$("s[arrow][up]",$(target_el)).addAttr("active");else
$("s[arrow][head-up]",$(target_el)).addAttr("active");nleft=$(this).offset().left+($(this).outerWidth()-$(target_el).outerWidth())/2;ntop=$(this).offset().top+$(this).outerHeight()+12;}
break;}
$(target_el).offset({left:nleft,top:ntop});}else{$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();}});$(document).off("mouseout","*[popup-toggle='hover']").on("mouseout","*[popup-toggle='hover']",function(evt){var target_el=$(this).attr("popup-target");$(target_el).removeAttr("active");$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();});$(document).off("mouseleft","*[popup-toggle='hover']").on("mouseleft","*[popup-toggle='hover']",function(evt){var target_el=$(this).attr("popup-target");$(target_el).removeAttr("active");$("div[wliu-popup-head]",$(target_el)).remove();$("div[wliu-popup-body]",$(target_el)).empty();});});
$.fn.extend({wliuLoad:function(opts){var def_settings={title:"Please Wait ...",maskable:0};$.extend(def_settings,opts);var mask_ifrm="iframe[wliu-load-mask]";var mask_div="div[wliu-load-mask]";if($(mask_ifrm).length<=0){$(document.body).append('<iframe wliu-load-mask></iframe>');}
if($(mask_div).length<=0){$(document.body).append('<div wliu-load-mask></div>');}
return this.each(function(idx,el){if(!$(el).hasAttr("wliu-load"))$(el).addAttr("wliu-load");if($(el).has("i.fa").length<=0)$(el).prepend('<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>');if($(el).has("div[wliu-load-text]").length<=0)$(el).append('<div wliu-load-text>'+def_settings.title+'</div>');if(def_settings.maskable||$(el).hasAttr("maskable"))$(el).addAttr("maskable");$(el).unbind("show").bind("show",function(evt,msg){if($(el).hasAttr("maskable")){$(mask_ifrm).show();$(mask_div).show();}
$(el).show();});$(el).unbind("hide").bind("hide",function(evt,msg){$(el).hide();if($("div[wliu-load][maskable]:visible").length<=0){if($(el).hasAttr("maskable")){$(mask_div).hide();$(mask_ifrm).hide();}}});});},wliuTips:function(opts){var def_settings={offsetww:20,offsethh:20,type:""};$.extend(def_settings,opts);return this.each(function(idx,el){if(!$(el).hasAttr("wliu-tips"))$(el).addAttr("wliu-tips");$(el).unbind("show").bind("show",function(evt,msg,type){$(el).css({"left":"50%","margin-left":"-100px"});if($(el).hasAttr("center"))$(el).css({"left":"50%","margin-left":"-100px"});if($(el).hasAttr("left"))$(el).css({"left":"0px","margin-left":parseInt(def_settings.offsetww)+"px"});if($(el).hasAttr("right"))$(el).css({"right":"0px","margin-right":parseInt(def_settings.offsetww)+"px"});$(el).css({"top":"50%","margin-top":"-36px"});if($(el).hasAttr("middle"))$(el).css({"top":"50%","margin-top":"-36px"});if($(el).hasAttr("top"))$(el).css({"top":"0px","margin-top":parseInt(def_settings.offsethh)+"px"});if($(el).hasAttr("bottom"))$(el).css({"bottom":"0px","margin-bottom":parseInt(def_settings.offsethh)+"px"});if(type){$(el).removeAttr("success warning danger");$(el).addAttr(type);}
if($(el).hasAttr("success"))$(el).removeAttr("success warning danger").addAttr("success");if($(el).hasAttr("warning"))$(el).removeAttr("success warning danger").addAttr("warning");if($(el).hasAttr("danger"))$(el).removeAttr("success warning danger").addAttr("danger");if(msg!=undefined)
$(el).html(msg).show();else
$(el).show();});$(el).unbind("hide").bind("hide",function(evt){$(el).hide();});$(el).unbind("auto").bind("auto",function(evt,msg,type,callback){$(el).css({"left":"50%","margin-left":"-100px"});if($(el).hasAttr("center"))$(el).css({"left":"50%","margin-left":"-100px"});if($(el).hasAttr("left"))$(el).css({"left":"0px","margin-left":parseInt(def_settings.offsetww)+"px"});if($(el).hasAttr("right"))$(el).css({"left":"auto","right":"0px","margin-right":parseInt(def_settings.offsetww)+"px"});$(el).css({"top":"50%","margin-top":"-36px"});if($(el).hasAttr("middle"))$(el).css({"top":"50%","margin-top":"-36px"});if($(el).hasAttr("top"))$(el).css({"top":"0px","margin-top":parseInt(def_settings.offsethh)+"px"});if($(el).hasAttr("bottom"))$(el).css({"top":"auto","bottom":"0px","margin-bottom":parseInt(def_settings.offsethh)+"px"});if(type){$(el).removeAttr("success warning danger");$(el).addAttr(type);}
if($(el).hasAttr("success"))$(el).removeAttr("success warning danger").addAttr("success");if($(el).hasAttr("warning"))$(el).removeAttr("success warning danger").addAttr("warning");if($(el).hasAttr("danger"))$(el).removeAttr("success warning danger").addAttr("danger");if(msg!=undefined)
$(el).stop(true,true).html(msg).fadeIn(10).delay(2000).fadeOut(1000,callback);else
$(el).stop(true,true).fadeIn(10).delay(2000).fadeOut(1000,callback);});});}});$(function(){$("div[wliu-load]").wliuLoad({});$("div[wliu-tips]").wliuTips({});});
$.fn.extend({wliuTree:function(opts){var def_settings={remember:true,nodes:"auto",tooltip:""};$.extend(def_settings,opts);def_settings.remember=true;return this.each(function(idx,el){var treeid=0;if(!$(el).attr("id"))$(el).attr("id","wliuTree."+treeid++);var remember_prex=$(el).attr("id");var eidx=0;$(">li",$(el)).each(function(idx,el1){if($(el1).has("s").length<=0)$(el1).prepend("<s folder></s>")
$(el1).attr("eidx",eidx);var remember_name=remember_prex+"_"+eidx;if(def_settings.remember&&(localStorage.getItem(remember_name)=="open"||localStorage.getItem(remember_name)=="close")){$(el1).removeAttr("open").removeAttr("close").addAttr(localStorage.getItem(remember_name));}else if(def_settings.nodes=="open"||def_settings.nodes=="close"){$(el1).removeAttr("open").removeAttr("close").addAttr(def_settings.nodes);}
eidx++;});$("ul[wliu-tree]>li",$(el)).each(function(idx,el1){if($(el1).has("s").length<=0)$(el1).prepend("<s folder></s>")
$(el1).attr("eidx",eidx);var remember_name=remember_prex+"_"+eidx;if(def_settings.remember&&(localStorage.getItem(remember_name)=="open"||localStorage.getItem(remember_name)=="close")){$(el1).removeAttr("open").removeAttr("close").addAttr(localStorage.getItem(remember_name));}else if(def_settings.nodes=="open"||def_settings.nodes=="close"){$(el1).removeAttr("open").removeAttr("close").addAttr(def_settings.nodes);}
eidx++;});$(document).off("click.wliuTree","ul[wliu-tree]>li *").on("click.wliuTree","ul[wliu-tree]>li *",function(evt){evt.preventDefault();evt.stopPropagation();return false;});$(document).off("click.wliuTree","ul[wliu-tree]>li, ul[wliu-tree]>li>s").on("click.wliuTree","ul[wliu-tree]>li, ul[wliu-tree]>li>s",function(evt){if($(this).prop("tagName").toUpperCase()=="LI"){if($(this).hasAttr("nodes open")){$(this).removeAttr("open").addAttr("close");if(def_settings.remember){var remember_name=remember_prex+"_"+$(this).attr("eidx");localStorage.setItem(remember_name,"close");}}else if($(this).hasAttr("nodes close")){$(this).removeAttr("close").addAttr("open");if(def_settings.remember){var remember_name=remember_prex+"_"+$(this).attr("eidx");localStorage.setItem(remember_name,"open");}}}
if($(this).prop("tagName").toUpperCase()=="S"){if($(this).parent("li").hasAttr("nodes open")){$(this).parent("li").removeAttr("open").addAttr("close");if(def_settings.remember){var remember_name=remember_prex+"_"+$(this).parent("li").attr("eidx");localStorage.setItem(remember_name,"close");}}else if($(this).parent("li").hasAttr("nodes close")){$(this).parent("li").removeAttr("close").addAttr("open");if(def_settings.remember){var remember_name=remember_prex+"_"+$(this).parent("li").attr("eidx");localStorage.setItem(remember_name,"open");}}}
evt.preventDefault();evt.stopPropagation();return false;});});}});$(function(){$("ul[wliu-tree][root]").wliuTree();});
$.fn.extend({wliuTab1:function(){return this.each(function(idx,el){var body_area=$("+div[wliu-tab1-body]",el).get(0);if($(el).hasAttr("wliu-tab1-height"))$(body_area).css("height",parseInt($(el).attr("wliu-tab1-height"))?parseInt($(el).attr("wliu-tab1-height")):"auto");var fluid=$(el).hasAttr("fluid");var tabWW=100/parseInt($(">li",el).length);var ttww=0;$(">li",el).each(function(idx1,el1){ttww+=$(el1).outerWidth();if(fluid){$(el1).css("width",tabWW+"%");}
$(el1).attr("tabsn",idx1);$(el1).attr("title",$(el1).text());});if(ttww>$(el).outerWidth()&&!fluid){$(">li",el).each(function(idx1,el1){$(el1).css("width",tabWW+"%");});}
$(">div",$(body_area)).each(function(idx1,el1){$(el1).attr("tabsn",idx1);});var sn=$(">li.selected",el).attr("tabsn")?parseInt($(">li.selected",el).attr("tabsn")):0;$(">li",el).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(">li[tabsn='"+sn+"']",el).addClass("selected");$(">div[tabsn='"+sn+"']",$(body_area)).addClass("selected");var trigger="click";switch($(el).attr("tab1-toggle")){case"click":trigger="click";break;case"hover":trigger="mouseover";break;default:trigger="click";break;}
var ev_act=$(el).attr("active");var ev_deact=$(el).attr("deactive");$(">li",el).unbind(trigger).bind(trigger,function(ev){var deact_sn=$(">li.selected",el).attr("tabsn")?parseInt($(">li.selected",el).attr("tabsn")):0;if(ev_deact)eval(ev_deact+"("+deact_sn+")");$(">li",el).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(this).addClass("selected");$(">div[tabsn='"+$(this).attr("tabsn")+"']",$(body_area)).addClass("selected");var act_sn=$(">li.selected",el).attr("tabsn")?parseInt($(">li.selected",el).attr("tabsn")):0;if(ev_act)eval(ev_act+"("+act_sn+")");});});},wliuTab9:function(){return this.each(function(idx,el){var body_area=$("+div[wliu-tab9-body]",el).get(0);if($(el).hasAttr("wliu-tab9-height"))$(body_area).css("height",parseInt($(el).attr("wliu-tab9-height"))?parseInt($(el).attr("wliu-tab9-height")):"auto");var fluid=$(el).hasAttr("fluid");var tabWidth=$(el).width()-24-24;var tabWW=tabWidth/parseInt($(">li",el).length);var ttww=0;$(">li",el).each(function(idx1,el1){if($(el1).has("span").length<=0){var el_text=$(el1).text();$(el1).empty();$(el1).append("<span>"+el_text+"</span><s></s>");}
ttww+=$(el1).outerWidth();if(fluid){$(el1).css("width",tabWW+"px");}
$(el1).attr("tabsn",idx1);$(el1).attr("title",$(el1).text());});if(ttww>=($(el).outerWidth()-24-10)&&!fluid){$(">li",el).each(function(idx1,el1){$(el1).css("width",tabWW+"px");});}
$(">div",$(body_area)).each(function(idx1,el1){$(el1).attr("tabsn",idx1);});var sn=$(">li.selected",el).attr("tabsn")?parseInt($(">li.selected",el).attr("tabsn")):0;$(">li",el).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(">li[tabsn='"+sn+"']",el).addClass("selected");$(">div[tabsn='"+sn+"']",$(body_area)).addClass("selected");var trigger="click";switch($(el).attr("tab1-toggle")){case"click":trigger="click";break;case"hover":trigger="mouseover";break;default:trigger="click";break;}
var ev_act=$(el).attr("active");var ev_deact=$(el).attr("deactive");$(">li",el).unbind(trigger).bind(trigger,function(ev){var deact_sn=$(">li.selected",el).attr("tabsn")?parseInt($(">li.selected",el).attr("tabsn")):0;if(ev_deact)eval(ev_deact+"("+deact_sn+")");$(">li",el).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(this).addClass("selected");$(">div[tabsn='"+$(this).attr("tabsn")+"']",$(body_area)).addClass("selected");var act_sn=$(">li.selected",el).attr("tabsn")?parseInt($(">li.selected",el).attr("tabsn")):0;if(ev_act)eval(ev_act+"("+act_sn+")");});});}});$(function(){$("ul[wliu-tab1]").wliuTab1();$("ul[wliu-tab9]").wliuTab9();$(document).off("click","ul[wliu-tab1][tab1-toggle='click']>li").on("click","ul[wliu-tab1][tab1-toggle='click']>li",function(evt){if(!$(this).hasClass("selected")){var body_area=$("+div[wliu-tab1-body]",$(this).parent()).get(0);$(">li",$(this).parent()).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(this).addClass("selected");$(">div[tabsn='"+$(this).attr("tabsn")+"']",$(body_area)).addClass("selected");}});$(document).off("mouseover","ul[wliu-tab1][tab1-toggle='hover']>li").on("mouseover","ul[wliu-tab1][tab1-toggle='hover']>li",function(evt){if(!$(this).hasClass("selected")){var body_area=$("+div[wliu-tab1-body]",$(this).parent()).get(0);$(">li",$(this).parent()).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(this).addClass("selected");$(">div[tabsn='"+$(this).attr("tabsn")+"']",$(body_area)).addClass("selected");}});$(document).off("click","ul[wliu-tab9][tab9-toggle='click']>li").on("click","ul[wliu-tab9][tab9-toggle='click']>li",function(evt){if(!$(this).hasClass("selected")){var body_area=$("+div[wliu-tab9-body]",$(this).parent()).get(0);$(">li",$(this).parent()).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(this).addClass("selected");$(">div[tabsn='"+$(this).attr("tabsn")+"']",$(body_area)).addClass("selected");}});$(document).off("mouseover","ul[wliu-tab9][tab9-toggle='hover']>li").on("mouseover","ul[wliu-tab9][tab9-toggle='hover']>li",function(evt){if(!$(this).hasClass("selected")){var body_area=$("+div[wliu-tab9-body]",$(this).parent()).get(0);$(">li",$(this).parent()).removeClass("selected");$(">div",$(body_area)).removeClass("selected");$(this).addClass("selected");$(">div[tabsn='"+$(this).attr("tabsn")+"']",$(body_area)).addClass("selected");}});$(window).unbind("resize.wliuTab").bind("resize.wliuTab",function(){$("ul[wliu-tab1]").each(function(idx,el){var fluid=$(el).hasAttr("fluid");var tabWW=100/parseInt($(">li",el).length);var ttww=0;$(">li",el).each(function(idx1,el1){ttww+=$(el1).outerWidth();});if(ttww>$(el).outerWidth()){$(">li",el).each(function(idx1,el1){$(el1).css("width",tabWW+"%");});}else if(fluid){$(">li",el).each(function(idx1,el1){$(el1).css("width",tabWW+"%");});}});$("ul[wliu-tab9]").each(function(idx,el){var fluid=$(el).hasAttr("fluid");var tabWidth=$(el).width()-24-24;var tabWW=tabWidth/parseInt($(">li",el).length);var ttww=0;$(">li",el).each(function(idx1,el1){ttww+=$(el1).outerWidth();});if(ttww>=($(el).outerWidth()-24-10)){$(">li",el).each(function(idx1,el1){$(el1).css("width",tabWW+"px");});}else if(fluid){$(">li",el).each(function(idx1,el1){$(el1).css("width",tabWW+"px");});}});});});